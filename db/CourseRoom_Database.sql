CREATE DATABASE  IF NOT EXISTS `courseroom` /*!40100 DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci */ /*!80016 DEFAULT ENCRYPTION='N' */;
USE `courseroom`;
-- MySQL dump 10.13  Distrib 8.0.28, for Win64 (x86_64)
--
-- Host: 127.0.0.1    Database: courseroom
-- ------------------------------------------------------
-- Server version	8.0.28

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!50503 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;

--
-- Table structure for table `tb_archivosadjuntostareas`
--

DROP TABLE IF EXISTS `tb_archivosadjuntostareas`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_archivosadjuntostareas` (
  `IdArchivoAdjunto` int NOT NULL AUTO_INCREMENT,
  `NombreArchivo` varchar(100) NOT NULL,
  `Archivo` longblob NOT NULL,
  `Extension` varchar(32) NOT NULL,
  `FechaEnviado` varchar(100) NOT NULL,
  `IdTarea` int NOT NULL,
  `Activo` bit(1) NOT NULL DEFAULT b'1',
  PRIMARY KEY (`IdArchivoAdjunto`),
  KEY `fk_IdTareaArchivoAdjunto_INDEX` (`IdTarea`),
  CONSTRAINT `fk_IdTareaArchivoAdjunto` FOREIGN KEY (`IdTarea`) REFERENCES `tb_tareas` (`IdTarea`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_archivosadjuntostareas`
--

LOCK TABLES `tb_archivosadjuntostareas` WRITE;
/*!40000 ALTER TABLE `tb_archivosadjuntostareas` DISABLE KEYS */;
/*!40000 ALTER TABLE `tb_archivosadjuntostareas` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_archivoscompartidosgrupos`
--

DROP TABLE IF EXISTS `tb_archivoscompartidosgrupos`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_archivoscompartidosgrupos` (
  `IdArchivoCompartido` int NOT NULL AUTO_INCREMENT,
  `NombreArchivo` varchar(100) NOT NULL,
  `Archivo` longblob NOT NULL,
  `Extension` varchar(32) NOT NULL,
  `FechaEnviado` varchar(100) NOT NULL,
  `IdUsuario` int NOT NULL,
  `IdGrupo` int NOT NULL,
  `Activo` bit(1) NOT NULL DEFAULT b'1',
  PRIMARY KEY (`IdArchivoCompartido`),
  KEY `fk_IdUsuarioArchivoCompartido_INDEX` (`IdUsuario`),
  KEY `fk_IdGrupoArchivoCompartido_INDEX` (`IdGrupo`),
  CONSTRAINT `fk_IdGrupoArchivoCompartido` FOREIGN KEY (`IdGrupo`) REFERENCES `tb_grupos` (`IdGrupo`),
  CONSTRAINT `fk_IdUsuarioArchivoCompartido` FOREIGN KEY (`IdUsuario`) REFERENCES `tb_usuarios` (`IdUsuario`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_archivoscompartidosgrupos`
--

LOCK TABLES `tb_archivoscompartidosgrupos` WRITE;
/*!40000 ALTER TABLE `tb_archivoscompartidosgrupos` DISABLE KEYS */;
/*!40000 ALTER TABLE `tb_archivoscompartidosgrupos` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_archivossubidostareas`
--

DROP TABLE IF EXISTS `tb_archivossubidostareas`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_archivossubidostareas` (
  `IdArchivoSubido` int NOT NULL AUTO_INCREMENT,
  `NombreArchivo` varchar(100) NOT NULL,
  `Archivo` longblob NOT NULL,
  `Extension` varchar(32) NOT NULL,
  `FechaEnviado` varchar(100) NOT NULL,
  `IdUsuario` int NOT NULL,
  `IdTarea` int NOT NULL,
  `Activo` bit(1) NOT NULL DEFAULT b'1',
  PRIMARY KEY (`IdArchivoSubido`),
  KEY `fk_IdUsuarioArchivoSubido_INDEX` (`IdUsuario`),
  KEY `fk_IdTareaArchivoSubido_INDEX` (`IdTarea`),
  CONSTRAINT `fk_IdTareaArchivoSubido` FOREIGN KEY (`IdTarea`) REFERENCES `tb_tareas` (`IdTarea`),
  CONSTRAINT `fk_IdUsuarioArchivoSubido` FOREIGN KEY (`IdUsuario`) REFERENCES `tb_usuarios` (`IdUsuario`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_archivossubidostareas`
--

LOCK TABLES `tb_archivossubidostareas` WRITE;
/*!40000 ALTER TABLE `tb_archivossubidostareas` DISABLE KEYS */;
/*!40000 ALTER TABLE `tb_archivossubidostareas` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_avisos`
--

DROP TABLE IF EXISTS `tb_avisos`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_avisos` (
  `IdAviso` int NOT NULL AUTO_INCREMENT,
  `Aviso` varchar(256) NOT NULL,
  `FechaEnvio` varchar(100) NOT NULL,
  `IdUsuario` int NOT NULL,
  `TipoAviso` enum('Curso','Tarea','Grupo','Chat','Pregunta') NOT NULL,
  PRIMARY KEY (`IdAviso`),
  KEY `fk_IdUsuarioAviso_INDEX` (`IdUsuario`),
  CONSTRAINT `fk_IdUsuarioAviso` FOREIGN KEY (`IdUsuario`) REFERENCES `tb_usuarios` (`IdUsuario`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_avisos`
--

LOCK TABLES `tb_avisos` WRITE;
/*!40000 ALTER TABLE `tb_avisos` DISABLE KEYS */;
/*!40000 ALTER TABLE `tb_avisos` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_chatspersonales`
--

DROP TABLE IF EXISTS `tb_chatspersonales`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_chatspersonales` (
  `IdChat` int NOT NULL AUTO_INCREMENT,
  `FechaCreacion` varchar(100) NOT NULL,
  `IdUsuarioEmisor` int NOT NULL,
  `IdUsuarioReceptor` int NOT NULL,
  `Activo` bit(1) NOT NULL DEFAULT b'1',
  PRIMARY KEY (`IdChat`),
  KEY `fk_IdUsuarioEmisorChatPersonal_INDEX` (`IdUsuarioEmisor`),
  KEY `fk_IdUsuarioReceptorChatPersonal_INDEX` (`IdUsuarioReceptor`),
  CONSTRAINT `fk_IdUsuarioEmisorChatPersonal` FOREIGN KEY (`IdUsuarioEmisor`) REFERENCES `tb_usuarios` (`IdUsuario`),
  CONSTRAINT `fk_IdUsuarioReceptorChatPersonal` FOREIGN KEY (`IdUsuarioReceptor`) REFERENCES `tb_usuarios` (`IdUsuario`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_chatspersonales`
--

LOCK TABLES `tb_chatspersonales` WRITE;
/*!40000 ALTER TABLE `tb_chatspersonales` DISABLE KEYS */;
INSERT INTO `tb_chatspersonales` VALUES (1,'mi√©rcoles 27/04/2022 19:47:53',1,1,_binary '');
/*!40000 ALTER TABLE `tb_chatspersonales` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_cuestionarios`
--

DROP TABLE IF EXISTS `tb_cuestionarios`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_cuestionarios` (
  `IdCurso` int NOT NULL,
  `IdUsuario` int NOT NULL,
  `IdPregunta` int NOT NULL,
  `Respuesta` enum('Casi Nunca','Rara Vez','Alguna Vez','A Menudo','Casi Siempre') NOT NULL,
  KEY `fk_IdPreguntaCuestionario_INDEX` (`IdPregunta`),
  KEY `fk_IdCursoCuestionario_INDEX` (`IdCurso`) /*!80000 INVISIBLE */,
  KEY `fk_IdUsuarioCuestionario_INDEX` (`IdUsuario`),
  CONSTRAINT `fk_IdCursoCuestionario` FOREIGN KEY (`IdCurso`) REFERENCES `tb_cursos` (`IdCurso`),
  CONSTRAINT `fk_IdPreguntaCuestionario` FOREIGN KEY (`IdPregunta`) REFERENCES `tb_preguntascuestionarios` (`IdPregunta`),
  CONSTRAINT `fk_IdUsuarioCuestionario` FOREIGN KEY (`IdUsuario`) REFERENCES `tb_usuarios` (`IdUsuario`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_cuestionarios`
--

LOCK TABLES `tb_cuestionarios` WRITE;
/*!40000 ALTER TABLE `tb_cuestionarios` DISABLE KEYS */;
/*!40000 ALTER TABLE `tb_cuestionarios` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_cursos`
--

DROP TABLE IF EXISTS `tb_cursos`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_cursos` (
  `IdCurso` int NOT NULL AUTO_INCREMENT,
  `Nombre` varchar(256) NOT NULL,
  `Descripcion` text NOT NULL,
  `FechaCreacion` varchar(100) NOT NULL,
  `Puntuacion` double DEFAULT NULL,
  `Imagen` mediumblob,
  `IdProfesor` int NOT NULL,
  `Activo` bit(1) NOT NULL DEFAULT b'1',
  `Finalizado` bit(1) NOT NULL DEFAULT b'0',
  PRIMARY KEY (`IdCurso`),
  KEY `fk_IdProfesorCurso_INDEX` (`IdProfesor`),
  CONSTRAINT `fk_IdProfesorCurso` FOREIGN KEY (`IdProfesor`) REFERENCES `tb_usuarios` (`IdUsuario`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_cursos`
--

LOCK TABLES `tb_cursos` WRITE;
/*!40000 ALTER TABLE `tb_cursos` DISABLE KEYS */;
/*!40000 ALTER TABLE `tb_cursos` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_cursosusuarios`
--

DROP TABLE IF EXISTS `tb_cursosusuarios`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_cursosusuarios` (
  `IdCurso` int NOT NULL AUTO_INCREMENT,
  `IdUsuario` int NOT NULL,
  `Estatus` enum('Actual','Finalizado','Recomendado','Nuevo','Sin Relacion','Suspendido') NOT NULL,
  `FechaIngreso` varchar(100) NOT NULL,
  `Calificacion` double DEFAULT NULL,
  PRIMARY KEY (`IdCurso`,`IdUsuario`),
  KEY `IdCursoUsuario_INDEX` (`IdUsuario`) /*!80000 INVISIBLE */,
  KEY `IdUsuarioCurso_INDEX` (`IdCurso`) /*!80000 INVISIBLE */,
  CONSTRAINT `IdCursoUsuario` FOREIGN KEY (`IdUsuario`) REFERENCES `tb_usuarios` (`IdUsuario`),
  CONSTRAINT `IdUsuarioCurso` FOREIGN KEY (`IdCurso`) REFERENCES `tb_cursos` (`IdCurso`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_cursosusuarios`
--

LOCK TABLES `tb_cursosusuarios` WRITE;
/*!40000 ALTER TABLE `tb_cursosusuarios` DISABLE KEYS */;
/*!40000 ALTER TABLE `tb_cursosusuarios` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_desempenousuariocurso`
--

DROP TABLE IF EXISTS `tb_desempenousuariocurso`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_desempenousuariocurso` (
  `IdDesempenoCurso` int NOT NULL AUTO_INCREMENT,
  `TareaCalificada` varchar(150) DEFAULT NULL,
  `Calificacion` double DEFAULT NULL,
  `PromedioCurso` double DEFAULT NULL,
  `PromedioGeneral` double DEFAULT NULL,
  `PrediccionPromedio` double DEFAULT NULL,
  `RumboEstatusPromedio` enum('A Aprobar','A Reprobar','Excelente','Bueno','Regular','Malo') DEFAULT NULL,
  `Puntualidad` double DEFAULT NULL,
  `PromedioPuntualidad` double DEFAULT NULL,
  `PrediccionPuntualidad` double DEFAULT NULL,
  `RumboEstatusPuntualidad` enum('P√©simo','Regular','Bueno','Excelente') DEFAULT NULL,
  `Rezago` bit(1) DEFAULT NULL,
  `FechaRegistro` varchar(100) NOT NULL,
  `IdUsuario` int NOT NULL,
  `IdCurso` int NOT NULL,
  PRIMARY KEY (`IdDesempenoCurso`),
  KEY `fk_IdCursoDesempenoUsuarioCurso_idx` (`IdCurso`),
  KEY `fk_IdUsuarioDesempenoUsuarioCurso_idx` (`IdUsuario`),
  CONSTRAINT `fk_IdCursoDesempenoUsuarioCurso` FOREIGN KEY (`IdCurso`) REFERENCES `tb_cursos` (`IdCurso`),
  CONSTRAINT `fk_IdUsuarioDesempenoUsuarioCurso` FOREIGN KEY (`IdUsuario`) REFERENCES `tb_usuarios` (`IdUsuario`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_desempenousuariocurso`
--

LOCK TABLES `tb_desempenousuariocurso` WRITE;
/*!40000 ALTER TABLE `tb_desempenousuariocurso` DISABLE KEYS */;
/*!40000 ALTER TABLE `tb_desempenousuariocurso` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_grupos`
--

DROP TABLE IF EXISTS `tb_grupos`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_grupos` (
  `IdGrupo` int NOT NULL AUTO_INCREMENT,
  `Nombre` varchar(80) NOT NULL,
  `Descripcion` text,
  `FechaCreacion` varchar(100) NOT NULL,
  `IdCurso` int NOT NULL,
  `Imagen` mediumblob,
  `Activo` bit(1) NOT NULL DEFAULT b'1',
  PRIMARY KEY (`IdGrupo`),
  KEY `fk_tb_grupos_tb_cursos1_idx` (`IdCurso`),
  CONSTRAINT `fk_tb_grupos_tb_cursos1` FOREIGN KEY (`IdCurso`) REFERENCES `tb_cursos` (`IdCurso`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_grupos`
--

LOCK TABLES `tb_grupos` WRITE;
/*!40000 ALTER TABLE `tb_grupos` DISABLE KEYS */;
/*!40000 ALTER TABLE `tb_grupos` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_localidades`
--

DROP TABLE IF EXISTS `tb_localidades`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_localidades` (
  `IdLocalidad` int NOT NULL AUTO_INCREMENT,
  `Estado` varchar(100) NOT NULL DEFAULT '',
  `Localidad` varchar(200) NOT NULL DEFAULT '',
  PRIMARY KEY (`IdLocalidad`)
) ENGINE=InnoDB AUTO_INCREMENT=2466 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_localidades`
--

LOCK TABLES `tb_localidades` WRITE;
/*!40000 ALTER TABLE `tb_localidades` DISABLE KEYS */;
INSERT INTO `tb_localidades` VALUES (1,'AGUASCALIENTES','AGUASCALIENTES'),(2,'AGUASCALIENTES','ASIENTOS'),(3,'AGUASCALIENTES','CALVILLO'),(4,'AGUASCALIENTES','COSIO'),(5,'AGUASCALIENTES','EL LLANO'),(6,'AGUASCALIENTES','JESUS MARIA'),(7,'AGUASCALIENTES','PABELLON DE ARTEAGA'),(8,'AGUASCALIENTES','RINCON DE ROMOS'),(9,'AGUASCALIENTES','SAN FRANCISCO DE LOS ROMO'),(10,'AGUASCALIENTES','SAN JOSE DE GRACIA'),(11,'AGUASCALIENTES','TEPEZALA'),(12,'BAJA CALIFORNIA','ENSENADA'),(13,'BAJA CALIFORNIA','MEXICALI'),(14,'BAJA CALIFORNIA','PLAYAS DE ROSARITO'),(15,'BAJA CALIFORNIA','TECATE'),(16,'BAJA CALIFORNIA','TIJUANA'),(17,'BAJA CALIFORNIA SUR','COMONDU'),(18,'BAJA CALIFORNIA SUR','LA PAZ'),(19,'BAJA CALIFORNIA SUR','LORETO'),(20,'BAJA CALIFORNIA SUR','LOS CABOS'),(21,'BAJA CALIFORNIA SUR','MULEGE'),(22,'CAMPECHE','CALAKMUL'),(23,'CAMPECHE','CALKINI'),(24,'CAMPECHE','CAMPECHE'),(25,'CAMPECHE','CANDELARIA'),(26,'CAMPECHE','CARMEN'),(27,'CAMPECHE','CHAMPOTON'),(28,'CAMPECHE','ESCARCEGA'),(29,'CAMPECHE','HECELCHAKAN'),(30,'CAMPECHE','HOPELCHEN'),(31,'CAMPECHE','PALIZADA'),(32,'CAMPECHE','TENABO'),(33,'COAHUILA','ABASOLO'),(34,'COAHUILA','ACUNA'),(35,'COAHUILA','ALLENDE'),(36,'COAHUILA','ARTEAGA'),(37,'COAHUILA','CANDELA'),(38,'COAHUILA','CASTANOS'),(39,'COAHUILA','CUATRO CIENEGAS'),(40,'COAHUILA','ESCOBEDO'),(41,'COAHUILA','FRANCISCO I. MADERO'),(42,'COAHUILA','FRONTERA'),(43,'COAHUILA','GENERAL CEPEDA'),(44,'COAHUILA','GUERRERO'),(45,'COAHUILA','HIDALGO'),(46,'COAHUILA','JIMENEZ'),(47,'COAHUILA','JUAREZ'),(48,'COAHUILA','LAMADRID'),(49,'COAHUILA','MATAMOROS'),(50,'COAHUILA','MONCLOVA'),(51,'COAHUILA','MORELOS'),(52,'COAHUILA','MUZQUIZ'),(53,'COAHUILA','NADADORES'),(54,'COAHUILA','NAVA'),(55,'COAHUILA','OCAMPO'),(56,'COAHUILA','PARRAS'),(57,'COAHUILA','PIEDRAS NEGRAS'),(58,'COAHUILA','PROGRESO'),(59,'COAHUILA','RAMOS ARIZPE'),(60,'COAHUILA','SABINAS'),(61,'COAHUILA','SACRAMENTO'),(62,'COAHUILA','SALTILLO'),(63,'COAHUILA','SAN BUENAVENTURA'),(64,'COAHUILA','SAN JUAN DE SABINAS'),(65,'COAHUILA','SAN PEDRO'),(66,'COAHUILA','SIERRA MOJADA'),(67,'COAHUILA','TORREON'),(68,'COAHUILA','VIESCA'),(69,'COAHUILA','VILLA UNION'),(70,'COAHUILA','ZARAGOZA'),(71,'COLIMA','ARMERIA'),(72,'COLIMA','COLIMA'),(73,'COLIMA','COMALA'),(74,'COLIMA','COQUIMATLAN'),(75,'COLIMA','CUAUHTEMOC'),(76,'COLIMA','IXTLAHUACAN'),(77,'COLIMA','MANZANILLO'),(78,'COLIMA','MINATITLAN'),(79,'COLIMA','TECOMAN'),(80,'COLIMA','VILLA DE ALVAREZ'),(81,'CHIAPAS','ACACOYAGUA'),(82,'CHIAPAS','ACALA'),(83,'CHIAPAS','ACAPETAHUA'),(84,'CHIAPAS','ALDAMA'),(85,'CHIAPAS','ALTAMIRANO'),(86,'CHIAPAS','AMATENANGO DE LA FRONTERA'),(87,'CHIAPAS','AMATENANGO DEL VALLE'),(88,'CHIAPAS','AMATAN'),(89,'CHIAPAS','ANGEL ALBINO CORZO'),(90,'CHIAPAS','ARRIAGA'),(91,'CHIAPAS','BEJUCAL DE OCAMPO'),(92,'CHIAPAS','BELLA VISTA'),(93,'CHIAPAS','BENEMERITO DE LAS AMERICAS'),(94,'CHIAPAS','BERRIOZABAL'),(95,'CHIAPAS','BOCHIL'),(96,'CHIAPAS','CACAHOATAN'),(97,'CHIAPAS','CAPITAN LUIS ANGEL VIDAL'),(98,'CHIAPAS','CATAZAJA'),(99,'CHIAPAS','CHALCHIHUITAN'),(100,'CHIAPAS','CHAMULA'),(101,'CHIAPAS','CHANAL'),(102,'CHIAPAS','CHAPULTENANGO'),(103,'CHIAPAS','CHENALHO'),(104,'CHIAPAS','CHIAPA DE CORZO'),(105,'CHIAPAS','CHIAPILLA'),(106,'CHIAPAS','CHICOASEN'),(107,'CHIAPAS','CHICOMUSELO'),(108,'CHIAPAS','CHILON'),(109,'CHIAPAS','CINTALAPA'),(110,'CHIAPAS','COAPILLA'),(111,'CHIAPAS','COMITAN DE DOMINGUEZ'),(112,'CHIAPAS','COPAINALA'),(113,'CHIAPAS','EL BOSQUE'),(114,'CHIAPAS','EL PARRAL'),(115,'CHIAPAS','EL PORVENIR'),(116,'CHIAPAS','EMILIANO ZAPATA'),(117,'CHIAPAS','ESCUINTLA'),(118,'CHIAPAS','FRANCISCO LEON'),(119,'CHIAPAS','FRONTERA COMALAPA'),(120,'CHIAPAS','FRONTERA HIDALGO'),(121,'CHIAPAS','HUEHUETAN'),(122,'CHIAPAS','HUITIUPAN'),(123,'CHIAPAS','HUIXTLA'),(124,'CHIAPAS','HUIXTAN'),(125,'CHIAPAS','IXHUATAN'),(126,'CHIAPAS','IXTACOMITAN'),(127,'CHIAPAS','IXTAPA'),(128,'CHIAPAS','IXTAPANGAJOYA'),(129,'CHIAPAS','JIQUIPILAS'),(130,'CHIAPAS','JITOTOL'),(131,'CHIAPAS','JUAREZ'),(132,'CHIAPAS','LA CONCORDIA'),(133,'CHIAPAS','LA GRANDEZA'),(134,'CHIAPAS','LA INDEPENDENCIA'),(135,'CHIAPAS','LA LIBERTAD'),(136,'CHIAPAS','LA TRINITARIA'),(137,'CHIAPAS','LARRAINZAR'),(138,'CHIAPAS','LAS MARGARITAS'),(139,'CHIAPAS','LAS ROSAS'),(140,'CHIAPAS','MAPASTEPEC'),(141,'CHIAPAS','MARAVILLA TENEJAPA'),(142,'CHIAPAS','MARQUES DE COMILLAS'),(143,'CHIAPAS','MAZAPA DE MADERO'),(144,'CHIAPAS','MAZATAN'),(145,'CHIAPAS','METAPA'),(146,'CHIAPAS','MEZCALAPA'),(147,'CHIAPAS','MITONTIC'),(148,'CHIAPAS','MONTECRISTO DE GUERRERO'),(149,'CHIAPAS','MOTOZINTLA'),(150,'CHIAPAS','NICOLAS RUIZ'),(151,'CHIAPAS','OCOSINGO'),(152,'CHIAPAS','OCOTEPEC'),(153,'CHIAPAS','OCOZOCOAUTLA DE ESPINOSA'),(154,'CHIAPAS','OSTUACAN'),(155,'CHIAPAS','OSUMACINTA'),(156,'CHIAPAS','OXCHUC'),(157,'CHIAPAS','PALENQUE'),(158,'CHIAPAS','PANTELHO'),(159,'CHIAPAS','PANTEPEC'),(160,'CHIAPAS','PICHUCALCO'),(161,'CHIAPAS','PIJIJIAPAN'),(162,'CHIAPAS','PUEBLO NUEVO SOLISTAHUACAN'),(163,'CHIAPAS','RAYON'),(164,'CHIAPAS','REFORMA'),(165,'CHIAPAS','RINCON CHAMULA SAN PEDRO'),(166,'CHIAPAS','SABANILLA'),(167,'CHIAPAS','SALTO DE AGUA'),(168,'CHIAPAS','SAN ANDRES DURAZNAL'),(169,'CHIAPAS','SAN CRISTOBAL DE LAS CASAS'),(170,'CHIAPAS','SAN FERNANDO'),(171,'CHIAPAS','SAN JUAN CANCUC'),(172,'CHIAPAS','SAN LUCAS'),(173,'CHIAPAS','SANTIAGO EL PINAR'),(174,'CHIAPAS','SILTEPEC'),(175,'CHIAPAS','SIMOJOVEL'),(176,'CHIAPAS','SITALA'),(177,'CHIAPAS','SOCOLTENANGO'),(178,'CHIAPAS','SOLOSUCHIAPA'),(179,'CHIAPAS','SOYALO'),(180,'CHIAPAS','SUCHIAPA'),(181,'CHIAPAS','SUCHIATE'),(182,'CHIAPAS','SUNUAPA'),(183,'CHIAPAS','TAPACHULA'),(184,'CHIAPAS','TAPALAPA'),(185,'CHIAPAS','TAPILULA'),(186,'CHIAPAS','TECPATAN'),(187,'CHIAPAS','TENEJAPA'),(188,'CHIAPAS','TEOPISCA'),(189,'CHIAPAS','TILA'),(190,'CHIAPAS','TONALA'),(191,'CHIAPAS','TOTOLAPA'),(192,'CHIAPAS','TUMBALA'),(193,'CHIAPAS','TUXTLA CHICO'),(194,'CHIAPAS','TUXTLA GUTIERREZ'),(195,'CHIAPAS','TUZANTAN'),(196,'CHIAPAS','TZIMOL'),(197,'CHIAPAS','UNION JUAREZ'),(198,'CHIAPAS','VENUSTIANO CARRANZA'),(199,'CHIAPAS','VILLA COMALTITLAN'),(200,'CHIAPAS','VILLA CORZO'),(201,'CHIAPAS','VILLAFLORES'),(202,'CHIAPAS','YAJALON'),(203,'CHIAPAS','ZINACANTAN'),(204,'CHIHUAHUA','AHUMADA'),(205,'CHIHUAHUA','ALDAMA'),(206,'CHIHUAHUA','ALLENDE'),(207,'CHIHUAHUA','AQUILES SERDAN'),(208,'CHIHUAHUA','ASCENSION'),(209,'CHIHUAHUA','BACHINIVA'),(210,'CHIHUAHUA','BALLEZA'),(211,'CHIHUAHUA','BATOPILAS DE MANUEL GOMEZ MORIN'),(212,'CHIHUAHUA','BOCOYNA'),(213,'CHIHUAHUA','BUENAVENTURA'),(214,'CHIHUAHUA','CAMARGO'),(215,'CHIHUAHUA','CARICHI'),(216,'CHIHUAHUA','CASAS GRANDES'),(217,'CHIHUAHUA','CHIHUAHUA'),(218,'CHIHUAHUA','CHINIPAS'),(219,'CHIHUAHUA','CORONADO'),(220,'CHIHUAHUA','COYAME DEL SOTOL'),(221,'CHIHUAHUA','CUAUHTEMOC'),(222,'CHIHUAHUA','CUSIHUIRIACHI'),(223,'CHIHUAHUA','DELICIAS'),(224,'CHIHUAHUA','DR. BELISARIO DOMINGUEZ'),(225,'CHIHUAHUA','EL TULE'),(226,'CHIHUAHUA','GALEANA'),(227,'CHIHUAHUA','GRAN MORELOS'),(228,'CHIHUAHUA','GUACHOCHI'),(229,'CHIHUAHUA','GUADALUPE Y CALVO'),(230,'CHIHUAHUA','GUADALUPE'),(231,'CHIHUAHUA','GUAZAPARES'),(232,'CHIHUAHUA','GUERRERO'),(233,'CHIHUAHUA','GOMEZ FARIAS'),(234,'CHIHUAHUA','HIDALGO DEL PARRAL'),(235,'CHIHUAHUA','HUEJOTITAN'),(236,'CHIHUAHUA','IGNACIO ZARAGOZA'),(237,'CHIHUAHUA','JANOS'),(238,'CHIHUAHUA','JIMENEZ'),(239,'CHIHUAHUA','JULIMES'),(240,'CHIHUAHUA','JUAREZ'),(241,'CHIHUAHUA','LA CRUZ'),(242,'CHIHUAHUA','LOPEZ'),(243,'CHIHUAHUA','MADERA'),(244,'CHIHUAHUA','MAGUARICHI'),(245,'CHIHUAHUA','MANUEL BENAVIDES'),(246,'CHIHUAHUA','MATACHI'),(247,'CHIHUAHUA','MATAMOROS'),(248,'CHIHUAHUA','MEOQUI'),(249,'CHIHUAHUA','MORELOS'),(250,'CHIHUAHUA','MORIS'),(251,'CHIHUAHUA','NAMIQUIPA'),(252,'CHIHUAHUA','NONOAVA'),(253,'CHIHUAHUA','NUEVO CASAS GRANDES'),(254,'CHIHUAHUA','OCAMPO'),(255,'CHIHUAHUA','OJINAGA'),(256,'CHIHUAHUA','PRAXEDIS G. GUERRERO'),(257,'CHIHUAHUA','RIVA PALACIO'),(258,'CHIHUAHUA','ROSALES'),(259,'CHIHUAHUA','ROSARIO'),(260,'CHIHUAHUA','SAN FRANCISCO DE BORJA'),(261,'CHIHUAHUA','SAN FRANCISCO DE CONCHOS'),(262,'CHIHUAHUA','SAN FRANCISCO DEL ORO'),(263,'CHIHUAHUA','SANTA BARBARA'),(264,'CHIHUAHUA','SANTA ISABEL'),(265,'CHIHUAHUA','SATEVO'),(266,'CHIHUAHUA','SAUCILLO'),(267,'CHIHUAHUA','TEMOSACHIC'),(268,'CHIHUAHUA','URIQUE'),(269,'CHIHUAHUA','URUACHI'),(270,'CHIHUAHUA','VALLE DE ZARAGOZA'),(271,'CIUDAD DE MEXICO','ALVARO OBREGON'),(272,'CIUDAD DE MEXICO','AZCAPOTZALCO'),(273,'CIUDAD DE MEXICO','BENITO JUAREZ'),(274,'CIUDAD DE MEXICO','COYOACAN'),(275,'CIUDAD DE MEXICO','CUAJIMALPA DE MORELOS'),(276,'CIUDAD DE MEXICO','CUAUHTEMOC'),(277,'CIUDAD DE MEXICO','GUSTAVO A. MADERO'),(278,'CIUDAD DE MEXICO','IZTACALCO'),(279,'CIUDAD DE MEXICO','IZTAPALAPA'),(280,'CIUDAD DE MEXICO','LA MAGDALENA CONTRERAS'),(281,'CIUDAD DE MEXICO','MIGUEL HIDALGO'),(282,'CIUDAD DE MEXICO','MILPA ALTA'),(283,'CIUDAD DE MEXICO','TLALPAN'),(284,'CIUDAD DE MEXICO','TLAHUAC'),(285,'CIUDAD DE MEXICO','VENUSTIANO CARRANZA'),(286,'CIUDAD DE MEXICO','XOCHIMILCO'),(287,'DURANGO','CANATLAN'),(288,'DURANGO','CANELAS'),(289,'DURANGO','CONETO DE COMONFORT'),(290,'DURANGO','CUENCAME'),(291,'DURANGO','DURANGO'),(292,'DURANGO','EL ORO'),(293,'DURANGO','GENERAL SIMON BOLIVAR'),(294,'DURANGO','GOMEZ PALACIO'),(295,'DURANGO','GUADALUPE VICTORIA'),(296,'DURANGO','GUANACEVI'),(297,'DURANGO','HIDALGO'),(298,'DURANGO','INDE'),(299,'DURANGO','LERDO'),(300,'DURANGO','MAPIMI'),(301,'DURANGO','MEZQUITAL'),(302,'DURANGO','NAZAS'),(303,'DURANGO','NOMBRE DE DIOS'),(304,'DURANGO','NUEVO IDEAL'),(305,'DURANGO','OCAMPO'),(306,'DURANGO','OTAEZ'),(307,'DURANGO','PANUCO DE CORONADO'),(308,'DURANGO','PENON BLANCO'),(309,'DURANGO','POANAS'),(310,'DURANGO','PUEBLO NUEVO'),(311,'DURANGO','RODEO'),(312,'DURANGO','SAN BERNARDO'),(313,'DURANGO','SAN DIMAS'),(314,'DURANGO','SAN JUAN DE GUADALUPE'),(315,'DURANGO','SAN JUAN DEL RIO'),(316,'DURANGO','SAN LUIS DEL CORDERO'),(317,'DURANGO','SAN PEDRO DEL GALLO'),(318,'DURANGO','SANTA CLARA'),(319,'DURANGO','SANTIAGO PAPASQUIARO'),(320,'DURANGO','SUCHIL'),(321,'DURANGO','TAMAZULA'),(322,'DURANGO','TEPEHUANES'),(323,'DURANGO','TLAHUALILO'),(324,'DURANGO','TOPIA'),(325,'DURANGO','VICENTE GUERRERO'),(326,'GUANAJUATO','ABASOLO'),(327,'GUANAJUATO','ACAMBARO'),(328,'GUANAJUATO','APASEO EL ALTO'),(329,'GUANAJUATO','APASEO EL GRANDE'),(330,'GUANAJUATO','ATARJEA'),(331,'GUANAJUATO','CELAYA'),(332,'GUANAJUATO','COMONFORT'),(333,'GUANAJUATO','CORONEO'),(334,'GUANAJUATO','CORTAZAR'),(335,'GUANAJUATO','CUERAMARO'),(336,'GUANAJUATO','DOCTOR MORA'),(337,'GUANAJUATO','DOLORES HIDALGO CUNA DE LA INDEPENDENCIA NACIONAL'),(338,'GUANAJUATO','GUANAJUATO'),(339,'GUANAJUATO','HUANIMARO'),(340,'GUANAJUATO','IRAPUATO'),(341,'GUANAJUATO','JARAL DEL PROGRESO'),(342,'GUANAJUATO','JERECUARO'),(343,'GUANAJUATO','LEON'),(344,'GUANAJUATO','MANUEL DOBLADO'),(345,'GUANAJUATO','MOROLEON'),(346,'GUANAJUATO','OCAMPO'),(347,'GUANAJUATO','PENJAMO'),(348,'GUANAJUATO','PUEBLO NUEVO'),(349,'GUANAJUATO','PURISIMA DEL RINCON'),(350,'GUANAJUATO','ROMITA'),(351,'GUANAJUATO','SALAMANCA'),(352,'GUANAJUATO','SALVATIERRA'),(353,'GUANAJUATO','SAN DIEGO DE LA UNION'),(354,'GUANAJUATO','SAN FELIPE'),(355,'GUANAJUATO','SAN FRANCISCO DEL RINCON'),(356,'GUANAJUATO','SAN JOSE ITURBIDE'),(357,'GUANAJUATO','SAN LUIS DE LA PAZ'),(358,'GUANAJUATO','SAN MIGUEL DE ALLENDE'),(359,'GUANAJUATO','SANTA CATARINA'),(360,'GUANAJUATO','SANTA CRUZ DE JUVENTINO ROSAS'),(361,'GUANAJUATO','SANTIAGO MARAVATIO'),(362,'GUANAJUATO','SILAO DE LA VICTORIA'),(363,'GUANAJUATO','TARANDACUAO'),(364,'GUANAJUATO','TARIMORO'),(365,'GUANAJUATO','TIERRA BLANCA'),(366,'GUANAJUATO','URIANGATO'),(367,'GUANAJUATO','VALLE DE SANTIAGO'),(368,'GUANAJUATO','VICTORIA'),(369,'GUANAJUATO','VILLAGRAN'),(370,'GUANAJUATO','XICHU'),(371,'GUANAJUATO','YURIRIA'),(372,'GUERRERO','ACAPULCO DE JUAREZ'),(373,'GUERRERO','ACATEPEC'),(374,'GUERRERO','AHUACUOTZINGO'),(375,'GUERRERO','AJUCHITLAN DEL PROGRESO'),(376,'GUERRERO','ALCOZAUCA DE GUERRERO'),(377,'GUERRERO','ALPOYECA'),(378,'GUERRERO','APAXTLA'),(379,'GUERRERO','ARCELIA'),(380,'GUERRERO','ATENANGO DEL RIO'),(381,'GUERRERO','ATLAMAJALCINGO DEL MONTE'),(382,'GUERRERO','ATLIXTAC'),(383,'GUERRERO','ATOYAC DE ALVAREZ'),(384,'GUERRERO','AYUTLA DE LOS LIBRES'),(385,'GUERRERO','AZOYU'),(386,'GUERRERO','BENITO JUAREZ'),(387,'GUERRERO','BUENAVISTA DE CUELLAR'),(388,'GUERRERO','CHILAPA DE ALVAREZ'),(389,'GUERRERO','CHILPANCINGO DE LOS BRAVO'),(390,'GUERRERO','COAHUAYUTLA DE JOSE MARIA IZAZAGA'),(391,'GUERRERO','COCHOAPA EL GRANDE'),(392,'GUERRERO','COCULA'),(393,'GUERRERO','COPALA'),(394,'GUERRERO','COPALILLO'),(395,'GUERRERO','COPANATOYAC'),(396,'GUERRERO','COYUCA DE BENITEZ'),(397,'GUERRERO','COYUCA DE CATALAN'),(398,'GUERRERO','CUAJINICUILAPA'),(399,'GUERRERO','CUALAC'),(400,'GUERRERO','CUAUTEPEC'),(401,'GUERRERO','CUETZALA DEL PROGRESO'),(402,'GUERRERO','CUTZAMALA DE PINZON'),(403,'GUERRERO','EDUARDO NERI'),(404,'GUERRERO','FLORENCIO VILLARREAL'),(405,'GUERRERO','GENERAL CANUTO A. NERI'),(406,'GUERRERO','GENERAL HELIODORO CASTILLO'),(407,'GUERRERO','HUAMUXTITLAN'),(408,'GUERRERO','HUITZUCO DE LOS FIGUEROA'),(409,'GUERRERO','IGUALA DE LA INDEPENDENCIA'),(410,'GUERRERO','IGUALAPA'),(411,'GUERRERO','ILIATENCO'),(412,'GUERRERO','IXCATEOPAN DE CUAUHTEMOC'),(413,'GUERRERO','JOSE JOAQUIN DE HERRERA'),(414,'GUERRERO','JUAN R. ESCUDERO'),(415,'GUERRERO','JUCHITAN'),(416,'GUERRERO','LA UNION DE ISIDORO MONTES DE OCA'),(417,'GUERRERO','LEONARDO BRAVO'),(418,'GUERRERO','MALINALTEPEC'),(419,'GUERRERO','MARQUELIA'),(420,'GUERRERO','MARTIR DE CUILAPAN'),(421,'GUERRERO','METLATONOC'),(422,'GUERRERO','MOCHITLAN'),(423,'GUERRERO','OLINALA'),(424,'GUERRERO','OMETEPEC'),(425,'GUERRERO','PEDRO ASCENCIO ALQUISIRAS'),(426,'GUERRERO','PETATLAN'),(427,'GUERRERO','PILCAYA'),(428,'GUERRERO','PUNGARABATO'),(429,'GUERRERO','QUECHULTENANGO'),(430,'GUERRERO','SAN LUIS ACATLAN'),(431,'GUERRERO','SAN MARCOS'),(432,'GUERRERO','SAN MIGUEL TOTOLAPAN'),(433,'GUERRERO','TAXCO DE ALARCON'),(434,'GUERRERO','TECOANAPA'),(435,'GUERRERO','TECPAN DE GALEANA'),(436,'GUERRERO','TELOLOAPAN'),(437,'GUERRERO','TEPECOACUILCO DE TRUJANO'),(438,'GUERRERO','TETIPAC'),(439,'GUERRERO','TIXTLA DE GUERRERO'),(440,'GUERRERO','TLACOACHISTLAHUACA'),(441,'GUERRERO','TLACOAPA'),(442,'GUERRERO','TLALCHAPA'),(443,'GUERRERO','TLALIXTAQUILLA DE MALDONADO'),(444,'GUERRERO','TLAPA DE COMONFORT'),(445,'GUERRERO','TLAPEHUALA'),(446,'GUERRERO','XALPATLAHUAC'),(447,'GUERRERO','XOCHIHUEHUETLAN'),(448,'GUERRERO','XOCHISTLAHUACA'),(449,'GUERRERO','ZAPOTITLAN TABLAS'),(450,'GUERRERO','ZIHUATANEJO DE AZUETA'),(451,'GUERRERO','ZIRANDARO'),(452,'GUERRERO','ZITLALA'),(453,'HIDALGO','ACATLAN'),(454,'HIDALGO','ACAXOCHITLAN'),(455,'HIDALGO','ACTOPAN'),(456,'HIDALGO','AGUA BLANCA DE ITURBIDE'),(457,'HIDALGO','AJACUBA'),(458,'HIDALGO','ALFAJAYUCAN'),(459,'HIDALGO','ALMOLOYA'),(460,'HIDALGO','APAN'),(461,'HIDALGO','ATITALAQUIA'),(462,'HIDALGO','ATLAPEXCO'),(463,'HIDALGO','ATOTONILCO DE TULA'),(464,'HIDALGO','ATOTONILCO EL GRANDE'),(465,'HIDALGO','CALNALI'),(466,'HIDALGO','CARDONAL'),(467,'HIDALGO','CHAPANTONGO'),(468,'HIDALGO','CHAPULHUACAN'),(469,'HIDALGO','CHILCUAUTLA'),(470,'HIDALGO','CUAUTEPEC DE HINOJOSA'),(471,'HIDALGO','EL ARENAL'),(472,'HIDALGO','ELOXOCHITLAN'),(473,'HIDALGO','EMILIANO ZAPATA'),(474,'HIDALGO','EPAZOYUCAN'),(475,'HIDALGO','FRANCISCO I. MADERO'),(476,'HIDALGO','HUASCA DE OCAMPO'),(477,'HIDALGO','HUAUTLA'),(478,'HIDALGO','HUAZALINGO'),(479,'HIDALGO','HUEHUETLA'),(480,'HIDALGO','HUEJUTLA DE REYES'),(481,'HIDALGO','HUICHAPAN'),(482,'HIDALGO','IXMIQUILPAN'),(483,'HIDALGO','JACALA DE LEDEZMA'),(484,'HIDALGO','JALTOCAN'),(485,'HIDALGO','JUAREZ HIDALGO'),(486,'HIDALGO','LA MISION'),(487,'HIDALGO','LOLOTLA'),(488,'HIDALGO','METEPEC'),(489,'HIDALGO','METZTITLAN'),(490,'HIDALGO','MINERAL DE LA REFORMA'),(491,'HIDALGO','MINERAL DEL CHICO'),(492,'HIDALGO','MINERAL DEL MONTE'),(493,'HIDALGO','MIXQUIAHUALA DE JUAREZ'),(494,'HIDALGO','MOLANGO DE ESCAMILLA'),(495,'HIDALGO','NICOLAS FLORES'),(496,'HIDALGO','NOPALA DE VILLAGRAN'),(497,'HIDALGO','OMITLAN DE JUAREZ'),(498,'HIDALGO','PACHUCA DE SOTO'),(499,'HIDALGO','PACULA'),(500,'HIDALGO','PISAFLORES'),(501,'HIDALGO','PROGRESO DE OBREGON'),(502,'HIDALGO','SAN AGUSTIN METZQUITITLAN'),(503,'HIDALGO','SAN AGUSTIN TLAXIACA'),(504,'HIDALGO','SAN BARTOLO TUTOTEPEC'),(505,'HIDALGO','SAN FELIPE ORIZATLAN'),(506,'HIDALGO','SAN SALVADOR'),(507,'HIDALGO','SANTIAGO TULANTEPEC DE LUGO GUERRERO'),(508,'HIDALGO','SANTIAGO DE ANAYA'),(509,'HIDALGO','SINGUILUCAN'),(510,'HIDALGO','TASQUILLO'),(511,'HIDALGO','TECOZAUTLA'),(512,'HIDALGO','TENANGO DE DORIA'),(513,'HIDALGO','TEPEAPULCO'),(514,'HIDALGO','TEPEHUACAN DE GUERRERO'),(515,'HIDALGO','TEPEJI DEL RIO DE OCAMPO'),(516,'HIDALGO','TEPETITLAN'),(517,'HIDALGO','TETEPANGO'),(518,'HIDALGO','TEZONTEPEC DE ALDAMA'),(519,'HIDALGO','TIANGUISTENGO'),(520,'HIDALGO','TIZAYUCA'),(521,'HIDALGO','TLAHUELILPAN'),(522,'HIDALGO','TLAHUILTEPA'),(523,'HIDALGO','TLANALAPA'),(524,'HIDALGO','TLANCHINOL'),(525,'HIDALGO','TLAXCOAPAN'),(526,'HIDALGO','TOLCAYUCA'),(527,'HIDALGO','TULA DE ALLENDE'),(528,'HIDALGO','TULANCINGO DE BRAVO'),(529,'HIDALGO','VILLA DE TEZONTEPEC'),(530,'HIDALGO','XOCHIATIPAN'),(531,'HIDALGO','XOCHICOATLAN'),(532,'HIDALGO','YAHUALICA'),(533,'HIDALGO','ZACUALTIPAN DE ANGELES'),(534,'HIDALGO','ZAPOTLAN DE JUAREZ'),(535,'HIDALGO','ZEMPOALA'),(536,'HIDALGO','ZIMAPAN'),(537,'JALISCO','ACATIC'),(538,'JALISCO','ACATLAN DE JUAREZ'),(539,'JALISCO','AHUALULCO DE MERCADO'),(540,'JALISCO','AMACUECA'),(541,'JALISCO','AMATITAN'),(542,'JALISCO','AMECA'),(543,'JALISCO','ARANDAS'),(544,'JALISCO','ATEMAJAC DE BRIZUELA'),(545,'JALISCO','ATENGO'),(546,'JALISCO','ATENGUILLO'),(547,'JALISCO','ATOTONILCO EL ALTO'),(548,'JALISCO','ATOYAC'),(549,'JALISCO','AUTLAN DE NAVARRO'),(550,'JALISCO','AYOTLAN'),(551,'JALISCO','AYUTLA'),(552,'JALISCO','BOLANOS'),(553,'JALISCO','CABO CORRIENTES'),(554,'JALISCO','CANADAS DE OBREGON'),(555,'JALISCO','CASIMIRO CASTILLO'),(556,'JALISCO','CHAPALA'),(557,'JALISCO','CHIMALTITAN'),(558,'JALISCO','CHIQUILISTLAN'),(559,'JALISCO','CIHUATLAN'),(560,'JALISCO','COCULA'),(561,'JALISCO','COLOTLAN'),(562,'JALISCO','CONCEPCION DE BUENOS AIRES'),(563,'JALISCO','CUAUTITLAN DE GARCIA BARRAGAN'),(564,'JALISCO','CUAUTLA'),(565,'JALISCO','CUQUIO'),(566,'JALISCO','DEGOLLADO'),(567,'JALISCO','EJUTLA'),(568,'JALISCO','EL ARENAL'),(569,'JALISCO','EL GRULLO'),(570,'JALISCO','EL LIMON'),(571,'JALISCO','EL SALTO'),(572,'JALISCO','ENCARNACION DE DIAZ'),(573,'JALISCO','ETZATLAN'),(574,'JALISCO','GOMEZ FARIAS'),(575,'JALISCO','GUACHINANGO'),(576,'JALISCO','GUADALAJARA'),(577,'JALISCO','HOSTOTIPAQUILLO'),(578,'JALISCO','HUEJUCAR'),(579,'JALISCO','HUEJUQUILLA EL ALTO'),(580,'JALISCO','IXTLAHUACAN DE LOS MEMBRILLOS'),(581,'JALISCO','IXTLAHUACAN DEL RIO'),(582,'JALISCO','JALOSTOTITLAN'),(583,'JALISCO','JAMAY'),(584,'JALISCO','JESUS MARIA'),(585,'JALISCO','JILOTLAN DE LOS DOLORES'),(586,'JALISCO','JOCOTEPEC'),(587,'JALISCO','JUANACATLAN'),(588,'JALISCO','JUCHITLAN'),(589,'JALISCO','LA BARCA'),(590,'JALISCO','LA HUERTA'),(591,'JALISCO','LA MANZANILLA DE LA PAZ'),(592,'JALISCO','LAGOS DE MORENO'),(593,'JALISCO','MAGDALENA'),(594,'JALISCO','MASCOTA'),(595,'JALISCO','MAZAMITLA'),(596,'JALISCO','MEXTICACAN'),(597,'JALISCO','MEZQUITIC'),(598,'JALISCO','MIXTLAN'),(599,'JALISCO','OCOTLAN'),(600,'JALISCO','OJUELOS DE JALISCO'),(601,'JALISCO','PIHUAMO'),(602,'JALISCO','PONCITLAN'),(603,'JALISCO','PUERTO VALLARTA'),(604,'JALISCO','QUITUPAN'),(605,'JALISCO','SAN CRISTOBAL DE LA BARRANCA'),(606,'JALISCO','SAN DIEGO DE ALEJANDRIA'),(607,'JALISCO','SAN GABRIEL'),(608,'JALISCO','SAN IGNACIO CERRO GORDO'),(609,'JALISCO','SAN JUAN DE LOS LAGOS'),(610,'JALISCO','SAN JUANITO DE ESCOBEDO'),(611,'JALISCO','SAN JULIAN'),(612,'JALISCO','SAN MARCOS'),(613,'JALISCO','SAN MARTIN HIDALGO'),(614,'JALISCO','SAN MARTIN DE BOLANOS'),(615,'JALISCO','SAN MIGUEL EL ALTO'),(616,'JALISCO','SAN PEDRO TLAQUEPAQUE'),(617,'JALISCO','SAN SEBASTIAN DEL OESTE'),(618,'JALISCO','SANTA MARIA DE LOS ANGELES'),(619,'JALISCO','SANTA MARIA DEL ORO'),(620,'JALISCO','SAYULA'),(621,'JALISCO','TALA'),(622,'JALISCO','TALPA DE ALLENDE'),(623,'JALISCO','TAMAZULA DE GORDIANO'),(624,'JALISCO','TAPALPA'),(625,'JALISCO','TECALITLAN'),(626,'JALISCO','TECHALUTA DE MONTENEGRO'),(627,'JALISCO','TECOLOTLAN'),(628,'JALISCO','TENAMAXTLAN'),(629,'JALISCO','TEOCALTICHE'),(630,'JALISCO','TEOCUITATLAN DE CORONA'),(631,'JALISCO','TEPATITLAN DE MORELOS'),(632,'JALISCO','TEQUILA'),(633,'JALISCO','TEUCHITLAN'),(634,'JALISCO','TIZAPAN EL ALTO'),(635,'JALISCO','TLAJOMULCO DE ZUNIGA'),(636,'JALISCO','TOLIMAN'),(637,'JALISCO','TOMATLAN'),(638,'JALISCO','TONALA'),(639,'JALISCO','TONAYA'),(640,'JALISCO','TONILA'),(641,'JALISCO','TOTATICHE'),(642,'JALISCO','TOTOTLAN'),(643,'JALISCO','TUXCACUESCO'),(644,'JALISCO','TUXCUECA'),(645,'JALISCO','TUXPAN'),(646,'JALISCO','UNION DE SAN ANTONIO'),(647,'JALISCO','UNION DE TULA'),(648,'JALISCO','VALLE DE GUADALUPE'),(649,'JALISCO','VALLE DE JUAREZ'),(650,'JALISCO','VILLA CORONA'),(651,'JALISCO','VILLA GUERRERO'),(652,'JALISCO','VILLA HIDALGO'),(653,'JALISCO','VILLA PURIFICACION'),(654,'JALISCO','YAHUALICA DE GONZALEZ GALLO'),(655,'JALISCO','ZACOALCO DE TORRES'),(656,'JALISCO','ZAPOPAN'),(657,'JALISCO','ZAPOTILTIC'),(658,'JALISCO','ZAPOTITLAN DE VADILLO'),(659,'JALISCO','ZAPOTLAN DEL REY'),(660,'JALISCO','ZAPOTLAN EL GRANDE'),(661,'JALISCO','ZAPOTLANEJO'),(662,'ESTADO DE MEXICO','ACAMBAY DE RUIZ CASTANEDA'),(663,'ESTADO DE MEXICO','ACOLMAN'),(664,'ESTADO DE MEXICO','ACULCO'),(665,'ESTADO DE MEXICO','ALMOLOYA DE ALQUISIRAS'),(666,'ESTADO DE MEXICO','ALMOLOYA DE JUAREZ'),(667,'ESTADO DE MEXICO','ALMOLOYA DEL RIO'),(668,'ESTADO DE MEXICO','AMANALCO'),(669,'ESTADO DE MEXICO','AMATEPEC'),(670,'ESTADO DE MEXICO','AMECAMECA'),(671,'ESTADO DE MEXICO','APAXCO'),(672,'ESTADO DE MEXICO','ATENCO'),(673,'ESTADO DE MEXICO','ATIZAPAN DE ZARAGOZA'),(674,'ESTADO DE MEXICO','ATIZAPAN'),(675,'ESTADO DE MEXICO','ATLACOMULCO'),(676,'ESTADO DE MEXICO','ATLAUTLA'),(677,'ESTADO DE MEXICO','AXAPUSCO'),(678,'ESTADO DE MEXICO','AYAPANGO'),(679,'ESTADO DE MEXICO','CALIMAYA'),(680,'ESTADO DE MEXICO','CAPULHUAC'),(681,'ESTADO DE MEXICO','CHALCO'),(682,'ESTADO DE MEXICO','CHAPA DE MOTA'),(683,'ESTADO DE MEXICO','CHAPULTEPEC'),(684,'ESTADO DE MEXICO','CHIAUTLA'),(685,'ESTADO DE MEXICO','CHICOLOAPAN'),(686,'ESTADO DE MEXICO','CHICONCUAC'),(687,'ESTADO DE MEXICO','CHIMALHUACAN'),(688,'ESTADO DE MEXICO','COACALCO DE BERRIOZABAL'),(689,'ESTADO DE MEXICO','COATEPEC HARINAS'),(690,'ESTADO DE MEXICO','COCOTITLAN'),(691,'ESTADO DE MEXICO','COYOTEPEC'),(692,'ESTADO DE MEXICO','CUAUTITLAN IZCALLI'),(693,'ESTADO DE MEXICO','CUAUTITLAN'),(694,'ESTADO DE MEXICO','DONATO GUERRA'),(695,'ESTADO DE MEXICO','ECATEPEC DE MORELOS'),(696,'ESTADO DE MEXICO','ECATZINGO'),(697,'ESTADO DE MEXICO','EL ORO'),(698,'ESTADO DE MEXICO','HUEHUETOCA'),(699,'ESTADO DE MEXICO','HUEYPOXTLA'),(700,'ESTADO DE MEXICO','HUIXQUILUCAN'),(701,'ESTADO DE MEXICO','ISIDRO FABELA'),(702,'ESTADO DE MEXICO','IXTAPALUCA'),(703,'ESTADO DE MEXICO','IXTAPAN DE LA SAL'),(704,'ESTADO DE MEXICO','IXTAPAN DEL ORO'),(705,'ESTADO DE MEXICO','IXTLAHUACA'),(706,'ESTADO DE MEXICO','JALTENCO'),(707,'ESTADO DE MEXICO','JILOTEPEC'),(708,'ESTADO DE MEXICO','JILOTZINGO'),(709,'ESTADO DE MEXICO','JIQUIPILCO'),(710,'ESTADO DE MEXICO','JOCOTITLAN'),(711,'ESTADO DE MEXICO','JOQUICINGO'),(712,'ESTADO DE MEXICO','JUCHITEPEC'),(713,'ESTADO DE MEXICO','LA PAZ'),(714,'ESTADO DE MEXICO','LERMA'),(715,'ESTADO DE MEXICO','LUVIANOS'),(716,'ESTADO DE MEXICO','MALINALCO'),(717,'ESTADO DE MEXICO','MELCHOR OCAMPO'),(718,'ESTADO DE MEXICO','METEPEC'),(719,'ESTADO DE MEXICO','MEXICALTZINGO'),(720,'ESTADO DE MEXICO','MORELOS'),(721,'ESTADO DE MEXICO','NAUCALPAN DE JUAREZ'),(722,'ESTADO DE MEXICO','NEXTLALPAN'),(723,'ESTADO DE MEXICO','NEZAHUALCOYOTL'),(724,'ESTADO DE MEXICO','NICOLAS ROMERO'),(725,'ESTADO DE MEXICO','NOPALTEPEC'),(726,'ESTADO DE MEXICO','OCOYOACAC'),(727,'ESTADO DE MEXICO','OCUILAN'),(728,'ESTADO DE MEXICO','OTUMBA'),(729,'ESTADO DE MEXICO','OTZOLOAPAN'),(730,'ESTADO DE MEXICO','OTZOLOTEPEC'),(731,'ESTADO DE MEXICO','OZUMBA'),(732,'ESTADO DE MEXICO','PAPALOTLA'),(733,'ESTADO DE MEXICO','POLOTITLAN'),(734,'ESTADO DE MEXICO','RAYON'),(735,'ESTADO DE MEXICO','SAN ANTONIO LA ISLA'),(736,'ESTADO DE MEXICO','SAN FELIPE DEL PROGRESO'),(737,'ESTADO DE MEXICO','SAN JOSE DEL RINCON'),(738,'ESTADO DE MEXICO','SAN MARTIN DE LAS PIRAMIDES'),(739,'ESTADO DE MEXICO','SAN MATEO ATENCO'),(740,'ESTADO DE MEXICO','SAN SIMON DE GUERRERO'),(741,'ESTADO DE MEXICO','SANTO TOMAS'),(742,'ESTADO DE MEXICO','SOYANIQUILPAN DE JUAREZ'),(743,'ESTADO DE MEXICO','SULTEPEC'),(744,'ESTADO DE MEXICO','TECAMAC'),(745,'ESTADO DE MEXICO','TEJUPILCO'),(746,'ESTADO DE MEXICO','TEMAMATLA'),(747,'ESTADO DE MEXICO','TEMASCALAPA'),(748,'ESTADO DE MEXICO','TEMASCALCINGO'),(749,'ESTADO DE MEXICO','TEMASCALTEPEC'),(750,'ESTADO DE MEXICO','TEMOAYA'),(751,'ESTADO DE MEXICO','TENANCINGO'),(752,'ESTADO DE MEXICO','TENANGO DEL AIRE'),(753,'ESTADO DE MEXICO','TENANGO DEL VALLE'),(754,'ESTADO DE MEXICO','TEOLOYUCAN'),(755,'ESTADO DE MEXICO','TEOTIHUACAN'),(756,'ESTADO DE MEXICO','TEPETLAOXTOC'),(757,'ESTADO DE MEXICO','TEPETLIXPA'),(758,'ESTADO DE MEXICO','TEPOTZOTLAN'),(759,'ESTADO DE MEXICO','TEQUIXQUIAC'),(760,'ESTADO DE MEXICO','TEXCALTITLAN'),(761,'ESTADO DE MEXICO','TEXCALYACAC'),(762,'ESTADO DE MEXICO','TEXCOCO'),(763,'ESTADO DE MEXICO','TEZOYUCA'),(764,'ESTADO DE MEXICO','TIANGUISTENCO'),(765,'ESTADO DE MEXICO','TIMILPAN'),(766,'ESTADO DE MEXICO','TLALMANALCO'),(767,'ESTADO DE MEXICO','TLALNEPANTLA DE BAZ'),(768,'ESTADO DE MEXICO','TLATLAYA'),(769,'ESTADO DE MEXICO','TOLUCA'),(770,'ESTADO DE MEXICO','TONANITLA'),(771,'ESTADO DE MEXICO','TONATICO'),(772,'ESTADO DE MEXICO','TULTEPEC'),(773,'ESTADO DE MEXICO','TULTITLAN'),(774,'ESTADO DE MEXICO','VALLE DE BRAVO'),(775,'ESTADO DE MEXICO','VALLE DE CHALCO SOLIDARIDAD'),(776,'ESTADO DE MEXICO','VILLA GUERRERO'),(777,'ESTADO DE MEXICO','VILLA VICTORIA'),(778,'ESTADO DE MEXICO','VILLA DE ALLENDE'),(779,'ESTADO DE MEXICO','VILLA DEL CARBON'),(780,'ESTADO DE MEXICO','XALATLACO'),(781,'ESTADO DE MEXICO','XONACATLAN'),(782,'ESTADO DE MEXICO','ZACAZONAPAN'),(783,'ESTADO DE MEXICO','ZACUALPAN'),(784,'ESTADO DE MEXICO','ZINACANTEPEC'),(785,'ESTADO DE MEXICO','ZUMPAHUACAN'),(786,'ESTADO DE MEXICO','ZUMPANGO'),(787,'MICHOACAN','ACUITZIO'),(788,'MICHOACAN','AGUILILLA'),(789,'MICHOACAN','ALVARO OBREGON'),(790,'MICHOACAN','ANGAMACUTIRO'),(791,'MICHOACAN','ANGANGUEO'),(792,'MICHOACAN','APATZINGAN'),(793,'MICHOACAN','APORO'),(794,'MICHOACAN','AQUILA'),(795,'MICHOACAN','ARIO'),(796,'MICHOACAN','ARTEAGA'),(797,'MICHOACAN','BRISENAS'),(798,'MICHOACAN','BUENAVISTA'),(799,'MICHOACAN','CARACUARO'),(800,'MICHOACAN','CHARAPAN'),(801,'MICHOACAN','CHARO'),(802,'MICHOACAN','CHAVINDA'),(803,'MICHOACAN','CHERAN'),(804,'MICHOACAN','CHILCHOTA'),(805,'MICHOACAN','CHINICUILA'),(806,'MICHOACAN','CHUCANDIRO'),(807,'MICHOACAN','CHURINTZIO'),(808,'MICHOACAN','CHURUMUCO'),(809,'MICHOACAN','COAHUAYANA'),(810,'MICHOACAN','COALCOMAN DE VAZQUEZ PALLARES'),(811,'MICHOACAN','COENEO'),(812,'MICHOACAN','COJUMATLAN DE REGULES'),(813,'MICHOACAN','CONTEPEC'),(814,'MICHOACAN','COPANDARO'),(815,'MICHOACAN','COTIJA'),(816,'MICHOACAN','CUITZEO'),(817,'MICHOACAN','ECUANDUREO'),(818,'MICHOACAN','EPITACIO HUERTA'),(819,'MICHOACAN','ERONGARICUARO'),(820,'MICHOACAN','GABRIEL ZAMORA'),(821,'MICHOACAN','HIDALGO'),(822,'MICHOACAN','HUANDACAREO'),(823,'MICHOACAN','HUANIQUEO'),(824,'MICHOACAN','HUETAMO'),(825,'MICHOACAN','HUIRAMBA'),(826,'MICHOACAN','INDAPARAPEO'),(827,'MICHOACAN','IRIMBO'),(828,'MICHOACAN','IXTLAN'),(829,'MICHOACAN','JACONA'),(830,'MICHOACAN','JIMENEZ'),(831,'MICHOACAN','JIQUILPAN'),(832,'MICHOACAN','JOSE SIXTO VERDUZCO'),(833,'MICHOACAN','JUAREZ'),(834,'MICHOACAN','JUNGAPEO'),(835,'MICHOACAN','LA HUACANA'),(836,'MICHOACAN','LA PIEDAD'),(837,'MICHOACAN','LAGUNILLAS'),(838,'MICHOACAN','LAZARO CARDENAS'),(839,'MICHOACAN','LOS REYES'),(840,'MICHOACAN','MADERO'),(841,'MICHOACAN','MARAVATIO'),(842,'MICHOACAN','MARCOS CASTELLANOS'),(843,'MICHOACAN','MORELIA'),(844,'MICHOACAN','MORELOS'),(845,'MICHOACAN','MUGICA'),(846,'MICHOACAN','NAHUATZEN'),(847,'MICHOACAN','NOCUPETARO'),(848,'MICHOACAN','NUEVO PARANGARICUTIRO'),(849,'MICHOACAN','NUEVO URECHO'),(850,'MICHOACAN','NUMARAN'),(851,'MICHOACAN','OCAMPO'),(852,'MICHOACAN','PAJACUARAN'),(853,'MICHOACAN','PANINDICUARO'),(854,'MICHOACAN','PARACHO'),(855,'MICHOACAN','PARACUARO'),(856,'MICHOACAN','PATZCUARO'),(857,'MICHOACAN','PENJAMILLO'),(858,'MICHOACAN','PERIBAN'),(859,'MICHOACAN','PUREPERO'),(860,'MICHOACAN','PURUANDIRO'),(861,'MICHOACAN','QUERENDARO'),(862,'MICHOACAN','QUIROGA'),(863,'MICHOACAN','SAHUAYO'),(864,'MICHOACAN','SALVADOR ESCALANTE'),(865,'MICHOACAN','SAN LUCAS'),(866,'MICHOACAN','SANTA ANA MAYA'),(867,'MICHOACAN','SENGUIO'),(868,'MICHOACAN','SUSUPUATO'),(869,'MICHOACAN','TACAMBARO'),(870,'MICHOACAN','TANCITARO'),(871,'MICHOACAN','TANGAMANDAPIO'),(872,'MICHOACAN','TANGANCICUARO'),(873,'MICHOACAN','TANHUATO'),(874,'MICHOACAN','TARETAN'),(875,'MICHOACAN','TARIMBARO'),(876,'MICHOACAN','TEPALCATEPEC'),(877,'MICHOACAN','TINGAMBATO'),(878,'MICHOACAN','TINGUINDIN'),(879,'MICHOACAN','TIQUICHEO DE NICOLAS ROMERO'),(880,'MICHOACAN','TLALPUJAHUA'),(881,'MICHOACAN','TLAZAZALCA'),(882,'MICHOACAN','TOCUMBO'),(883,'MICHOACAN','TUMBISCATIO'),(884,'MICHOACAN','TURICATO'),(885,'MICHOACAN','TUXPAN'),(886,'MICHOACAN','TUZANTLA'),(887,'MICHOACAN','TZINTZUNTZAN'),(888,'MICHOACAN','TZITZIO'),(889,'MICHOACAN','URUAPAN'),(890,'MICHOACAN','VENUSTIANO CARRANZA'),(891,'MICHOACAN','VILLAMAR'),(892,'MICHOACAN','VISTA HERMOSA'),(893,'MICHOACAN','YURECUARO'),(894,'MICHOACAN','ZACAPU'),(895,'MICHOACAN','ZAMORA'),(896,'MICHOACAN','ZINAPARO'),(897,'MICHOACAN','ZINAPECUARO'),(898,'MICHOACAN','ZIRACUARETIRO'),(899,'MICHOACAN','ZITACUARO'),(900,'MORELOS','AMACUZAC'),(901,'MORELOS','ATLATLAHUCAN'),(902,'MORELOS','AXOCHIAPAN'),(903,'MORELOS','AYALA'),(904,'MORELOS','COATLAN DEL RIO'),(905,'MORELOS','CUAUTLA'),(906,'MORELOS','CUERNAVACA'),(907,'MORELOS','EMILIANO ZAPATA'),(908,'MORELOS','HUITZILAC'),(909,'MORELOS','JANTETELCO'),(910,'MORELOS','JIUTEPEC'),(911,'MORELOS','JOJUTLA'),(912,'MORELOS','JONACATEPEC DE LEANDRO VALLE'),(913,'MORELOS','MAZATEPEC'),(914,'MORELOS','MIACATLAN'),(915,'MORELOS','OCUITUCO'),(916,'MORELOS','PUENTE DE IXTLA'),(917,'MORELOS','TEMIXCO'),(918,'MORELOS','TEMOAC'),(919,'MORELOS','TEPALCINGO'),(920,'MORELOS','TEPOZTLAN'),(921,'MORELOS','TETECALA'),(922,'MORELOS','TETELA DEL VOLCAN'),(923,'MORELOS','TLALNEPANTLA'),(924,'MORELOS','TLALTIZAPAN DE ZAPATA'),(925,'MORELOS','TLAQUILTENANGO'),(926,'MORELOS','TLAYACAPAN'),(927,'MORELOS','TOTOLAPAN'),(928,'MORELOS','XOCHITEPEC'),(929,'MORELOS','YAUTEPEC'),(930,'MORELOS','YECAPIXTLA'),(931,'MORELOS','ZACATEPEC'),(932,'MORELOS','ZACUALPAN DE AMILPAS'),(933,'NAYARIT','ACAPONETA'),(934,'NAYARIT','AHUACATLAN'),(935,'NAYARIT','AMATLAN DE CANAS'),(936,'NAYARIT','BAHIA DE BANDERAS'),(937,'NAYARIT','COMPOSTELA'),(938,'NAYARIT','DEL NAYAR'),(939,'NAYARIT','HUAJICORI'),(940,'NAYARIT','IXTLAN DEL RIO'),(941,'NAYARIT','JALA'),(942,'NAYARIT','LA YESCA'),(943,'NAYARIT','ROSAMORADA'),(944,'NAYARIT','RUIZ'),(945,'NAYARIT','SAN BLAS'),(946,'NAYARIT','SAN PEDRO LAGUNILLAS'),(947,'NAYARIT','SANTA MARIA DEL ORO'),(948,'NAYARIT','SANTIAGO IXCUINTLA'),(949,'NAYARIT','TECUALA'),(950,'NAYARIT','TEPIC'),(951,'NAYARIT','TUXPAN'),(952,'NAYARIT','XALISCO'),(953,'NUEVO LEON','ABASOLO'),(954,'NUEVO LEON','AGUALEGUAS'),(955,'NUEVO LEON','ALLENDE'),(956,'NUEVO LEON','ANAHUAC'),(957,'NUEVO LEON','APODACA'),(958,'NUEVO LEON','ARAMBERRI'),(959,'NUEVO LEON','BUSTAMANTE'),(960,'NUEVO LEON','CADEREYTA JIMENEZ'),(961,'NUEVO LEON','CERRALVO'),(962,'NUEVO LEON','CHINA'),(963,'NUEVO LEON','CIENEGA DE FLORES'),(964,'NUEVO LEON','DOCTOR ARROYO'),(965,'NUEVO LEON','DOCTOR COSS'),(966,'NUEVO LEON','DOCTOR GONZALEZ'),(967,'NUEVO LEON','EL CARMEN'),(968,'NUEVO LEON','GALEANA'),(969,'NUEVO LEON','GARCIA'),(970,'NUEVO LEON','GENERAL BRAVO'),(971,'NUEVO LEON','GENERAL ESCOBEDO'),(972,'NUEVO LEON','GENERAL TERAN'),(973,'NUEVO LEON','GENERAL TREVINO'),(974,'NUEVO LEON','GENERAL ZARAGOZA'),(975,'NUEVO LEON','GENERAL ZUAZUA'),(976,'NUEVO LEON','GUADALUPE'),(977,'NUEVO LEON','HIDALGO'),(978,'NUEVO LEON','HIGUERAS'),(979,'NUEVO LEON','HUALAHUISES'),(980,'NUEVO LEON','ITURBIDE'),(981,'NUEVO LEON','JUAREZ'),(982,'NUEVO LEON','LAMPAZOS DE NARANJO'),(983,'NUEVO LEON','LINARES'),(984,'NUEVO LEON','LOS ALDAMAS'),(985,'NUEVO LEON','LOS HERRERAS'),(986,'NUEVO LEON','LOS RAMONES'),(987,'NUEVO LEON','MARIN'),(988,'NUEVO LEON','MELCHOR OCAMPO'),(989,'NUEVO LEON','MIER Y NORIEGA'),(990,'NUEVO LEON','MINA'),(991,'NUEVO LEON','MONTEMORELOS'),(992,'NUEVO LEON','MONTERREY'),(993,'NUEVO LEON','PARAS'),(994,'NUEVO LEON','PESQUERIA'),(995,'NUEVO LEON','RAYONES'),(996,'NUEVO LEON','SABINAS HIDALGO'),(997,'NUEVO LEON','SALINAS VICTORIA'),(998,'NUEVO LEON','SAN NICOLAS DE LOS GARZA'),(999,'NUEVO LEON','SAN PEDRO GARZA GARCIA'),(1000,'NUEVO LEON','SANTA CATARINA'),(1001,'NUEVO LEON','SANTIAGO'),(1002,'NUEVO LEON','VALLECILLO'),(1003,'NUEVO LEON','VILLALDAMA'),(1004,'OAXACA','ABEJONES'),(1005,'OAXACA','ACATLAN DE PEREZ FIGUEROA'),(1006,'OAXACA','ANIMAS TRUJANO'),(1007,'OAXACA','ASUNCION CACALOTEPEC'),(1008,'OAXACA','ASUNCION CUYOTEPEJI'),(1009,'OAXACA','ASUNCION IXTALTEPEC'),(1010,'OAXACA','ASUNCION NOCHIXTLAN'),(1011,'OAXACA','ASUNCION OCOTLAN'),(1012,'OAXACA','ASUNCION TLACOLULITA'),(1013,'OAXACA','AYOQUEZCO DE ALDAMA'),(1014,'OAXACA','AYOTZINTEPEC'),(1015,'OAXACA','CALIHUALA'),(1016,'OAXACA','CANDELARIA LOXICHA'),(1017,'OAXACA','CAPULALPAM DE MENDEZ'),(1018,'OAXACA','CHAHUITES'),(1019,'OAXACA','CHALCATONGO DE HIDALGO'),(1020,'OAXACA','CHIQUIHUITLAN DE BENITO JUAREZ'),(1021,'OAXACA','CIENEGA DE ZIMATLAN'),(1022,'OAXACA','CIUDAD IXTEPEC'),(1023,'OAXACA','COATECAS ALTAS'),(1024,'OAXACA','COICOYAN DE LAS FLORES'),(1025,'OAXACA','CONCEPCION BUENAVISTA'),(1026,'OAXACA','CONCEPCION PAPALO'),(1027,'OAXACA','CONSTANCIA DEL ROSARIO'),(1028,'OAXACA','COSOLAPA'),(1029,'OAXACA','COSOLTEPEC'),(1030,'OAXACA','CUILAPAM DE GUERRERO'),(1031,'OAXACA','CUNA DE LA INDEPENDENCIA DE OAXACA'),(1032,'OAXACA','CUYAMECALCO VILLA DE ZARAGOZA'),(1033,'OAXACA','EL BARRIO DE LA SOLEDAD'),(1034,'OAXACA','EL ESPINAL'),(1035,'OAXACA','ELOXOCHITLAN DE FLORES MAGON'),(1036,'OAXACA','FRESNILLO DE TRUJANO'),(1037,'OAXACA','GUADALUPE ETLA'),(1038,'OAXACA','GUADALUPE DE RAMIREZ'),(1039,'OAXACA','GUELATAO DE JUAREZ'),(1040,'OAXACA','GUEVEA DE HUMBOLDT'),(1041,'OAXACA','HEROICA CIUDAD DE EJUTLA DE CRESPO'),(1042,'OAXACA','HEROICA CIUDAD DE HUAJUAPAN DE LEON'),(1043,'OAXACA','HEROICA CIUDAD DE JUCHITAN DE ZARAGOZA'),(1044,'OAXACA','HEROICA CIUDAD DE TLAXIACO'),(1045,'OAXACA','HEROICA VILLA TEZOATLAN DE SEGURA Y LUNA'),(1046,'OAXACA','HUAUTEPEC'),(1047,'OAXACA','HUAUTLA DE JIMENEZ'),(1048,'OAXACA','IXPANTEPEC NIEVES'),(1049,'OAXACA','IXTLAN DE JUAREZ'),(1050,'OAXACA','LA COMPANIA'),(1051,'OAXACA','LA PE'),(1052,'OAXACA','LA REFORMA'),(1053,'OAXACA','LA TRINIDAD VISTA HERMOSA'),(1054,'OAXACA','LOMA BONITA'),(1055,'OAXACA','MAGDALENA APASCO'),(1056,'OAXACA','MAGDALENA JALTEPEC'),(1057,'OAXACA','MAGDALENA MIXTEPEC'),(1058,'OAXACA','MAGDALENA OCOTLAN'),(1059,'OAXACA','MAGDALENA PENASCO'),(1060,'OAXACA','MAGDALENA TEITIPAC'),(1061,'OAXACA','MAGDALENA TEQUISISTLAN'),(1062,'OAXACA','MAGDALENA TLACOTEPEC'),(1063,'OAXACA','MAGDALENA YODOCONO DE PORFIRIO DIAZ'),(1064,'OAXACA','MAGDALENA ZAHUATLAN'),(1065,'OAXACA','MARISCALA DE JUAREZ'),(1066,'OAXACA','MARTIRES DE TACUBAYA'),(1067,'OAXACA','MATIAS ROMERO AVENDANO'),(1068,'OAXACA','MAZATLAN VILLA DE FLORES'),(1069,'OAXACA','MESONES HIDALGO'),(1070,'OAXACA','MIAHUATLAN DE PORFIRIO DIAZ'),(1071,'OAXACA','MIXISTLAN DE LA REFORMA'),(1072,'OAXACA','MONJAS'),(1073,'OAXACA','NATIVIDAD'),(1074,'OAXACA','NAZARENO ETLA'),(1075,'OAXACA','NEJAPA DE MADERO'),(1076,'OAXACA','NUEVO ZOQUIAPAM'),(1077,'OAXACA','OAXACA DE JUAREZ'),(1078,'OAXACA','OCOTLAN DE MORELOS'),(1079,'OAXACA','PINOTEPA DE DON LUIS'),(1080,'OAXACA','PLUMA HIDALGO'),(1081,'OAXACA','PUTLA VILLA DE GUERRERO'),(1082,'OAXACA','REFORMA DE PINEDA'),(1083,'OAXACA','REYES ETLA'),(1084,'OAXACA','ROJAS DE CUAUHTEMOC'),(1085,'OAXACA','SALINA CRUZ'),(1086,'OAXACA','SAN AGUSTIN AMATENGO'),(1087,'OAXACA','SAN AGUSTIN ATENANGO'),(1088,'OAXACA','SAN AGUSTIN CHAYUCO'),(1089,'OAXACA','SAN AGUSTIN ETLA'),(1090,'OAXACA','SAN AGUSTIN LOXICHA'),(1091,'OAXACA','SAN AGUSTIN TLACOTEPEC'),(1092,'OAXACA','SAN AGUSTIN YATARENI'),(1093,'OAXACA','SAN AGUSTIN DE LAS JUNTAS'),(1094,'OAXACA','SAN ANDRES CABECERA NUEVA'),(1095,'OAXACA','SAN ANDRES DINICUITI'),(1096,'OAXACA','SAN ANDRES HUAXPALTEPEC'),(1097,'OAXACA','SAN ANDRES HUAYAPAM'),(1098,'OAXACA','SAN ANDRES IXTLAHUACA'),(1099,'OAXACA','SAN ANDRES LAGUNAS'),(1100,'OAXACA','SAN ANDRES NUXINO'),(1101,'OAXACA','SAN ANDRES PAXTLAN'),(1102,'OAXACA','SAN ANDRES SINAXTLA'),(1103,'OAXACA','SAN ANDRES SOLAGA'),(1104,'OAXACA','SAN ANDRES TEOTILALPAM'),(1105,'OAXACA','SAN ANDRES TEPETLAPA'),(1106,'OAXACA','SAN ANDRES YAA'),(1107,'OAXACA','SAN ANDRES ZABACHE'),(1108,'OAXACA','SAN ANDRES ZAUTLA'),(1109,'OAXACA','SAN ANTONINO CASTILLO VELASCO'),(1110,'OAXACA','SAN ANTONINO MONTE VERDE'),(1111,'OAXACA','SAN ANTONINO EL ALTO'),(1112,'OAXACA','SAN ANTONIO ACUTLA'),(1113,'OAXACA','SAN ANTONIO HUITEPEC'),(1114,'OAXACA','SAN ANTONIO NANAHUATIPAM'),(1115,'OAXACA','SAN ANTONIO SINICAHUA'),(1116,'OAXACA','SAN ANTONIO TEPETLAPA'),(1117,'OAXACA','SAN ANTONIO DE LA CAL'),(1118,'OAXACA','SAN BALTAZAR CHICHICAPAM'),(1119,'OAXACA','SAN BALTAZAR LOXICHA'),(1120,'OAXACA','SAN BALTAZAR YATZACHI EL BAJO'),(1121,'OAXACA','SAN BARTOLO COYOTEPEC'),(1122,'OAXACA','SAN BARTOLO SOYALTEPEC'),(1123,'OAXACA','SAN BARTOLO YAUTEPEC'),(1124,'OAXACA','SAN BARTOLOME AYAUTLA'),(1125,'OAXACA','SAN BARTOLOME LOXICHA'),(1126,'OAXACA','SAN BARTOLOME QUIALANA'),(1127,'OAXACA','SAN BARTOLOME YUCUANE'),(1128,'OAXACA','SAN BARTOLOME ZOOGOCHO'),(1129,'OAXACA','SAN BERNARDO MIXTEPEC'),(1130,'OAXACA','SAN BLAS ATEMPA'),(1131,'OAXACA','SAN CARLOS YAUTEPEC'),(1132,'OAXACA','SAN CRISTOBAL AMATLAN'),(1133,'OAXACA','SAN CRISTOBAL AMOLTEPEC'),(1134,'OAXACA','SAN CRISTOBAL LACHIRIOAG'),(1135,'OAXACA','SAN CRISTOBAL SUCHIXTLAHUACA'),(1136,'OAXACA','SAN DIONISIO OCOTEPEC'),(1137,'OAXACA','SAN DIONISIO OCOTLAN'),(1138,'OAXACA','SAN DIONISIO DEL MAR'),(1139,'OAXACA','SAN ESTEBAN ATATLAHUCA'),(1140,'OAXACA','SAN FELIPE JALAPA DE DIAZ'),(1141,'OAXACA','SAN FELIPE TEJALAPAM'),(1142,'OAXACA','SAN FELIPE USILA'),(1143,'OAXACA','SAN FRANCISCO CAHUACUA'),(1144,'OAXACA','SAN FRANCISCO CAJONOS'),(1145,'OAXACA','SAN FRANCISCO CHAPULAPA'),(1146,'OAXACA','SAN FRANCISCO CHINDUA'),(1147,'OAXACA','SAN FRANCISCO HUEHUETLAN'),(1148,'OAXACA','SAN FRANCISCO IXHUATAN'),(1149,'OAXACA','SAN FRANCISCO JALTEPETONGO'),(1150,'OAXACA','SAN FRANCISCO LACHIGOLO'),(1151,'OAXACA','SAN FRANCISCO LOGUECHE'),(1152,'OAXACA','SAN FRANCISCO NUXANO'),(1153,'OAXACA','SAN FRANCISCO OZOLOTEPEC'),(1154,'OAXACA','SAN FRANCISCO SOLA'),(1155,'OAXACA','SAN FRANCISCO TELIXTLAHUACA'),(1156,'OAXACA','SAN FRANCISCO TEOPAN'),(1157,'OAXACA','SAN FRANCISCO TLAPANCINGO'),(1158,'OAXACA','SAN FRANCISCO DEL MAR'),(1159,'OAXACA','SAN GABRIEL MIXTEPEC'),(1160,'OAXACA','SAN ILDEFONSO AMATLAN'),(1161,'OAXACA','SAN ILDEFONSO SOLA'),(1162,'OAXACA','SAN ILDEFONSO VILLA ALTA'),(1163,'OAXACA','SAN JACINTO AMILPAS'),(1164,'OAXACA','SAN JACINTO TLACOTEPEC'),(1165,'OAXACA','SAN JERONIMO COATLAN'),(1166,'OAXACA','SAN JERONIMO SILACAYOAPILLA'),(1167,'OAXACA','SAN JERONIMO SOSOLA'),(1168,'OAXACA','SAN JERONIMO TAVICHE'),(1169,'OAXACA','SAN JERONIMO TECOATL'),(1170,'OAXACA','SAN JERONIMO TLACOCHAHUAYA'),(1171,'OAXACA','SAN JORGE NUCHITA'),(1172,'OAXACA','SAN JOSE AYUQUILA'),(1173,'OAXACA','SAN JOSE CHILTEPEC'),(1174,'OAXACA','SAN JOSE ESTANCIA GRANDE'),(1175,'OAXACA','SAN JOSE INDEPENDENCIA'),(1176,'OAXACA','SAN JOSE LACHIGUIRI'),(1177,'OAXACA','SAN JOSE TENANGO'),(1178,'OAXACA','SAN JOSE DEL PENASCO'),(1179,'OAXACA','SAN JOSE DEL PROGRESO'),(1180,'OAXACA','SAN JUAN ACHIUTLA'),(1181,'OAXACA','SAN JUAN ATEPEC'),(1182,'OAXACA','SAN JUAN BAUTISTA ATATLAHUCA'),(1183,'OAXACA','SAN JUAN BAUTISTA COIXTLAHUACA'),(1184,'OAXACA','SAN JUAN BAUTISTA CUICATLAN'),(1185,'OAXACA','SAN JUAN BAUTISTA GUELACHE'),(1186,'OAXACA','SAN JUAN BAUTISTA JAYACATLAN'),(1187,'OAXACA','SAN JUAN BAUTISTA LO DE SOTO'),(1188,'OAXACA','SAN JUAN BAUTISTA SUCHITEPEC'),(1189,'OAXACA','SAN JUAN BAUTISTA TLACHICHILCO'),(1190,'OAXACA','SAN JUAN BAUTISTA TLACOATZINTEPEC'),(1191,'OAXACA','SAN JUAN BAUTISTA TUXTEPEC'),(1192,'OAXACA','SAN JUAN BAUTISTA VALLE NACIONAL'),(1193,'OAXACA','SAN JUAN CACAHUATEPEC'),(1194,'OAXACA','SAN JUAN CHICOMEZUCHIL'),(1195,'OAXACA','SAN JUAN CHILATECA'),(1196,'OAXACA','SAN JUAN CIENEGUILLA'),(1197,'OAXACA','SAN JUAN COATZOSPAM'),(1198,'OAXACA','SAN JUAN COLORADO'),(1199,'OAXACA','SAN JUAN COMALTEPEC'),(1200,'OAXACA','SAN JUAN COTZOCON'),(1201,'OAXACA','SAN JUAN DIUXI'),(1202,'OAXACA','SAN JUAN EVANGELISTA ANALCO'),(1203,'OAXACA','SAN JUAN GUELAVIA'),(1204,'OAXACA','SAN JUAN GUICHICOVI'),(1205,'OAXACA','SAN JUAN IHUALTEPEC'),(1206,'OAXACA','SAN JUAN JUQUILA MIXES'),(1207,'OAXACA','SAN JUAN JUQUILA VIJANOS'),(1208,'OAXACA','SAN JUAN LACHAO'),(1209,'OAXACA','SAN JUAN LACHIGALLA'),(1210,'OAXACA','SAN JUAN LAJARCIA'),(1211,'OAXACA','SAN JUAN LALANA'),(1212,'OAXACA','SAN JUAN MAZATLAN'),(1213,'OAXACA','SAN JUAN MIXTEPEC'),(1214,'OAXACA','SAN JUAN MIXTEPEC'),(1215,'OAXACA','SAN JUAN NUMI'),(1216,'OAXACA','SAN JUAN OZOLOTEPEC'),(1217,'OAXACA','SAN JUAN PETLAPA'),(1218,'OAXACA','SAN JUAN QUIAHIJE'),(1219,'OAXACA','SAN JUAN QUIOTEPEC'),(1220,'OAXACA','SAN JUAN SAYULTEPEC'),(1221,'OAXACA','SAN JUAN TABAA'),(1222,'OAXACA','SAN JUAN TAMAZOLA'),(1223,'OAXACA','SAN JUAN TEITA'),(1224,'OAXACA','SAN JUAN TEITIPAC'),(1225,'OAXACA','SAN JUAN TEPEUXILA'),(1226,'OAXACA','SAN JUAN TEPOSCOLULA'),(1227,'OAXACA','SAN JUAN YAEE'),(1228,'OAXACA','SAN JUAN YATZONA'),(1229,'OAXACA','SAN JUAN YUCUITA'),(1230,'OAXACA','SAN JUAN DE LOS CUES'),(1231,'OAXACA','SAN JUAN DEL ESTADO'),(1232,'OAXACA','SAN JUAN DEL RIO'),(1233,'OAXACA','SAN LORENZO ALBARRADAS'),(1234,'OAXACA','SAN LORENZO CACAOTEPEC'),(1235,'OAXACA','SAN LORENZO CUAUNECUILTITLA'),(1236,'OAXACA','SAN LORENZO TEXMELUCAN'),(1237,'OAXACA','SAN LORENZO VICTORIA'),(1238,'OAXACA','SAN LORENZO'),(1239,'OAXACA','SAN LUCAS CAMOTLAN'),(1240,'OAXACA','SAN LUCAS OJITLAN'),(1241,'OAXACA','SAN LUCAS QUIAVINI'),(1242,'OAXACA','SAN LUCAS ZOQUIAPAM'),(1243,'OAXACA','SAN LUIS AMATLAN'),(1244,'OAXACA','SAN MARCIAL OZOLOTEPEC'),(1245,'OAXACA','SAN MARCOS ARTEAGA'),(1246,'OAXACA','SAN MARTIN HUAMELULPAM'),(1247,'OAXACA','SAN MARTIN ITUNYOSO'),(1248,'OAXACA','SAN MARTIN LACHILA'),(1249,'OAXACA','SAN MARTIN PERAS'),(1250,'OAXACA','SAN MARTIN TILCAJETE'),(1251,'OAXACA','SAN MARTIN TOXPALAN'),(1252,'OAXACA','SAN MARTIN ZACATEPEC'),(1253,'OAXACA','SAN MARTIN DE LOS CANSECOS'),(1254,'OAXACA','SAN MATEO CAJONOS'),(1255,'OAXACA','SAN MATEO ETLATONGO'),(1256,'OAXACA','SAN MATEO NEJAPAM'),(1257,'OAXACA','SAN MATEO PENASCO'),(1258,'OAXACA','SAN MATEO PINAS'),(1259,'OAXACA','SAN MATEO RIO HONDO'),(1260,'OAXACA','SAN MATEO SINDIHUI'),(1261,'OAXACA','SAN MATEO TLAPILTEPEC'),(1262,'OAXACA','SAN MATEO YOLOXOCHITLAN'),(1263,'OAXACA','SAN MATEO YUCUTINDOO'),(1264,'OAXACA','SAN MATEO DEL MAR'),(1265,'OAXACA','SAN MELCHOR BETAZA'),(1266,'OAXACA','SAN MIGUEL ACHIUTLA'),(1267,'OAXACA','SAN MIGUEL AHUEHUETITLAN'),(1268,'OAXACA','SAN MIGUEL ALOAPAM'),(1269,'OAXACA','SAN MIGUEL AMATITLAN'),(1270,'OAXACA','SAN MIGUEL AMATLAN'),(1271,'OAXACA','SAN MIGUEL CHICAHUA'),(1272,'OAXACA','SAN MIGUEL CHIMALAPA'),(1273,'OAXACA','SAN MIGUEL COATLAN'),(1274,'OAXACA','SAN MIGUEL EJUTLA'),(1275,'OAXACA','SAN MIGUEL HUAUTLA'),(1276,'OAXACA','SAN MIGUEL MIXTEPEC'),(1277,'OAXACA','SAN MIGUEL PANIXTLAHUACA'),(1278,'OAXACA','SAN MIGUEL PERAS'),(1279,'OAXACA','SAN MIGUEL PIEDRAS'),(1280,'OAXACA','SAN MIGUEL QUETZALTEPEC'),(1281,'OAXACA','SAN MIGUEL SANTA FLOR'),(1282,'OAXACA','SAN MIGUEL SOYALTEPEC'),(1283,'OAXACA','SAN MIGUEL SUCHIXTEPEC'),(1284,'OAXACA','SAN MIGUEL TECOMATLAN'),(1285,'OAXACA','SAN MIGUEL TENANGO'),(1286,'OAXACA','SAN MIGUEL TEQUIXTEPEC'),(1287,'OAXACA','SAN MIGUEL TILQUIAPAM'),(1288,'OAXACA','SAN MIGUEL TLACAMAMA'),(1289,'OAXACA','SAN MIGUEL TLACOTEPEC'),(1290,'OAXACA','SAN MIGUEL TULANCINGO'),(1291,'OAXACA','SAN MIGUEL YOTAO'),(1292,'OAXACA','SAN MIGUEL DEL PUERTO'),(1293,'OAXACA','SAN MIGUEL DEL RIO'),(1294,'OAXACA','SAN MIGUEL EL GRANDE'),(1295,'OAXACA','SAN NICOLAS HIDALGO'),(1296,'OAXACA','SAN NICOLAS'),(1297,'OAXACA','SAN PABLO COATLAN'),(1298,'OAXACA','SAN PABLO CUATRO VENADOS'),(1299,'OAXACA','SAN PABLO ETLA'),(1300,'OAXACA','SAN PABLO HUITZO'),(1301,'OAXACA','SAN PABLO HUIXTEPEC'),(1302,'OAXACA','SAN PABLO MACUILTIANGUIS'),(1303,'OAXACA','SAN PABLO TIJALTEPEC'),(1304,'OAXACA','SAN PABLO VILLA DE MITLA'),(1305,'OAXACA','SAN PABLO YAGANIZA'),(1306,'OAXACA','SAN PEDRO AMUZGOS'),(1307,'OAXACA','SAN PEDRO APOSTOL'),(1308,'OAXACA','SAN PEDRO ATOYAC'),(1309,'OAXACA','SAN PEDRO CAJONOS'),(1310,'OAXACA','SAN PEDRO COMITANCILLO'),(1311,'OAXACA','SAN PEDRO COXCALTEPEC CANTAROS'),(1312,'OAXACA','SAN PEDRO HUAMELULA'),(1313,'OAXACA','SAN PEDRO HUILOTEPEC'),(1314,'OAXACA','SAN PEDRO IXCATLAN'),(1315,'OAXACA','SAN PEDRO IXTLAHUACA'),(1316,'OAXACA','SAN PEDRO JALTEPETONGO'),(1317,'OAXACA','SAN PEDRO JICAYAN'),(1318,'OAXACA','SAN PEDRO JOCOTIPAC'),(1319,'OAXACA','SAN PEDRO JUCHATENGO'),(1320,'OAXACA','SAN PEDRO MARTIR QUIECHAPA'),(1321,'OAXACA','SAN PEDRO MARTIR YUCUXACO'),(1322,'OAXACA','SAN PEDRO MARTIR'),(1323,'OAXACA','SAN PEDRO MIXTEPEC'),(1324,'OAXACA','SAN PEDRO MIXTEPEC'),(1325,'OAXACA','SAN PEDRO MOLINOS'),(1326,'OAXACA','SAN PEDRO NOPALA'),(1327,'OAXACA','SAN PEDRO OCOPETATILLO'),(1328,'OAXACA','SAN PEDRO OCOTEPEC'),(1329,'OAXACA','SAN PEDRO POCHUTLA'),(1330,'OAXACA','SAN PEDRO QUIATONI'),(1331,'OAXACA','SAN PEDRO SOCHIAPAM'),(1332,'OAXACA','SAN PEDRO TAPANATEPEC'),(1333,'OAXACA','SAN PEDRO TAVICHE'),(1334,'OAXACA','SAN PEDRO TEOZACOALCO'),(1335,'OAXACA','SAN PEDRO TEUTILA'),(1336,'OAXACA','SAN PEDRO TIDAA'),(1337,'OAXACA','SAN PEDRO TOPILTEPEC'),(1338,'OAXACA','SAN PEDRO TOTOLAPAM'),(1339,'OAXACA','SAN PEDRO YANERI'),(1340,'OAXACA','SAN PEDRO YOLOX'),(1341,'OAXACA','SAN PEDRO YUCUNAMA'),(1342,'OAXACA','SAN PEDRO EL ALTO'),(1343,'OAXACA','SAN PEDRO Y SAN PABLO AYUTLA'),(1344,'OAXACA','SAN PEDRO Y SAN PABLO TEPOSCOLULA'),(1345,'OAXACA','SAN PEDRO Y SAN PABLO TEQUIXTEPEC'),(1346,'OAXACA','SAN RAYMUNDO JALPAN'),(1347,'OAXACA','SAN SEBASTIAN ABASOLO'),(1348,'OAXACA','SAN SEBASTIAN COATLAN'),(1349,'OAXACA','SAN SEBASTIAN IXCAPA'),(1350,'OAXACA','SAN SEBASTIAN NICANANDUTA'),(1351,'OAXACA','SAN SEBASTIAN RIO HONDO'),(1352,'OAXACA','SAN SEBASTIAN TECOMAXTLAHUACA'),(1353,'OAXACA','SAN SEBASTIAN TEITIPAC'),(1354,'OAXACA','SAN SEBASTIAN TUTLA'),(1355,'OAXACA','SAN SIMON ALMOLONGAS'),(1356,'OAXACA','SAN SIMON ZAHUATLAN'),(1357,'OAXACA','SAN VICENTE COATLAN'),(1358,'OAXACA','SAN VICENTE LACHIXIO'),(1359,'OAXACA','SAN VICENTE NUNU'),(1360,'OAXACA','SANTA ANA ATEIXTLAHUACA'),(1361,'OAXACA','SANTA ANA CUAUHTEMOC'),(1362,'OAXACA','SANTA ANA TAVELA'),(1363,'OAXACA','SANTA ANA TLAPACOYAN'),(1364,'OAXACA','SANTA ANA YARENI'),(1365,'OAXACA','SANTA ANA ZEGACHE'),(1366,'OAXACA','SANTA ANA DEL VALLE'),(1367,'OAXACA','SANTA ANA'),(1368,'OAXACA','SANTA CATALINA QUIERI'),(1369,'OAXACA','SANTA CATARINA CUIXTLA'),(1370,'OAXACA','SANTA CATARINA IXTEPEJI'),(1371,'OAXACA','SANTA CATARINA JUQUILA'),(1372,'OAXACA','SANTA CATARINA LACHATAO'),(1373,'OAXACA','SANTA CATARINA LOXICHA'),(1374,'OAXACA','SANTA CATARINA MECHOACAN'),(1375,'OAXACA','SANTA CATARINA MINAS'),(1376,'OAXACA','SANTA CATARINA QUIANE'),(1377,'OAXACA','SANTA CATARINA QUIOQUITANI'),(1378,'OAXACA','SANTA CATARINA TAYATA'),(1379,'OAXACA','SANTA CATARINA TICUA'),(1380,'OAXACA','SANTA CATARINA YOSONOTU'),(1381,'OAXACA','SANTA CATARINA ZAPOQUILA'),(1382,'OAXACA','SANTA CRUZ ACATEPEC'),(1383,'OAXACA','SANTA CRUZ AMILPAS'),(1384,'OAXACA','SANTA CRUZ ITUNDUJIA'),(1385,'OAXACA','SANTA CRUZ MIXTEPEC'),(1386,'OAXACA','SANTA CRUZ NUNDACO'),(1387,'OAXACA','SANTA CRUZ PAPALUTLA'),(1388,'OAXACA','SANTA CRUZ TACACHE DE MINA'),(1389,'OAXACA','SANTA CRUZ TACAHUA'),(1390,'OAXACA','SANTA CRUZ TAYATA'),(1391,'OAXACA','SANTA CRUZ XITLA'),(1392,'OAXACA','SANTA CRUZ XOXOCOTLAN'),(1393,'OAXACA','SANTA CRUZ ZENZONTEPEC'),(1394,'OAXACA','SANTA CRUZ DE BRAVO'),(1395,'OAXACA','SANTA GERTRUDIS'),(1396,'OAXACA','SANTA INES YATZECHE'),(1397,'OAXACA','SANTA INES DE ZARAGOZA'),(1398,'OAXACA','SANTA INES DEL MONTE'),(1399,'OAXACA','SANTA LUCIA MIAHUATLAN'),(1400,'OAXACA','SANTA LUCIA MONTEVERDE'),(1401,'OAXACA','SANTA LUCIA OCOTLAN'),(1402,'OAXACA','SANTA LUCIA DEL CAMINO'),(1403,'OAXACA','SANTA MAGDALENA JICOTLAN'),(1404,'OAXACA','SANTA MARIA ALOTEPEC'),(1405,'OAXACA','SANTA MARIA APAZCO'),(1406,'OAXACA','SANTA MARIA ATZOMPA'),(1407,'OAXACA','SANTA MARIA CAMOTLAN'),(1408,'OAXACA','SANTA MARIA CHACHOAPAM'),(1409,'OAXACA','SANTA MARIA CHILCHOTLA'),(1410,'OAXACA','SANTA MARIA CHIMALAPA'),(1411,'OAXACA','SANTA MARIA COLOTEPEC'),(1412,'OAXACA','SANTA MARIA CORTIJO'),(1413,'OAXACA','SANTA MARIA COYOTEPEC'),(1414,'OAXACA','SANTA MARIA ECATEPEC'),(1415,'OAXACA','SANTA MARIA GUELACE'),(1416,'OAXACA','SANTA MARIA GUIENAGATI'),(1417,'OAXACA','SANTA MARIA HUATULCO'),(1418,'OAXACA','SANTA MARIA HUAZOLOTITLAN'),(1419,'OAXACA','SANTA MARIA IPALAPA'),(1420,'OAXACA','SANTA MARIA IXCATLAN'),(1421,'OAXACA','SANTA MARIA JACATEPEC'),(1422,'OAXACA','SANTA MARIA JALAPA DEL MARQUES'),(1423,'OAXACA','SANTA MARIA JALTIANGUIS'),(1424,'OAXACA','SANTA MARIA LACHIXIO'),(1425,'OAXACA','SANTA MARIA MIXTEQUILLA'),(1426,'OAXACA','SANTA MARIA NATIVITAS'),(1427,'OAXACA','SANTA MARIA NDUAYACO'),(1428,'OAXACA','SANTA MARIA OZOLOTEPEC'),(1429,'OAXACA','SANTA MARIA PAPALO'),(1430,'OAXACA','SANTA MARIA PENOLES'),(1431,'OAXACA','SANTA MARIA PETAPA'),(1432,'OAXACA','SANTA MARIA QUIEGOLANI'),(1433,'OAXACA','SANTA MARIA SOLA'),(1434,'OAXACA','SANTA MARIA TATALTEPEC'),(1435,'OAXACA','SANTA MARIA TECOMAVACA'),(1436,'OAXACA','SANTA MARIA TEMAXCALAPA'),(1437,'OAXACA','SANTA MARIA TEMAXCALTEPEC'),(1438,'OAXACA','SANTA MARIA TEOPOXCO'),(1439,'OAXACA','SANTA MARIA TEPANTLALI'),(1440,'OAXACA','SANTA MARIA TEXCATITLAN'),(1441,'OAXACA','SANTA MARIA TLAHUITOLTEPEC'),(1442,'OAXACA','SANTA MARIA TLALIXTAC'),(1443,'OAXACA','SANTA MARIA TONAMECA'),(1444,'OAXACA','SANTA MARIA TOTOLAPILLA'),(1445,'OAXACA','SANTA MARIA XADANI'),(1446,'OAXACA','SANTA MARIA YALINA'),(1447,'OAXACA','SANTA MARIA YAVESIA'),(1448,'OAXACA','SANTA MARIA YOLOTEPEC'),(1449,'OAXACA','SANTA MARIA YOSOYUA'),(1450,'OAXACA','SANTA MARIA YUCUHITI'),(1451,'OAXACA','SANTA MARIA ZACATEPEC'),(1452,'OAXACA','SANTA MARIA ZANIZA'),(1453,'OAXACA','SANTA MARIA ZOQUITLAN'),(1454,'OAXACA','SANTA MARIA DEL ROSARIO'),(1455,'OAXACA','SANTA MARIA DEL TULE'),(1456,'OAXACA','SANTA MARIA LA ASUNCION'),(1457,'OAXACA','SANTIAGO AMOLTEPEC'),(1458,'OAXACA','SANTIAGO APOALA'),(1459,'OAXACA','SANTIAGO APOSTOL'),(1460,'OAXACA','SANTIAGO ASTATA'),(1461,'OAXACA','SANTIAGO ATITLAN'),(1462,'OAXACA','SANTIAGO AYUQUILILLA'),(1463,'OAXACA','SANTIAGO CACALOXTEPEC'),(1464,'OAXACA','SANTIAGO CAMOTLAN'),(1465,'OAXACA','SANTIAGO CHAZUMBA'),(1466,'OAXACA','SANTIAGO CHOAPAM'),(1467,'OAXACA','SANTIAGO COMALTEPEC'),(1468,'OAXACA','SANTIAGO HUAJOLOTITLAN'),(1469,'OAXACA','SANTIAGO HUAUCLILLA'),(1470,'OAXACA','SANTIAGO IHUITLAN PLUMAS'),(1471,'OAXACA','SANTIAGO IXCUINTEPEC'),(1472,'OAXACA','SANTIAGO IXTAYUTLA'),(1473,'OAXACA','SANTIAGO JAMILTEPEC'),(1474,'OAXACA','SANTIAGO JOCOTEPEC'),(1475,'OAXACA','SANTIAGO JUXTLAHUACA'),(1476,'OAXACA','SANTIAGO LACHIGUIRI'),(1477,'OAXACA','SANTIAGO LALOPA'),(1478,'OAXACA','SANTIAGO LAOLLAGA'),(1479,'OAXACA','SANTIAGO LAXOPA'),(1480,'OAXACA','SANTIAGO LLANO GRANDE'),(1481,'OAXACA','SANTIAGO MATATLAN'),(1482,'OAXACA','SANTIAGO MILTEPEC'),(1483,'OAXACA','SANTIAGO MINAS'),(1484,'OAXACA','SANTIAGO NACALTEPEC'),(1485,'OAXACA','SANTIAGO NEJAPILLA'),(1486,'OAXACA','SANTIAGO NILTEPEC'),(1487,'OAXACA','SANTIAGO NUNDICHE'),(1488,'OAXACA','SANTIAGO NUYOO'),(1489,'OAXACA','SANTIAGO PINOTEPA NACIONAL'),(1490,'OAXACA','SANTIAGO SUCHILQUITONGO'),(1491,'OAXACA','SANTIAGO TAMAZOLA'),(1492,'OAXACA','SANTIAGO TAPEXTLA'),(1493,'OAXACA','SANTIAGO TENANGO'),(1494,'OAXACA','SANTIAGO TEPETLAPA'),(1495,'OAXACA','SANTIAGO TETEPEC'),(1496,'OAXACA','SANTIAGO TEXCALCINGO'),(1497,'OAXACA','SANTIAGO TEXTITLAN'),(1498,'OAXACA','SANTIAGO TILANTONGO'),(1499,'OAXACA','SANTIAGO TILLO'),(1500,'OAXACA','SANTIAGO TLAZOYALTEPEC'),(1501,'OAXACA','SANTIAGO XANICA'),(1502,'OAXACA','SANTIAGO XIACUI'),(1503,'OAXACA','SANTIAGO YAITEPEC'),(1504,'OAXACA','SANTIAGO YAVEO'),(1505,'OAXACA','SANTIAGO YOLOMECATL'),(1506,'OAXACA','SANTIAGO YOSONDUA'),(1507,'OAXACA','SANTIAGO YUCUYACHI'),(1508,'OAXACA','SANTIAGO ZACATEPEC'),(1509,'OAXACA','SANTIAGO ZOOCHILA'),(1510,'OAXACA','SANTIAGO DEL RIO'),(1511,'OAXACA','SANTO DOMINGO ALBARRADAS'),(1512,'OAXACA','SANTO DOMINGO ARMENTA'),(1513,'OAXACA','SANTO DOMINGO CHIHUITAN'),(1514,'OAXACA','SANTO DOMINGO INGENIO'),(1515,'OAXACA','SANTO DOMINGO IXCATLAN'),(1516,'OAXACA','SANTO DOMINGO NUXAA'),(1517,'OAXACA','SANTO DOMINGO OZOLOTEPEC'),(1518,'OAXACA','SANTO DOMINGO PETAPA'),(1519,'OAXACA','SANTO DOMINGO ROAYAGA'),(1520,'OAXACA','SANTO DOMINGO TEHUANTEPEC'),(1521,'OAXACA','SANTO DOMINGO TEOJOMULCO'),(1522,'OAXACA','SANTO DOMINGO TEPUXTEPEC'),(1523,'OAXACA','SANTO DOMINGO TLATAYAPAM'),(1524,'OAXACA','SANTO DOMINGO TOMALTEPEC'),(1525,'OAXACA','SANTO DOMINGO TONALA'),(1526,'OAXACA','SANTO DOMINGO TONALTEPEC'),(1527,'OAXACA','SANTO DOMINGO XAGACIA'),(1528,'OAXACA','SANTO DOMINGO YANHUITLAN'),(1529,'OAXACA','SANTO DOMINGO YODOHINO'),(1530,'OAXACA','SANTO DOMINGO ZANATEPEC'),(1531,'OAXACA','SANTO DOMINGO DE MORELOS'),(1532,'OAXACA','SANTO TOMAS JALIEZA'),(1533,'OAXACA','SANTO TOMAS MAZALTEPEC'),(1534,'OAXACA','SANTO TOMAS OCOTEPEC'),(1535,'OAXACA','SANTO TOMAS TAMAZULAPAN'),(1536,'OAXACA','SANTOS REYES NOPALA'),(1537,'OAXACA','SANTOS REYES PAPALO'),(1538,'OAXACA','SANTOS REYES TEPEJILLO'),(1539,'OAXACA','SANTOS REYES YUCUNA'),(1540,'OAXACA','SILACAYOAPAM'),(1541,'OAXACA','SITIO DE XITLAPEHUA'),(1542,'OAXACA','SOLEDAD ETLA'),(1543,'OAXACA','TAMAZULAPAM DEL ESPIRITU SANTO'),(1544,'OAXACA','TANETZE DE ZARAGOZA'),(1545,'OAXACA','TANICHE'),(1546,'OAXACA','TATALTEPEC DE VALDES'),(1547,'OAXACA','TEOCOCUILCO DE MARCOS PEREZ'),(1548,'OAXACA','TEOTITLAN DE FLORES MAGON'),(1549,'OAXACA','TEOTITLAN DEL VALLE'),(1550,'OAXACA','TEOTONGO'),(1551,'OAXACA','TEPELMEME VILLA DE MORELOS'),(1552,'OAXACA','TLACOLULA DE MATAMOROS'),(1553,'OAXACA','TLACOTEPEC PLUMAS'),(1554,'OAXACA','TLALIXTAC DE CABRERA'),(1555,'OAXACA','TOTONTEPEC VILLA DE MORELOS'),(1556,'OAXACA','TRINIDAD ZAACHILA'),(1557,'OAXACA','UNION HIDALGO'),(1558,'OAXACA','VALERIO TRUJANO'),(1559,'OAXACA','VILLA DIAZ ORDAZ'),(1560,'OAXACA','VILLA HIDALGO'),(1561,'OAXACA','VILLA SOLA DE VEGA'),(1562,'OAXACA','VILLA TALEA DE CASTRO'),(1563,'OAXACA','VILLA TEJUPAM DE LA UNION'),(1564,'OAXACA','VILLA DE CHILAPA DE DIAZ'),(1565,'OAXACA','VILLA DE ETLA'),(1566,'OAXACA','VILLA DE TAMAZULAPAM DEL PROGRESO'),(1567,'OAXACA','VILLA DE TUTUTEPEC'),(1568,'OAXACA','VILLA DE ZAACHILA'),(1569,'OAXACA','YAXE'),(1570,'OAXACA','YOGANA'),(1571,'OAXACA','YUTANDUCHI DE GUERRERO'),(1572,'OAXACA','ZAPOTITLAN LAGUNAS'),(1573,'OAXACA','ZAPOTITLAN PALMAS'),(1574,'OAXACA','ZIMATLAN DE ALVAREZ'),(1575,'PUEBLA','ACAJETE'),(1576,'PUEBLA','ACATENO'),(1577,'PUEBLA','ACATLAN'),(1578,'PUEBLA','ACATZINGO'),(1579,'PUEBLA','ACTEOPAN'),(1580,'PUEBLA','AHUACATLAN'),(1581,'PUEBLA','AHUATLAN'),(1582,'PUEBLA','AHUAZOTEPEC'),(1583,'PUEBLA','AHUEHUETITLA'),(1584,'PUEBLA','AJALPAN'),(1585,'PUEBLA','ALBINO ZERTUCHE'),(1586,'PUEBLA','ALJOJUCA'),(1587,'PUEBLA','ALTEPEXI'),(1588,'PUEBLA','AMIXTLAN'),(1589,'PUEBLA','AMOZOC'),(1590,'PUEBLA','AQUIXTLA'),(1591,'PUEBLA','ATEMPAN'),(1592,'PUEBLA','ATEXCAL'),(1593,'PUEBLA','ATLEQUIZAYAN'),(1594,'PUEBLA','ATLIXCO'),(1595,'PUEBLA','ATOYATEMPAN'),(1596,'PUEBLA','ATZALA'),(1597,'PUEBLA','ATZITZIHUACAN'),(1598,'PUEBLA','ATZITZINTLA'),(1599,'PUEBLA','AXUTLA'),(1600,'PUEBLA','AYOTOXCO DE GUERRERO'),(1601,'PUEBLA','CALPAN'),(1602,'PUEBLA','CALTEPEC'),(1603,'PUEBLA','CAMOCUAUTLA'),(1604,'PUEBLA','CANADA MORELOS'),(1605,'PUEBLA','CAXHUACAN'),(1606,'PUEBLA','CHALCHICOMULA DE SESMA'),(1607,'PUEBLA','CHAPULCO'),(1608,'PUEBLA','CHIAUTLA'),(1609,'PUEBLA','CHIAUTZINGO'),(1610,'PUEBLA','CHICHIQUILA'),(1611,'PUEBLA','CHICONCUAUTLA'),(1612,'PUEBLA','CHIETLA'),(1613,'PUEBLA','CHIGMECATITLAN'),(1614,'PUEBLA','CHIGNAHUAPAN'),(1615,'PUEBLA','CHIGNAUTLA'),(1616,'PUEBLA','CHILA DE LA SAL'),(1617,'PUEBLA','CHILA'),(1618,'PUEBLA','CHILCHOTLA'),(1619,'PUEBLA','CHINANTLA'),(1620,'PUEBLA','COATEPEC'),(1621,'PUEBLA','COATZINGO'),(1622,'PUEBLA','COHETZALA'),(1623,'PUEBLA','COHUECAN'),(1624,'PUEBLA','CORONANGO'),(1625,'PUEBLA','COXCATLAN'),(1626,'PUEBLA','COYOMEAPAN'),(1627,'PUEBLA','COYOTEPEC'),(1628,'PUEBLA','CUAPIAXTLA DE MADERO'),(1629,'PUEBLA','CUAUTEMPAN'),(1630,'PUEBLA','CUAUTINCHAN'),(1631,'PUEBLA','CUAUTLANCINGO'),(1632,'PUEBLA','CUAYUCA DE ANDRADE'),(1633,'PUEBLA','CUETZALAN DEL PROGRESO'),(1634,'PUEBLA','CUYOACO'),(1635,'PUEBLA','DOMINGO ARENAS'),(1636,'PUEBLA','ELOXOCHITLAN'),(1637,'PUEBLA','EPATLAN'),(1638,'PUEBLA','ESPERANZA'),(1639,'PUEBLA','FRANCISCO Z. MENA'),(1640,'PUEBLA','GENERAL FELIPE ANGELES'),(1641,'PUEBLA','GUADALUPE VICTORIA'),(1642,'PUEBLA','GUADALUPE'),(1643,'PUEBLA','HERMENEGILDO GALEANA'),(1644,'PUEBLA','HONEY'),(1645,'PUEBLA','HUAQUECHULA'),(1646,'PUEBLA','HUATLATLAUCA'),(1647,'PUEBLA','HUAUCHINANGO'),(1648,'PUEBLA','HUEHUETLA'),(1649,'PUEBLA','HUEHUETLAN EL CHICO'),(1650,'PUEBLA','HUEHUETLAN EL GRANDE'),(1651,'PUEBLA','HUEJOTZINGO'),(1652,'PUEBLA','HUEYAPAN'),(1653,'PUEBLA','HUEYTAMALCO'),(1654,'PUEBLA','HUEYTLALPAN'),(1655,'PUEBLA','HUITZILAN DE SERDAN'),(1656,'PUEBLA','HUITZILTEPEC'),(1657,'PUEBLA','IXCAMILPA DE GUERRERO'),(1658,'PUEBLA','IXCAQUIXTLA'),(1659,'PUEBLA','IXTACAMAXTITLAN'),(1660,'PUEBLA','IXTEPEC'),(1661,'PUEBLA','IZUCAR DE MATAMOROS'),(1662,'PUEBLA','JALPAN'),(1663,'PUEBLA','JOLALPAN'),(1664,'PUEBLA','JONOTLA'),(1665,'PUEBLA','JOPALA'),(1666,'PUEBLA','JUAN C. BONILLA'),(1667,'PUEBLA','JUAN GALINDO'),(1668,'PUEBLA','JUAN N. MENDEZ'),(1669,'PUEBLA','LA MAGDALENA TLATLAUQUITEPEC'),(1670,'PUEBLA','LAFRAGUA'),(1671,'PUEBLA','LIBRES'),(1672,'PUEBLA','LOS REYES DE JUAREZ'),(1673,'PUEBLA','MAZAPILTEPEC DE JUAREZ'),(1674,'PUEBLA','MIXTLA'),(1675,'PUEBLA','MOLCAXAC'),(1676,'PUEBLA','NAUPAN'),(1677,'PUEBLA','NAUZONTLA'),(1678,'PUEBLA','NEALTICAN'),(1679,'PUEBLA','NICOLAS BRAVO'),(1680,'PUEBLA','NOPALUCAN'),(1681,'PUEBLA','OCOTEPEC'),(1682,'PUEBLA','OCOYUCAN'),(1683,'PUEBLA','OLINTLA'),(1684,'PUEBLA','ORIENTAL'),(1685,'PUEBLA','PAHUATLAN'),(1686,'PUEBLA','PALMAR DE BRAVO'),(1687,'PUEBLA','PANTEPEC'),(1688,'PUEBLA','PETLALCINGO'),(1689,'PUEBLA','PIAXTLA'),(1690,'PUEBLA','PUEBLA'),(1691,'PUEBLA','QUECHOLAC'),(1692,'PUEBLA','QUIMIXTLAN'),(1693,'PUEBLA','RAFAEL LARA GRAJALES'),(1694,'PUEBLA','SAN ANDRES CHOLULA'),(1695,'PUEBLA','SAN ANTONIO CANADA'),(1696,'PUEBLA','SAN DIEGO LA MESA TOCHIMILTZINGO'),(1697,'PUEBLA','SAN FELIPE TEOTLALCINGO'),(1698,'PUEBLA','SAN FELIPE TEPATLAN'),(1699,'PUEBLA','SAN GABRIEL CHILAC'),(1700,'PUEBLA','SAN GREGORIO ATZOMPA'),(1701,'PUEBLA','SAN JERONIMO TECUANIPAN'),(1702,'PUEBLA','SAN JERONIMO XAYACATLAN'),(1703,'PUEBLA','SAN JOSE CHIAPA'),(1704,'PUEBLA','SAN JOSE MIAHUATLAN'),(1705,'PUEBLA','SAN JUAN ATENCO'),(1706,'PUEBLA','SAN JUAN ATZOMPA'),(1707,'PUEBLA','SAN MARTIN TEXMELUCAN'),(1708,'PUEBLA','SAN MARTIN TOTOLTEPEC'),(1709,'PUEBLA','SAN MATIAS TLALANCALECA'),(1710,'PUEBLA','SAN MIGUEL IXITLAN'),(1711,'PUEBLA','SAN MIGUEL XOXTLA'),(1712,'PUEBLA','SAN NICOLAS BUENOS AIRES'),(1713,'PUEBLA','SAN NICOLAS DE LOS RANCHOS'),(1714,'PUEBLA','SAN PABLO ANICANO'),(1715,'PUEBLA','SAN PEDRO CHOLULA'),(1716,'PUEBLA','SAN PEDRO YELOIXTLAHUACA'),(1717,'PUEBLA','SAN SALVADOR HUIXCOLOTLA'),(1718,'PUEBLA','SAN SALVADOR EL SECO'),(1719,'PUEBLA','SAN SALVADOR EL VERDE'),(1720,'PUEBLA','SAN SEBASTIAN TLACOTEPEC'),(1721,'PUEBLA','SANTA CATARINA TLALTEMPAN'),(1722,'PUEBLA','SANTA INES AHUATEMPAN'),(1723,'PUEBLA','SANTA ISABEL CHOLULA'),(1724,'PUEBLA','SANTIAGO MIAHUATLAN'),(1725,'PUEBLA','SANTO TOMAS HUEYOTLIPAN'),(1726,'PUEBLA','SOLTEPEC'),(1727,'PUEBLA','TECALI DE HERRERA'),(1728,'PUEBLA','TECAMACHALCO'),(1729,'PUEBLA','TECOMATLAN'),(1730,'PUEBLA','TEHUACAN'),(1731,'PUEBLA','TEHUITZINGO'),(1732,'PUEBLA','TENAMPULCO'),(1733,'PUEBLA','TEOPANTLAN'),(1734,'PUEBLA','TEOTLALCO'),(1735,'PUEBLA','TEPANCO DE LOPEZ'),(1736,'PUEBLA','TEPANGO DE RODRIGUEZ'),(1737,'PUEBLA','TEPATLAXCO DE HIDALGO'),(1738,'PUEBLA','TEPEACA'),(1739,'PUEBLA','TEPEMAXALCO'),(1740,'PUEBLA','TEPEOJUMA'),(1741,'PUEBLA','TEPETZINTLA'),(1742,'PUEBLA','TEPEXCO'),(1743,'PUEBLA','TEPEXI DE RODRIGUEZ'),(1744,'PUEBLA','TEPEYAHUALCO DE CUAUHTEMOC'),(1745,'PUEBLA','TEPEYAHUALCO'),(1746,'PUEBLA','TETELA DE OCAMPO'),(1747,'PUEBLA','TETELES DE AVILA CASTILLO'),(1748,'PUEBLA','TEZIUTLAN'),(1749,'PUEBLA','TIANGUISMANALCO'),(1750,'PUEBLA','TILAPA'),(1751,'PUEBLA','TLACHICHUCA'),(1752,'PUEBLA','TLACOTEPEC DE BENITO JUAREZ'),(1753,'PUEBLA','TLACUILOTEPEC'),(1754,'PUEBLA','TLAHUAPAN'),(1755,'PUEBLA','TLALTENANGO'),(1756,'PUEBLA','TLANEPANTLA'),(1757,'PUEBLA','TLAOLA'),(1758,'PUEBLA','TLAPACOYA'),(1759,'PUEBLA','TLAPANALA'),(1760,'PUEBLA','TLATLAUQUITEPEC'),(1761,'PUEBLA','TLAXCO'),(1762,'PUEBLA','TOCHIMILCO'),(1763,'PUEBLA','TOCHTEPEC'),(1764,'PUEBLA','TOTOLTEPEC DE GUERRERO'),(1765,'PUEBLA','TULCINGO'),(1766,'PUEBLA','TUZAMAPAN DE GALEANA'),(1767,'PUEBLA','TZICATLACOYAN'),(1768,'PUEBLA','VENUSTIANO CARRANZA'),(1769,'PUEBLA','VICENTE GUERRERO'),(1770,'PUEBLA','XAYACATLAN DE BRAVO'),(1771,'PUEBLA','XICOTEPEC'),(1772,'PUEBLA','XICOTLAN'),(1773,'PUEBLA','XIUTETELCO'),(1774,'PUEBLA','XOCHIAPULCO'),(1775,'PUEBLA','XOCHILTEPEC'),(1776,'PUEBLA','XOCHITLAN TODOS SANTOS'),(1777,'PUEBLA','XOCHITLAN DE VICENTE SUAREZ'),(1778,'PUEBLA','YAONAHUAC'),(1779,'PUEBLA','YEHUALTEPEC'),(1780,'PUEBLA','ZACAPALA'),(1781,'PUEBLA','ZACAPOAXTLA'),(1782,'PUEBLA','ZACATLAN'),(1783,'PUEBLA','ZAPOTITLAN DE MENDEZ'),(1784,'PUEBLA','ZAPOTITLAN'),(1785,'PUEBLA','ZARAGOZA'),(1786,'PUEBLA','ZAUTLA'),(1787,'PUEBLA','ZIHUATEUTLA'),(1788,'PUEBLA','ZINACATEPEC'),(1789,'PUEBLA','ZONGOZOTLA'),(1790,'PUEBLA','ZOQUIAPAN'),(1791,'PUEBLA','ZOQUITLAN'),(1792,'QUINTANA ROO','AMEALCO DE BONFIL'),(1793,'QUINTANA ROO','ARROYO SECO'),(1794,'QUINTANA ROO','CADEREYTA DE MONTES'),(1795,'QUINTANA ROO','COLON'),(1796,'QUINTANA ROO','CORREGIDORA'),(1797,'QUINTANA ROO','EL MARQUES'),(1798,'QUINTANA ROO','EZEQUIEL MONTES'),(1799,'QUINTANA ROO','HUIMILPAN'),(1800,'QUINTANA ROO','JALPAN DE SERRA'),(1801,'QUINTANA ROO','LANDA DE MATAMOROS'),(1802,'QUINTANA ROO','PEDRO ESCOBEDO'),(1803,'QUINTANA ROO','PENAMILLER'),(1804,'QUINTANA ROO','PINAL DE AMOLES'),(1805,'QUINTANA ROO','QUERETARO'),(1806,'QUINTANA ROO','SAN JOAQUIN'),(1807,'QUINTANA ROO','SAN JUAN DEL RIO'),(1808,'QUINTANA ROO','TEQUISQUIAPAN'),(1809,'QUINTANA ROO','TOLIMAN'),(1810,'QUERETARO','BACALAR'),(1811,'QUERETARO','BENITO JUAREZ'),(1812,'QUERETARO','COZUMEL'),(1813,'QUERETARO','FELIPE CARRILLO PUERTO'),(1814,'QUERETARO','ISLA MUJERES'),(1815,'QUERETARO','JOSE MARIA MORELOS'),(1816,'QUERETARO','LAZARO CARDENAS'),(1817,'QUERETARO','OTHON P. BLANCO'),(1818,'QUERETARO','PUERTO MORELOS'),(1819,'QUERETARO','SOLIDARIDAD'),(1820,'QUERETARO','TULUM'),(1821,'SAN LUIS POTOSI','AHUALULCO'),(1822,'SAN LUIS POTOSI','ALAQUINES'),(1823,'SAN LUIS POTOSI','AQUISMON'),(1824,'SAN LUIS POTOSI','ARMADILLO DE LOS INFANTE'),(1825,'SAN LUIS POTOSI','AXTLA DE TERRAZAS'),(1826,'SAN LUIS POTOSI','CARDENAS'),(1827,'SAN LUIS POTOSI','CATORCE'),(1828,'SAN LUIS POTOSI','CEDRAL'),(1829,'SAN LUIS POTOSI','CERRITOS'),(1830,'SAN LUIS POTOSI','CERRO DE SAN PEDRO'),(1831,'SAN LUIS POTOSI','CHARCAS'),(1832,'SAN LUIS POTOSI','CIUDAD FERNANDEZ'),(1833,'SAN LUIS POTOSI','CIUDAD VALLES'),(1834,'SAN LUIS POTOSI','CIUDAD DEL MAIZ'),(1835,'SAN LUIS POTOSI','COXCATLAN'),(1836,'SAN LUIS POTOSI','EBANO'),(1837,'SAN LUIS POTOSI','EL NARANJO'),(1838,'SAN LUIS POTOSI','GUADALCAZAR'),(1839,'SAN LUIS POTOSI','HUEHUETLAN'),(1840,'SAN LUIS POTOSI','LAGUNILLAS'),(1841,'SAN LUIS POTOSI','MATEHUALA'),(1842,'SAN LUIS POTOSI','MATLAPA'),(1843,'SAN LUIS POTOSI','MEXQUITIC DE CARMONA'),(1844,'SAN LUIS POTOSI','MOCTEZUMA'),(1845,'SAN LUIS POTOSI','RAYON'),(1846,'SAN LUIS POTOSI','RIOVERDE'),(1847,'SAN LUIS POTOSI','SALINAS'),(1848,'SAN LUIS POTOSI','SAN ANTONIO'),(1849,'SAN LUIS POTOSI','SAN CIRO DE ACOSTA'),(1850,'SAN LUIS POTOSI','SAN LUIS POTOSI'),(1851,'SAN LUIS POTOSI','SAN MARTIN CHALCHICUAUTLA'),(1852,'SAN LUIS POTOSI','SAN NICOLAS TOLENTINO'),(1853,'SAN LUIS POTOSI','SAN VICENTE TANCUAYALAB'),(1854,'SAN LUIS POTOSI','SANTA CATARINA'),(1855,'SAN LUIS POTOSI','SANTA MARIA DEL RIO'),(1856,'SAN LUIS POTOSI','SANTO DOMINGO'),(1857,'SAN LUIS POTOSI','SOLEDAD DE GRACIANO SANCHEZ'),(1858,'SAN LUIS POTOSI','TAMASOPO'),(1859,'SAN LUIS POTOSI','TAMAZUNCHALE'),(1860,'SAN LUIS POTOSI','TAMPACAN'),(1861,'SAN LUIS POTOSI','TAMPAMOLON CORONA'),(1862,'SAN LUIS POTOSI','TAMUIN'),(1863,'SAN LUIS POTOSI','TANCANHUITZ'),(1864,'SAN LUIS POTOSI','TANLAJAS'),(1865,'SAN LUIS POTOSI','TANQUIAN DE ESCOBEDO'),(1866,'SAN LUIS POTOSI','TIERRA NUEVA'),(1867,'SAN LUIS POTOSI','VANEGAS'),(1868,'SAN LUIS POTOSI','VENADO'),(1869,'SAN LUIS POTOSI','VILLA HIDALGO'),(1870,'SAN LUIS POTOSI','VILLA JUAREZ'),(1871,'SAN LUIS POTOSI','VILLA DE ARISTA'),(1872,'SAN LUIS POTOSI','VILLA DE ARRIAGA'),(1873,'SAN LUIS POTOSI','VILLA DE GUADALUPE'),(1874,'SAN LUIS POTOSI','VILLA DE RAMOS'),(1875,'SAN LUIS POTOSI','VILLA DE REYES'),(1876,'SAN LUIS POTOSI','VILLA DE LA PAZ'),(1877,'SAN LUIS POTOSI','XILITLA'),(1878,'SAN LUIS POTOSI','ZARAGOZA'),(1879,'SINALOA','AHOME'),(1880,'SINALOA','ANGOSTURA'),(1881,'SINALOA','BADIRAGUATO'),(1882,'SINALOA','CHOIX'),(1883,'SINALOA','CONCORDIA'),(1884,'SINALOA','COSALA'),(1885,'SINALOA','CULIACAN'),(1886,'SINALOA','EL FUERTE'),(1887,'SINALOA','ELOTA'),(1888,'SINALOA','ESCUINAPA'),(1889,'SINALOA','GUASAVE'),(1890,'SINALOA','MAZATLAN'),(1891,'SINALOA','MOCORITO'),(1892,'SINALOA','NAVOLATO'),(1893,'SINALOA','ROSARIO'),(1894,'SINALOA','SALVADOR ALVARADO'),(1895,'SINALOA','SAN IGNACIO'),(1896,'SINALOA','SINALOA'),(1897,'SONORA','ACONCHI'),(1898,'SONORA','AGUA PRIETA'),(1899,'SONORA','ALAMOS'),(1900,'SONORA','ALTAR'),(1901,'SONORA','ARIVECHI'),(1902,'SONORA','ARIZPE'),(1903,'SONORA','ATIL'),(1904,'SONORA','BACADEHUACHI'),(1905,'SONORA','BACANORA'),(1906,'SONORA','BACERAC'),(1907,'SONORA','BACOACHI'),(1908,'SONORA','BACUM'),(1909,'SONORA','BANAMICHI'),(1910,'SONORA','BAVIACORA'),(1911,'SONORA','BAVISPE'),(1912,'SONORA','BENITO JUAREZ'),(1913,'SONORA','BENJAMIN HILL'),(1914,'SONORA','CABORCA'),(1915,'SONORA','CAJEME'),(1916,'SONORA','CANANEA'),(1917,'SONORA','CARBO'),(1918,'SONORA','CUCURPE'),(1919,'SONORA','CUMPAS'),(1920,'SONORA','DIVISADEROS'),(1921,'SONORA','EMPALME'),(1922,'SONORA','ETCHOJOA'),(1923,'SONORA','FRONTERAS'),(1924,'SONORA','GENERAL PLUTARCO ELIAS CALLES'),(1925,'SONORA','GRANADOS'),(1926,'SONORA','GUAYMAS'),(1927,'SONORA','HERMOSILLO'),(1928,'SONORA','HUACHINERA'),(1929,'SONORA','HUASABAS'),(1930,'SONORA','HUATABAMPO'),(1931,'SONORA','HUEPAC'),(1932,'SONORA','IMURIS'),(1933,'SONORA','LA COLORADA'),(1934,'SONORA','MAGDALENA'),(1935,'SONORA','MAZATAN'),(1936,'SONORA','MOCTEZUMA'),(1937,'SONORA','NACO'),(1938,'SONORA','NACORI CHICO'),(1939,'SONORA','NACOZARI DE GARCIA'),(1940,'SONORA','NAVOJOA'),(1941,'SONORA','NOGALES'),(1942,'SONORA','ONAVAS'),(1943,'SONORA','OPODEPE'),(1944,'SONORA','OQUITOA'),(1945,'SONORA','PITIQUITO'),(1946,'SONORA','PUERTO PENASCO'),(1947,'SONORA','QUIRIEGO'),(1948,'SONORA','RAYON'),(1949,'SONORA','ROSARIO'),(1950,'SONORA','SAHUARIPA'),(1951,'SONORA','SAN FELIPE DE JESUS'),(1952,'SONORA','SAN IGNACIO RIO MUERTO'),(1953,'SONORA','SAN JAVIER'),(1954,'SONORA','SAN LUIS RIO COLORADO'),(1955,'SONORA','SAN MIGUEL DE HORCASITAS'),(1956,'SONORA','SAN PEDRO DE LA CUEVA'),(1957,'SONORA','SANTA ANA'),(1958,'SONORA','SANTA CRUZ'),(1959,'SONORA','SARIC'),(1960,'SONORA','SOYOPA'),(1961,'SONORA','SUAQUI GRANDE'),(1962,'SONORA','TEPACHE'),(1963,'SONORA','TRINCHERAS'),(1964,'SONORA','TUBUTAMA'),(1965,'SONORA','URES'),(1966,'SONORA','VILLA HIDALGO'),(1967,'SONORA','VILLA PESQUEIRA'),(1968,'SONORA','YECORA'),(1969,'TABASCO','BALANCAN'),(1970,'TABASCO','CARDENAS'),(1971,'TABASCO','CENTLA'),(1972,'TABASCO','CENTRO'),(1973,'TABASCO','COMALCALCO'),(1974,'TABASCO','CUNDUACAN'),(1975,'TABASCO','EMILIANO ZAPATA'),(1976,'TABASCO','HUIMANGUILLO'),(1977,'TABASCO','JALAPA'),(1978,'TABASCO','JALPA DE MENDEZ'),(1979,'TABASCO','JONUTA'),(1980,'TABASCO','MACUSPANA'),(1981,'TABASCO','NACAJUCA'),(1982,'TABASCO','PARAISO'),(1983,'TABASCO','TACOTALPA'),(1984,'TABASCO','TEAPA'),(1985,'TABASCO','TENOSIQUE'),(1986,'TAMAULIPAS','ABASOLO'),(1987,'TAMAULIPAS','ALDAMA'),(1988,'TAMAULIPAS','ALTAMIRA'),(1989,'TAMAULIPAS','ANTIGUO MORELOS'),(1990,'TAMAULIPAS','BURGOS'),(1991,'TAMAULIPAS','BUSTAMANTE'),(1992,'TAMAULIPAS','CAMARGO'),(1993,'TAMAULIPAS','CASAS'),(1994,'TAMAULIPAS','CIUDAD MADERO'),(1995,'TAMAULIPAS','CRUILLAS'),(1996,'TAMAULIPAS','EL MANTE'),(1997,'TAMAULIPAS','GOMEZ FARIAS'),(1998,'TAMAULIPAS','GONZALEZ'),(1999,'TAMAULIPAS','GUEMEZ'),(2000,'TAMAULIPAS','GUERRERO'),(2001,'TAMAULIPAS','GUSTAVO DIAZ ORDAZ'),(2002,'TAMAULIPAS','HIDALGO'),(2003,'TAMAULIPAS','JAUMAVE'),(2004,'TAMAULIPAS','JIMENEZ'),(2005,'TAMAULIPAS','LLERA'),(2006,'TAMAULIPAS','MAINERO'),(2007,'TAMAULIPAS','MATAMOROS'),(2008,'TAMAULIPAS','MENDEZ'),(2009,'TAMAULIPAS','MIER'),(2010,'TAMAULIPAS','MIGUEL ALEMAN'),(2011,'TAMAULIPAS','MIQUIHUANA'),(2012,'TAMAULIPAS','NUEVO LAREDO'),(2013,'TAMAULIPAS','NUEVO MORELOS'),(2014,'TAMAULIPAS','OCAMPO'),(2015,'TAMAULIPAS','PADILLA'),(2016,'TAMAULIPAS','PALMILLAS'),(2017,'TAMAULIPAS','REYNOSA'),(2018,'TAMAULIPAS','RIO BRAVO'),(2019,'TAMAULIPAS','SAN CARLOS'),(2020,'TAMAULIPAS','SAN FERNANDO'),(2021,'TAMAULIPAS','SAN NICOLAS'),(2022,'TAMAULIPAS','SOTO LA MARINA'),(2023,'TAMAULIPAS','TAMPICO'),(2024,'TAMAULIPAS','TULA'),(2025,'TAMAULIPAS','VALLE HERMOSO'),(2026,'TAMAULIPAS','VICTORIA'),(2027,'TAMAULIPAS','VILLAGRAN'),(2028,'TAMAULIPAS','XICOTENCATL'),(2029,'TLAXCALA','ACUAMANALA DE MIGUEL HIDALGO'),(2030,'TLAXCALA','AMAXAC DE GUERRERO'),(2031,'TLAXCALA','APETATITLAN DE ANTONIO CARVAJAL'),(2032,'TLAXCALA','APIZACO'),(2033,'TLAXCALA','ATLANGATEPEC'),(2034,'TLAXCALA','ATLTZAYANCA'),(2035,'TLAXCALA','BENITO JUAREZ'),(2036,'TLAXCALA','CALPULALPAN'),(2037,'TLAXCALA','CHIAUTEMPAN'),(2038,'TLAXCALA','CONTLA DE JUAN CUAMATZI'),(2039,'TLAXCALA','CUAPIAXTLA'),(2040,'TLAXCALA','CUAXOMULCO'),(2041,'TLAXCALA','EL CARMEN TEQUEXQUITLA'),(2042,'TLAXCALA','EMILIANO ZAPATA'),(2043,'TLAXCALA','ESPANITA'),(2044,'TLAXCALA','HUAMANTLA'),(2045,'TLAXCALA','HUEYOTLIPAN'),(2046,'TLAXCALA','IXTACUIXTLA DE MARIANO MATAMOROS'),(2047,'TLAXCALA','IXTENCO'),(2048,'TLAXCALA','LA MAGDALENA TLALTELULCO'),(2049,'TLAXCALA','LAZARO CARDENAS'),(2050,'TLAXCALA','MAZATECOCHCO DE JOSE MARIA MORELOS'),(2051,'TLAXCALA','MUNOZ DE DOMINGO ARENAS'),(2052,'TLAXCALA','NANACAMILPA DE MARIANO ARISTA'),(2053,'TLAXCALA','NATIVITAS'),(2054,'TLAXCALA','PANOTLA'),(2055,'TLAXCALA','PAPALOTLA DE XICOHTENCATL'),(2056,'TLAXCALA','SAN DAMIAN TEXOLOC'),(2057,'TLAXCALA','SAN FRANCISCO TETLANOHCAN'),(2058,'TLAXCALA','SAN JERONIMO ZACUALPAN'),(2059,'TLAXCALA','SAN JOSE TEACALCO'),(2060,'TLAXCALA','SAN JUAN HUACTZINCO'),(2061,'TLAXCALA','SAN LORENZO AXOCOMANITLA'),(2062,'TLAXCALA','SAN LUCAS TECOPILCO'),(2063,'TLAXCALA','SAN PABLO DEL MONTE'),(2064,'TLAXCALA','SANCTORUM DE LAZARO CARDENAS'),(2065,'TLAXCALA','SANTA ANA NOPALUCAN'),(2066,'TLAXCALA','SANTA APOLONIA TEACALCO'),(2067,'TLAXCALA','SANTA CATARINA AYOMETLA'),(2068,'TLAXCALA','SANTA CRUZ QUILEHTLA'),(2069,'TLAXCALA','SANTA CRUZ TLAXCALA'),(2070,'TLAXCALA','SANTA ISABEL XILOXOXTLA'),(2071,'TLAXCALA','TENANCINGO'),(2072,'TLAXCALA','TEOLOCHOLCO'),(2073,'TLAXCALA','TEPETITLA DE LARDIZABAL'),(2074,'TLAXCALA','TEPEYANCO'),(2075,'TLAXCALA','TERRENATE'),(2076,'TLAXCALA','TETLA DE LA SOLIDARIDAD'),(2077,'TLAXCALA','TETLATLAHUCA'),(2078,'TLAXCALA','TLAXCALA'),(2079,'TLAXCALA','TLAXCO'),(2080,'TLAXCALA','TOCATLAN'),(2081,'TLAXCALA','TOTOLAC'),(2082,'TLAXCALA','TZOMPANTEPEC'),(2083,'TLAXCALA','XALOZTOC'),(2084,'TLAXCALA','XALTOCAN'),(2085,'TLAXCALA','XICOHTZINCO'),(2086,'TLAXCALA','YAUHQUEMEHCAN'),(2087,'TLAXCALA','ZACATELCO'),(2088,'TLAXCALA','ZILTLALTEPEC DE TRINIDAD SANCHEZ SANTOS'),(2089,'VERACRUZ','ACAJETE'),(2090,'VERACRUZ','ACATLAN'),(2091,'VERACRUZ','ACAYUCAN'),(2092,'VERACRUZ','ACTOPAN'),(2093,'VERACRUZ','ACULA'),(2094,'VERACRUZ','ACULTZINGO'),(2095,'VERACRUZ','AGUA DULCE'),(2096,'VERACRUZ','ALAMO TEMAPACHE'),(2097,'VERACRUZ','ALPATLAHUAC'),(2098,'VERACRUZ','ALTO LUCERO DE GUTIERREZ BARRIOS'),(2099,'VERACRUZ','ALTOTONGA'),(2100,'VERACRUZ','ALVARADO'),(2101,'VERACRUZ','AMATITLAN'),(2102,'VERACRUZ','AMATLAN DE LOS REYES'),(2103,'VERACRUZ','ANGEL R. CABADA'),(2104,'VERACRUZ','APAZAPAN'),(2105,'VERACRUZ','AQUILA'),(2106,'VERACRUZ','ASTACINGA'),(2107,'VERACRUZ','ATLAHUILCO'),(2108,'VERACRUZ','ATOYAC'),(2109,'VERACRUZ','ATZACAN'),(2110,'VERACRUZ','ATZALAN'),(2111,'VERACRUZ','AYAHUALULCO'),(2112,'VERACRUZ','BANDERILLA'),(2113,'VERACRUZ','BENITO JUAREZ'),(2114,'VERACRUZ','BOCA DEL RIO'),(2115,'VERACRUZ','CALCAHUALCO'),(2116,'VERACRUZ','CAMARON DE TEJEDA'),(2117,'VERACRUZ','CAMERINO Z. MENDOZA'),(2118,'VERACRUZ','CARLOS A. CARRILLO'),(2119,'VERACRUZ','CARRILLO PUERTO'),(2120,'VERACRUZ','CASTILLO DE TEAYO'),(2121,'VERACRUZ','CATEMACO'),(2122,'VERACRUZ','CAZONES DE HERRERA'),(2123,'VERACRUZ','CERRO AZUL'),(2124,'VERACRUZ','CHACALTIANGUIS'),(2125,'VERACRUZ','CHALMA'),(2126,'VERACRUZ','CHICONAMEL'),(2127,'VERACRUZ','CHICONQUIACO'),(2128,'VERACRUZ','CHICONTEPEC'),(2129,'VERACRUZ','CHINAMECA'),(2130,'VERACRUZ','CHINAMPA DE GOROSTIZA'),(2131,'VERACRUZ','CHOCAMAN'),(2132,'VERACRUZ','CHONTLA'),(2133,'VERACRUZ','CHUMATLAN'),(2134,'VERACRUZ','CITLALTEPETL'),(2135,'VERACRUZ','COACOATZINTLA'),(2136,'VERACRUZ','COAHUITLAN'),(2137,'VERACRUZ','COATEPEC'),(2138,'VERACRUZ','COATZACOALCOS'),(2139,'VERACRUZ','COATZINTLA'),(2140,'VERACRUZ','COETZALA'),(2141,'VERACRUZ','COLIPA'),(2142,'VERACRUZ','COMAPA'),(2143,'VERACRUZ','CORDOBA'),(2144,'VERACRUZ','COSAMALOAPAN DE CARPIO'),(2145,'VERACRUZ','COSAUTLAN DE CARVAJAL'),(2146,'VERACRUZ','COSCOMATEPEC'),(2147,'VERACRUZ','COSOLEACAQUE'),(2148,'VERACRUZ','COTAXTLA'),(2149,'VERACRUZ','COXQUIHUI'),(2150,'VERACRUZ','COYUTLA'),(2151,'VERACRUZ','CUICHAPA'),(2152,'VERACRUZ','CUITLAHUAC'),(2153,'VERACRUZ','EL HIGO'),(2154,'VERACRUZ','EMILIANO ZAPATA'),(2155,'VERACRUZ','ESPINAL'),(2156,'VERACRUZ','FILOMENO MATA'),(2157,'VERACRUZ','FORTIN'),(2158,'VERACRUZ','GUTIERREZ ZAMORA'),(2159,'VERACRUZ','HIDALGOTITLAN'),(2160,'VERACRUZ','HUATUSCO'),(2161,'VERACRUZ','HUAYACOCOTLA'),(2162,'VERACRUZ','HUEYAPAN DE OCAMPO'),(2163,'VERACRUZ','HUILOAPAN DE CUAUHTEMOC'),(2164,'VERACRUZ','IGNACIO DE LA LLAVE'),(2165,'VERACRUZ','ILAMATLAN'),(2166,'VERACRUZ','ISLA'),(2167,'VERACRUZ','IXCATEPEC'),(2168,'VERACRUZ','IXHUACAN DE LOS REYES'),(2169,'VERACRUZ','IXHUATLAN DE MADERO'),(2170,'VERACRUZ','IXHUATLAN DEL CAFE'),(2171,'VERACRUZ','IXHUATLAN DEL SURESTE'),(2172,'VERACRUZ','IXHUATLANCILLO'),(2173,'VERACRUZ','IXMATLAHUACAN'),(2174,'VERACRUZ','IXTACZOQUITLAN'),(2175,'VERACRUZ','JALACINGO'),(2176,'VERACRUZ','JALCOMULCO'),(2177,'VERACRUZ','JALTIPAN'),(2178,'VERACRUZ','JAMAPA'),(2179,'VERACRUZ','JESUS CARRANZA'),(2180,'VERACRUZ','JILOTEPEC'),(2181,'VERACRUZ','JOSE AZUETA'),(2182,'VERACRUZ','JUAN RODRIGUEZ CLARA'),(2183,'VERACRUZ','JUCHIQUE DE FERRER'),(2184,'VERACRUZ','LA ANTIGUA'),(2185,'VERACRUZ','LA PERLA'),(2186,'VERACRUZ','LANDERO Y COSS'),(2187,'VERACRUZ','LAS CHOAPAS'),(2188,'VERACRUZ','LAS MINAS'),(2189,'VERACRUZ','LAS VIGAS DE RAMIREZ'),(2190,'VERACRUZ','LERDO DE TEJADA'),(2191,'VERACRUZ','LOS REYES'),(2192,'VERACRUZ','MAGDALENA'),(2193,'VERACRUZ','MALTRATA'),(2194,'VERACRUZ','MANLIO FABIO ALTAMIRANO'),(2195,'VERACRUZ','MARIANO ESCOBEDO'),(2196,'VERACRUZ','MARTINEZ DE LA TORRE'),(2197,'VERACRUZ','MECATLAN'),(2198,'VERACRUZ','MECAYAPAN'),(2199,'VERACRUZ','MEDELLIN DE BRAVO'),(2200,'VERACRUZ','MIAHUATLAN'),(2201,'VERACRUZ','MINATITLAN'),(2202,'VERACRUZ','MISANTLA'),(2203,'VERACRUZ','MIXTLA DE ALTAMIRANO'),(2204,'VERACRUZ','MOLOACAN'),(2205,'VERACRUZ','NANCHITAL DE LAZARO CARDENAS DEL RIO'),(2206,'VERACRUZ','NAOLINCO'),(2207,'VERACRUZ','NARANJAL'),(2208,'VERACRUZ','NARANJOS AMATLAN'),(2209,'VERACRUZ','NAUTLA'),(2210,'VERACRUZ','NOGALES'),(2211,'VERACRUZ','OLUTA'),(2212,'VERACRUZ','OMEALCA'),(2213,'VERACRUZ','ORIZABA'),(2214,'VERACRUZ','OTATITLAN'),(2215,'VERACRUZ','OTEAPAN'),(2216,'VERACRUZ','OZULUAMA DE MASCARENAS'),(2217,'VERACRUZ','PAJAPAN'),(2218,'VERACRUZ','PANUCO'),(2219,'VERACRUZ','PAPANTLA'),(2220,'VERACRUZ','PASO DE OVEJAS'),(2221,'VERACRUZ','PASO DEL MACHO'),(2222,'VERACRUZ','PEROTE'),(2223,'VERACRUZ','PLATON SANCHEZ'),(2224,'VERACRUZ','PLAYA VICENTE'),(2225,'VERACRUZ','POZA RICA DE HIDALGO'),(2226,'VERACRUZ','PUEBLO VIEJO'),(2227,'VERACRUZ','PUENTE NACIONAL'),(2228,'VERACRUZ','RAFAEL DELGADO'),(2229,'VERACRUZ','RAFAEL LUCIO'),(2230,'VERACRUZ','RIO BLANCO'),(2231,'VERACRUZ','SALTABARRANCA'),(2232,'VERACRUZ','SAN ANDRES TENEJAPAN'),(2233,'VERACRUZ','SAN ANDRES TUXTLA'),(2234,'VERACRUZ','SAN JUAN EVANGELISTA'),(2235,'VERACRUZ','SAN RAFAEL'),(2236,'VERACRUZ','SANTIAGO SOCHIAPAN'),(2237,'VERACRUZ','SANTIAGO TUXTLA'),(2238,'VERACRUZ','SAYULA DE ALEMAN'),(2239,'VERACRUZ','SOCHIAPA'),(2240,'VERACRUZ','SOCONUSCO'),(2241,'VERACRUZ','SOLEDAD ATZOMPA'),(2242,'VERACRUZ','SOLEDAD DE DOBLADO'),(2243,'VERACRUZ','SOTEAPAN'),(2244,'VERACRUZ','TAMALIN'),(2245,'VERACRUZ','TAMIAHUA'),(2246,'VERACRUZ','TAMPICO ALTO'),(2247,'VERACRUZ','TANCOCO'),(2248,'VERACRUZ','TANTIMA'),(2249,'VERACRUZ','TANTOYUCA'),(2250,'VERACRUZ','TATAHUICAPAN DE JUAREZ'),(2251,'VERACRUZ','TATATILA'),(2252,'VERACRUZ','TECOLUTLA'),(2253,'VERACRUZ','TEHUIPANGO'),(2254,'VERACRUZ','TEMPOAL'),(2255,'VERACRUZ','TENAMPA'),(2256,'VERACRUZ','TENOCHTITLAN'),(2257,'VERACRUZ','TEOCELO'),(2258,'VERACRUZ','TEPATLAXCO'),(2259,'VERACRUZ','TEPETLAN'),(2260,'VERACRUZ','TEPETZINTLA'),(2261,'VERACRUZ','TEQUILA'),(2262,'VERACRUZ','TEXCATEPEC'),(2263,'VERACRUZ','TEXHUACAN'),(2264,'VERACRUZ','TEXISTEPEC'),(2265,'VERACRUZ','TEZONAPA'),(2266,'VERACRUZ','TIERRA BLANCA'),(2267,'VERACRUZ','TIHUATLAN'),(2268,'VERACRUZ','TLACHICHILCO'),(2269,'VERACRUZ','TLACOJALPAN'),(2270,'VERACRUZ','TLACOLULAN'),(2271,'VERACRUZ','TLACOTALPAN'),(2272,'VERACRUZ','TLACOTEPEC DE MEJIA'),(2273,'VERACRUZ','TLALIXCOYAN'),(2274,'VERACRUZ','TLALNELHUAYOCAN'),(2275,'VERACRUZ','TLALTETELA'),(2276,'VERACRUZ','TLAPACOYAN'),(2277,'VERACRUZ','TLAQUILPA'),(2278,'VERACRUZ','TLILAPAN'),(2279,'VERACRUZ','TOMATLAN'),(2280,'VERACRUZ','TONAYAN'),(2281,'VERACRUZ','TOTUTLA'),(2282,'VERACRUZ','TRES VALLES'),(2283,'VERACRUZ','TUXPAN'),(2284,'VERACRUZ','TUXTILLA'),(2285,'VERACRUZ','URSULO GALVAN'),(2286,'VERACRUZ','UXPANAPA'),(2287,'VERACRUZ','VEGA DE ALATORRE'),(2288,'VERACRUZ','VERACRUZ'),(2289,'VERACRUZ','VILLA ALDAMA'),(2290,'VERACRUZ','XALAPA'),(2291,'VERACRUZ','XICO'),(2292,'VERACRUZ','XOXOCOTLA'),(2293,'VERACRUZ','YANGA'),(2294,'VERACRUZ','YECUATLA'),(2295,'VERACRUZ','ZACUALPAN'),(2296,'VERACRUZ','ZARAGOZA'),(2297,'VERACRUZ','ZENTLA'),(2298,'VERACRUZ','ZONGOLICA'),(2299,'VERACRUZ','ZONTECOMATLAN DE LOPEZ Y FUENTES'),(2300,'VERACRUZ','ZOZOCOLCO DE HIDALGO'),(2301,'YUCATAN','ABALA'),(2302,'YUCATAN','ACANCEH'),(2303,'YUCATAN','AKIL'),(2304,'YUCATAN','BACA'),(2305,'YUCATAN','BOKOBA'),(2306,'YUCATAN','BUCTZOTZ'),(2307,'YUCATAN','CACALCHEN'),(2308,'YUCATAN','CALOTMUL'),(2309,'YUCATAN','CANSAHCAB'),(2310,'YUCATAN','CANTAMAYEC'),(2311,'YUCATAN','CELESTUN'),(2312,'YUCATAN','CENOTILLO'),(2313,'YUCATAN','CHACSINKIN'),(2314,'YUCATAN','CHANKOM'),(2315,'YUCATAN','CHAPAB'),(2316,'YUCATAN','CHEMAX'),(2317,'YUCATAN','CHICHIMILA'),(2318,'YUCATAN','CHICXULUB PUEBLO'),(2319,'YUCATAN','CHIKINDZONOT'),(2320,'YUCATAN','CHOCHOLA'),(2321,'YUCATAN','CHUMAYEL'),(2322,'YUCATAN','CONKAL'),(2323,'YUCATAN','CUNCUNUL'),(2324,'YUCATAN','CUZAMA'),(2325,'YUCATAN','DZAN'),(2326,'YUCATAN','DZEMUL'),(2327,'YUCATAN','DZIDZANTUN'),(2328,'YUCATAN','DZILAM GONZALEZ'),(2329,'YUCATAN','DZILAM DE BRAVO'),(2330,'YUCATAN','DZITAS'),(2331,'YUCATAN','DZONCAUICH'),(2332,'YUCATAN','ESPITA'),(2333,'YUCATAN','HALACHO'),(2334,'YUCATAN','HOCABA'),(2335,'YUCATAN','HOCTUN'),(2336,'YUCATAN','HOMUN'),(2337,'YUCATAN','HUHI'),(2338,'YUCATAN','HUNUCMA'),(2339,'YUCATAN','IXIL'),(2340,'YUCATAN','IZAMAL'),(2341,'YUCATAN','KANASIN'),(2342,'YUCATAN','KANTUNIL'),(2343,'YUCATAN','KAUA'),(2344,'YUCATAN','KINCHIL'),(2345,'YUCATAN','KOPOMA'),(2346,'YUCATAN','MAMA'),(2347,'YUCATAN','MANI'),(2348,'YUCATAN','MAXCANU'),(2349,'YUCATAN','MAYAPAN'),(2350,'YUCATAN','MERIDA'),(2351,'YUCATAN','MOCOCHA'),(2352,'YUCATAN','MOTUL'),(2353,'YUCATAN','MUNA'),(2354,'YUCATAN','MUXUPIP'),(2355,'YUCATAN','OPICHEN'),(2356,'YUCATAN','OXKUTZCAB'),(2357,'YUCATAN','PANABA'),(2358,'YUCATAN','PETO'),(2359,'YUCATAN','PROGRESO'),(2360,'YUCATAN','QUINTANA ROO'),(2361,'YUCATAN','RIO LAGARTOS'),(2362,'YUCATAN','SACALUM'),(2363,'YUCATAN','SAMAHIL'),(2364,'YUCATAN','SAN FELIPE'),(2365,'YUCATAN','SANAHCAT'),(2366,'YUCATAN','SANTA ELENA'),(2367,'YUCATAN','SEYE'),(2368,'YUCATAN','SINANCHE'),(2369,'YUCATAN','SOTUTA'),(2370,'YUCATAN','SUCILA'),(2371,'YUCATAN','SUDZAL'),(2372,'YUCATAN','SUMA'),(2373,'YUCATAN','TAHDZIU'),(2374,'YUCATAN','TAHMEK'),(2375,'YUCATAN','TEABO'),(2376,'YUCATAN','TECOH'),(2377,'YUCATAN','TEKAL DE VENEGAS'),(2378,'YUCATAN','TEKANTO'),(2379,'YUCATAN','TEKAX'),(2380,'YUCATAN','TEKIT'),(2381,'YUCATAN','TEKOM'),(2382,'YUCATAN','TELCHAC PUEBLO'),(2383,'YUCATAN','TELCHAC PUERTO'),(2384,'YUCATAN','TEMAX'),(2385,'YUCATAN','TEMOZON'),(2386,'YUCATAN','TEPAKAN'),(2387,'YUCATAN','TETIZ'),(2388,'YUCATAN','TEYA'),(2389,'YUCATAN','TICUL'),(2390,'YUCATAN','TIMUCUY'),(2391,'YUCATAN','TINUM'),(2392,'YUCATAN','TIXCACALCUPUL'),(2393,'YUCATAN','TIXKOKOB'),(2394,'YUCATAN','TIXMEHUAC'),(2395,'YUCATAN','TIXPEHUAL'),(2396,'YUCATAN','TIZIMIN'),(2397,'YUCATAN','TUNKAS'),(2398,'YUCATAN','TZUCACAB'),(2399,'YUCATAN','UAYMA'),(2400,'YUCATAN','UCU'),(2401,'YUCATAN','UMAN'),(2402,'YUCATAN','VALLADOLID'),(2403,'YUCATAN','XOCCHEL'),(2404,'YUCATAN','YAXCABA'),(2405,'YUCATAN','YAXKUKUL'),(2406,'YUCATAN','YOBAIN'),(2407,'ZACATECAS','APOZOL'),(2408,'ZACATECAS','APULCO'),(2409,'ZACATECAS','ATOLINGA'),(2410,'ZACATECAS','BENITO JUAREZ'),(2411,'ZACATECAS','CALERA'),(2412,'ZACATECAS','CANITAS DE FELIPE PESCADOR'),(2413,'ZACATECAS','CHALCHIHUITES'),(2414,'ZACATECAS','CONCEPCION DEL ORO'),(2415,'ZACATECAS','CUAUHTEMOC'),(2416,'ZACATECAS','EL PLATEADO DE JOAQUIN AMARO'),(2417,'ZACATECAS','EL SALVADOR'),(2418,'ZACATECAS','FRESNILLO'),(2419,'ZACATECAS','GENARO CODINA'),(2420,'ZACATECAS','GENERAL ENRIQUE ESTRADA'),(2421,'ZACATECAS','GENERAL FRANCISCO R. MURGUIA'),(2422,'ZACATECAS','GENERAL PANFILO NATERA'),(2423,'ZACATECAS','GUADALUPE'),(2424,'ZACATECAS','HUANUSCO'),(2425,'ZACATECAS','JALPA'),(2426,'ZACATECAS','JEREZ'),(2427,'ZACATECAS','JIMENEZ DEL TEUL'),(2428,'ZACATECAS','JUAN ALDAMA'),(2429,'ZACATECAS','JUCHIPILA'),(2430,'ZACATECAS','LORETO'),(2431,'ZACATECAS','LUIS MOYA'),(2432,'ZACATECAS','MAZAPIL'),(2433,'ZACATECAS','MELCHOR OCAMPO'),(2434,'ZACATECAS','MEZQUITAL DEL ORO'),(2435,'ZACATECAS','MIGUEL AUZA'),(2436,'ZACATECAS','MOMAX'),(2437,'ZACATECAS','MONTE ESCOBEDO'),(2438,'ZACATECAS','MORELOS'),(2439,'ZACATECAS','MOYAHUA DE ESTRADA'),(2440,'ZACATECAS','NOCHISTLAN DE MEJIA'),(2441,'ZACATECAS','NORIA DE ANGELES'),(2442,'ZACATECAS','OJOCALIENTE'),(2443,'ZACATECAS','PANUCO'),(2444,'ZACATECAS','PINOS'),(2445,'ZACATECAS','RIO GRANDE'),(2446,'ZACATECAS','SAIN ALTO'),(2447,'ZACATECAS','SANTA MARIA DE LA PAZ'),(2448,'ZACATECAS','SOMBRERETE'),(2449,'ZACATECAS','SUSTICACAN'),(2450,'ZACATECAS','TABASCO'),(2451,'ZACATECAS','TEPECHITLAN'),(2452,'ZACATECAS','TEPETONGO'),(2453,'ZACATECAS','TEUL DE GONZALEZ ORTEGA'),(2454,'ZACATECAS','TLALTENANGO DE SANCHEZ ROMAN'),(2455,'ZACATECAS','TRANCOSO'),(2456,'ZACATECAS','TRINIDAD GARCIA DE LA CADENA'),(2457,'ZACATECAS','VALPARAISO'),(2458,'ZACATECAS','VETAGRANDE'),(2459,'ZACATECAS','VILLA GARCIA'),(2460,'ZACATECAS','VILLA GONZALEZ ORTEGA'),(2461,'ZACATECAS','VILLA HIDALGO'),(2462,'ZACATECAS','VILLA DE COS'),(2463,'ZACATECAS','VILLANUEVA'),(2464,'ZACATECAS','ZACATECAS'),(2465,'INTERNACIONAL','FUERA DE MEXICO');
/*!40000 ALTER TABLE `tb_localidades` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_materialessubidoscurso`
--

DROP TABLE IF EXISTS `tb_materialessubidoscurso`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_materialessubidoscurso` (
  `IdMaterialSubido` int NOT NULL AUTO_INCREMENT,
  `NombreArchivo` varchar(100) NOT NULL,
  `Archivo` longblob NOT NULL,
  `Extension` varchar(32) NOT NULL,
  `FechaEnviado` varchar(100) NOT NULL,
  `IdUsuario` int NOT NULL,
  `IdCurso` int NOT NULL,
  `Activo` bit(1) NOT NULL DEFAULT b'1',
  PRIMARY KEY (`IdMaterialSubido`),
  KEY `fk_IdUsuarioMaterialSubido_INDEX` (`IdUsuario`),
  KEY `fk_IdCursoMaterialSubido_INDEX` (`IdCurso`),
  CONSTRAINT `fk_IdCursoMaterialSubido` FOREIGN KEY (`IdCurso`) REFERENCES `tb_tareas` (`IdCurso`),
  CONSTRAINT `fk_IdUsuarioMaterialSubido` FOREIGN KEY (`IdUsuario`) REFERENCES `tb_usuarios` (`IdUsuario`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_materialessubidoscurso`
--

LOCK TABLES `tb_materialessubidoscurso` WRITE;
/*!40000 ALTER TABLE `tb_materialessubidoscurso` DISABLE KEYS */;
/*!40000 ALTER TABLE `tb_materialessubidoscurso` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_mensajeschat`
--

DROP TABLE IF EXISTS `tb_mensajeschat`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_mensajeschat` (
  `IdMensaje` int NOT NULL AUTO_INCREMENT,
  `Mensaje` text NOT NULL,
  `FechaEnvio` varchar(100) NOT NULL,
  `IdUsuarioEmisor` int NOT NULL,
  `Archivo` longblob,
  `Extension` varchar(32) DEFAULT NULL,
  `IdChat` int NOT NULL,
  PRIMARY KEY (`IdMensaje`),
  KEY `fk_IdUsuarioEmisorMensajeTexto_INDEX` (`IdUsuarioEmisor`),
  KEY `fk_IdChatMensajeTexto_INDEX` (`IdChat`),
  CONSTRAINT `fk_IdChatMensajeTexto01` FOREIGN KEY (`IdChat`) REFERENCES `tb_chatspersonales` (`IdChat`),
  CONSTRAINT `fk_IdUsuarioEmisorMensajeTexto01` FOREIGN KEY (`IdUsuarioEmisor`) REFERENCES `tb_usuarios` (`IdUsuario`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_mensajeschat`
--

LOCK TABLES `tb_mensajeschat` WRITE;
/*!40000 ALTER TABLE `tb_mensajeschat` DISABLE KEYS */;
INSERT INTO `tb_mensajeschat` VALUES (1,'Hola','mi√©rcoles 27/04/2022 19:55:05',1,NULL,'',1),(2,'Hola','mi√©rcoles 27/04/2022 19:59:07',1,NULL,'',1),(3,'Hi','mi√©rcoles 27/04/2022 19:59:30',1,NULL,'',1),(4,'Saludos','mi√©rcoles 27/04/2022 20:17:15',1,NULL,'',1),(5,'Saludos','mi√©rcoles 27/04/2022 20:18:08',1,NULL,'',1),(6,'Saludos','mi√©rcoles 27/04/2022 20:19:56',1,NULL,'',1);
/*!40000 ALTER TABLE `tb_mensajeschat` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_mensajescurso`
--

DROP TABLE IF EXISTS `tb_mensajescurso`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_mensajescurso` (
  `IdMensaje` int NOT NULL AUTO_INCREMENT,
  `Mensaje` text NOT NULL,
  `FechaEnvio` varchar(100) NOT NULL,
  `IdUsuarioEmisor` int NOT NULL,
  `Archivo` longblob,
  `Extension` varchar(32) DEFAULT NULL,
  `IdCurso` int NOT NULL,
  PRIMARY KEY (`IdMensaje`),
  KEY `fk_IdUsuarioEmisorMensajeTexto_INDEX` (`IdUsuarioEmisor`),
  KEY `fk_IdCursoEmisorMensajeTexto_INDEX` (`IdCurso`),
  CONSTRAINT `fk_IdCursoEmisorMensajeTexto` FOREIGN KEY (`IdCurso`) REFERENCES `tb_cursos` (`IdCurso`),
  CONSTRAINT `fk_IdUsuarioEmisorMensajeTexto00` FOREIGN KEY (`IdUsuarioEmisor`) REFERENCES `tb_usuarios` (`IdUsuario`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_mensajescurso`
--

LOCK TABLES `tb_mensajescurso` WRITE;
/*!40000 ALTER TABLE `tb_mensajescurso` DISABLE KEYS */;
/*!40000 ALTER TABLE `tb_mensajescurso` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_mensajesgrupo`
--

DROP TABLE IF EXISTS `tb_mensajesgrupo`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_mensajesgrupo` (
  `IdMensaje` int NOT NULL AUTO_INCREMENT,
  `Mensaje` text NOT NULL,
  `FechaEnvio` varchar(100) NOT NULL,
  `IdUsuarioEmisor` int NOT NULL,
  `Archivo` longblob,
  `Extension` varchar(32) DEFAULT NULL,
  `IdGrupo` int NOT NULL,
  PRIMARY KEY (`IdMensaje`),
  KEY `fk_IdUsuarioEmisorMensajeTexto_INDEX` (`IdUsuarioEmisor`),
  KEY `fk_IdGrupoMensajeTexto_idx` (`IdGrupo`),
  CONSTRAINT `fk_IdGrupoMensajeTexto` FOREIGN KEY (`IdGrupo`) REFERENCES `tb_grupos` (`IdGrupo`),
  CONSTRAINT `fk_IdUsuarioEmisorMensajeTexto011` FOREIGN KEY (`IdUsuarioEmisor`) REFERENCES `tb_usuarios` (`IdUsuario`),
  CONSTRAINT `fk_tb_mensajesgrupos_tb_grupos1` FOREIGN KEY (`IdGrupo`) REFERENCES `tb_grupos` (`IdGrupo`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_mensajesgrupo`
--

LOCK TABLES `tb_mensajesgrupo` WRITE;
/*!40000 ALTER TABLE `tb_mensajesgrupo` DISABLE KEYS */;
/*!40000 ALTER TABLE `tb_mensajesgrupo` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_mensajespregunta`
--

DROP TABLE IF EXISTS `tb_mensajespregunta`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_mensajespregunta` (
  `IdMensaje` int NOT NULL AUTO_INCREMENT,
  `Mensaje` text NOT NULL,
  `FechaEnvio` varchar(100) NOT NULL,
  `Archivo` longblob,
  `Extension` varchar(32) DEFAULT NULL,
  `IdPregunta` int NOT NULL,
  `IdUsuarioEmisor` int NOT NULL,
  PRIMARY KEY (`IdMensaje`),
  KEY `fk_IdUsuarioEmisorMensajeTexto_INDEX` (`IdUsuarioEmisor`),
  KEY `fk_IdPreguntaMensajeTexto_INDEX` (`IdPregunta`),
  CONSTRAINT `fk_IdPreguntaMensajeTexto010` FOREIGN KEY (`IdPregunta`) REFERENCES `tb_preguntas` (`IdPregunta`),
  CONSTRAINT `fk_IdUsuarioEmisorMensajeTexto010` FOREIGN KEY (`IdUsuarioEmisor`) REFERENCES `tb_usuarios` (`IdUsuario`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_mensajespregunta`
--

LOCK TABLES `tb_mensajespregunta` WRITE;
/*!40000 ALTER TABLE `tb_mensajespregunta` DISABLE KEYS */;
/*!40000 ALTER TABLE `tb_mensajespregunta` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_mensajestarea`
--

DROP TABLE IF EXISTS `tb_mensajestarea`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_mensajestarea` (
  `IdMensaje` int NOT NULL AUTO_INCREMENT,
  `Mensaje` text NOT NULL,
  `FechaEnvio` varchar(100) NOT NULL,
  `IdUsuarioEmisor` int NOT NULL,
  `Archivo` longblob,
  `Extension` varchar(32) DEFAULT NULL,
  `IdTarea` int NOT NULL,
  PRIMARY KEY (`IdMensaje`),
  KEY `fk_IdUsuarioEmisorMensajeTexto_INDEX` (`IdUsuarioEmisor`),
  KEY `fk_IdTareaEmisorMensajeTexto_INDEX` (`IdTarea`),
  CONSTRAINT `fk_IdTareaEmisorMensajeTexto` FOREIGN KEY (`IdTarea`) REFERENCES `tb_tareas` (`IdTarea`),
  CONSTRAINT `fk_IdUsuarioEmisorMensajeTexto0` FOREIGN KEY (`IdUsuarioEmisor`) REFERENCES `tb_usuarios` (`IdUsuario`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_mensajestarea`
--

LOCK TABLES `tb_mensajestarea` WRITE;
/*!40000 ALTER TABLE `tb_mensajestarea` DISABLE KEYS */;
/*!40000 ALTER TABLE `tb_mensajestarea` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_preguntas`
--

DROP TABLE IF EXISTS `tb_preguntas`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_preguntas` (
  `IdPregunta` int NOT NULL AUTO_INCREMENT,
  `Pregunta` varchar(200) NOT NULL,
  `Descripcion` text NOT NULL,
  `FechaCreacion` varchar(100) NOT NULL,
  `Estatus` enum('Abierta','Solucionada') NOT NULL,
  `IdUsuario` int NOT NULL,
  `Activo` bit(1) NOT NULL DEFAULT b'1',
  PRIMARY KEY (`IdPregunta`),
  KEY `fk_IdUsuarioDuda_INDEX` (`IdUsuario`),
  CONSTRAINT `fk_IdUsuarioDuda` FOREIGN KEY (`IdUsuario`) REFERENCES `tb_usuarios` (`IdUsuario`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_preguntas`
--

LOCK TABLES `tb_preguntas` WRITE;
/*!40000 ALTER TABLE `tb_preguntas` DISABLE KEYS */;
/*!40000 ALTER TABLE `tb_preguntas` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_preguntascuestionarios`
--

DROP TABLE IF EXISTS `tb_preguntascuestionarios`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_preguntascuestionarios` (
  `IdPregunta` int NOT NULL AUTO_INCREMENT,
  `Pregunta` varchar(100) NOT NULL,
  PRIMARY KEY (`IdPregunta`)
) ENGINE=InnoDB AUTO_INCREMENT=61 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_preguntascuestionarios`
--

LOCK TABLES `tb_preguntascuestionarios` WRITE;
/*!40000 ALTER TABLE `tb_preguntascuestionarios` DISABLE KEYS */;
INSERT INTO `tb_preguntascuestionarios` VALUES (1,'Mi aprendizaje se centra en asuntos que me interesan'),(2,'Lo que aprendo es importante para mi pr√°ctica profesional'),(3,'Aprendo c√≥mo mejorar mi pr√°ctica profesional'),(4,'Lo que aprendo tiene relaci√≥n con mi pr√°ctica profesional'),(5,'Pienso cr√≠ticamente sobre la forma que aprendo'),(6,'Pienso cr√≠ticamente sobre mis propias ideas'),(7,'Pienso cr√≠ticamente sobre las ideas de otros estudiantes'),(8,'Pienso cr√≠ticamente sobre las ideas que aprendo'),(9,'Explico mis ideas a otros estudiantes'),(10,'Pido a otros estudiantes que me expliquen sus ideas'),(11,'Otros estudiantes me piden que explique mis ideas'),(12,'Otros estudiantes responden a mis ideas'),(13,'El profesor incita a la reflexi√≥n'),(14,'El profesor anima a la participaci√≥n'),(15,'El profesor ejemplifica las buenas disertaciones'),(16,'El profesor ejemplifica la auto reflexi√≥n cr√≠tica'),(17,'Recomendaria este curso a alg√∫n otro estudiante'),(18,'Volveria a tomar otro curso con el mismo profesor'),(19,'El profesor se dirigio con respeto hacia los estudiantes'),(20,'Lo aprendido en el curso encajaba con las tem√°ticas del mismo'),(41,'Mi aprendizaje se centra en asuntos que me interesan'),(42,'Lo que aprendo es importante para mi pr√°ctica profesional'),(43,'Aprendo c√≥mo mejorar mi pr√°ctica profesional'),(44,'Lo que aprendo tiene relaci√≥n con mi pr√°ctica profesional'),(45,'Pienso cr√≠ticamente sobre la forma que aprendo'),(46,'Pienso cr√≠ticamente sobre mis propias ideas'),(47,'Pienso cr√≠ticamente sobre las ideas de otros estudiantes'),(48,'Pienso cr√≠ticamente sobre las ideas que aprendo'),(49,'Explico mis ideas a otros estudiantes'),(50,'Pido a otros estudiantes que me expliquen sus ideas'),(51,'Otros estudiantes me piden que explique mis ideas'),(52,'Otros estudiantes responden a mis ideas'),(53,'El profesor incita a la reflexi√≥n'),(54,'El profesor anima a la participaci√≥n'),(55,'El profesor ejemplifica las buenas disertaciones'),(56,'El profesor ejemplifica la auto reflexi√≥n cr√≠tica'),(57,'Recomendaria este curso a alg√∫n otro estudiante'),(58,'Volveria a tomar otro curso con el mismo profesor'),(59,'El profesor se dirigio con respeto hacia los estudiantes'),(60,'Lo aprendido en el curso encajaba con las tem√°ticas del mismo');
/*!40000 ALTER TABLE `tb_preguntascuestionarios` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_retroalimentaciones`
--

DROP TABLE IF EXISTS `tb_retroalimentaciones`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_retroalimentaciones` (
  `IdRetroalimentacion` int NOT NULL AUTO_INCREMENT,
  `Retroalimentacion` text NOT NULL,
  `NombreArchivo` varchar(256) DEFAULT NULL,
  `Archivo` longblob,
  `Extension` varchar(32) DEFAULT NULL,
  `FechaEnvio` varchar(100) NOT NULL,
  `IdTarea` int NOT NULL,
  `IdUsuario` int NOT NULL,
  PRIMARY KEY (`IdRetroalimentacion`),
  KEY `fk_RetroalimentacionesTareas_INDEX` (`IdTarea`) /*!80000 INVISIBLE */,
  KEY `fk_RetroalimentacionesUsuarios_INDEX` (`IdUsuario`),
  CONSTRAINT `fk_RetroalimentacionesTareas` FOREIGN KEY (`IdTarea`) REFERENCES `tb_tareas` (`IdTarea`),
  CONSTRAINT `fk_RetroalimentacionesUsuarios` FOREIGN KEY (`IdUsuario`) REFERENCES `tb_usuarios` (`IdUsuario`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_retroalimentaciones`
--

LOCK TABLES `tb_retroalimentaciones` WRITE;
/*!40000 ALTER TABLE `tb_retroalimentaciones` DISABLE KEYS */;
/*!40000 ALTER TABLE `tb_retroalimentaciones` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_sesiones`
--

DROP TABLE IF EXISTS `tb_sesiones`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_sesiones` (
  `IdSesion` int NOT NULL AUTO_INCREMENT,
  `Uuid` varchar(64) NOT NULL,
  `Dispositivo` varchar(50) NOT NULL,
  `Fabricante` varchar(30) NOT NULL,
  `UltimaConexion` varchar(100) NOT NULL,
  `DireccionIP` varchar(100) NOT NULL,
  `IdUsuario` int NOT NULL,
  `Activo` bit(1) NOT NULL DEFAULT b'1',
  PRIMARY KEY (`IdSesion`),
  KEY `fk_IdUsuarioSesion_INDEX` (`IdUsuario`),
  CONSTRAINT `fk_IdUsuarioSesion` FOREIGN KEY (`IdUsuario`) REFERENCES `tb_usuarios` (`IdUsuario`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_sesiones`
--

LOCK TABLES `tb_sesiones` WRITE;
/*!40000 ALTER TABLE `tb_sesiones` DISABLE KEYS */;
INSERT INTO `tb_sesiones` VALUES (1,'C6CC0026-C2C2-11E8-B5F5-E86A64292601','Windows 10','LENOVO','mi√©rcoles 27/04/2022 19:37:55','177.241.33.200',1,_binary ''),(2,'C6CC0026-C2C2-11E8-B5F5-E86A64292601','Windows 10','LENOVO','mi√©rcoles 27/04/2022 19:40:07','177.241.33.200',1,_binary ''),(3,'C6CC0026-C2C2-11E8-B5F5-E86A64292601','Windows 10','LENOVO','mi√©rcoles 27/04/2022 19:50:27','177.241.33.200',1,_binary '\0'),(4,'C6CC0026-C2C2-11E8-B5F5-E86A64292601','Windows 10','LENOVO','mi√©rcoles 27/04/2022 20:02:21','177.241.33.200',1,_binary '\0'),(5,'C6CC0026-C2C2-11E8-B5F5-E86A64292601','Windows 10','LENOVO','mi√©rcoles 27/04/2022 20:20:02','177.241.33.200',1,_binary '\0');
/*!40000 ALTER TABLE `tb_sesiones` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_tareas`
--

DROP TABLE IF EXISTS `tb_tareas`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_tareas` (
  `IdTarea` int NOT NULL AUTO_INCREMENT,
  `Nombre` varchar(150) NOT NULL,
  `Descripcion` text NOT NULL,
  `FechaCreacion` varchar(100) NOT NULL,
  `FechaEntrega` varchar(100) NOT NULL,
  `IdCurso` int NOT NULL,
  `Activo` bit(1) NOT NULL DEFAULT b'1',
  PRIMARY KEY (`IdTarea`),
  KEY `fk_IdCursoTarea_INDEX` (`IdCurso`),
  CONSTRAINT `fk_IdCursoTarea` FOREIGN KEY (`IdCurso`) REFERENCES `tb_cursos` (`IdCurso`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_tareas`
--

LOCK TABLES `tb_tareas` WRITE;
/*!40000 ALTER TABLE `tb_tareas` DISABLE KEYS */;
/*!40000 ALTER TABLE `tb_tareas` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_tareascursousuarios`
--

DROP TABLE IF EXISTS `tb_tareascursousuarios`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_tareascursousuarios` (
  `IdTarea` int NOT NULL,
  `IdUsuario` int NOT NULL,
  `Estatus` enum('PENDIENTE','ENTREGADA','ENTREGADA CON RETRASO','SIN ENTREGA','CALIFICADA','ABIERTA','CERRADA') NOT NULL,
  `Calificacion` double DEFAULT NULL,
  `FechaCalificacion` varchar(100) DEFAULT NULL,
  `Puntualidad` double DEFAULT NULL,
  `FechaSubida` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`IdTarea`,`IdUsuario`),
  KEY `IdTareaUsuario_INDEX` (`IdUsuario`) /*!80000 INVISIBLE */,
  KEY `IdUsuarioTarea_INDEX` (`IdTarea`),
  CONSTRAINT `IdTareaUsuario` FOREIGN KEY (`IdUsuario`) REFERENCES `tb_usuarios` (`IdUsuario`),
  CONSTRAINT `IdUsuarioTarea` FOREIGN KEY (`IdTarea`) REFERENCES `tb_tareas` (`IdTarea`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_tareascursousuarios`
--

LOCK TABLES `tb_tareascursousuarios` WRITE;
/*!40000 ALTER TABLE `tb_tareascursousuarios` DISABLE KEYS */;
/*!40000 ALTER TABLE `tb_tareascursousuarios` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_tareaspendientesgrupos`
--

DROP TABLE IF EXISTS `tb_tareaspendientesgrupos`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_tareaspendientesgrupos` (
  `IdTareaPendiente` int NOT NULL AUTO_INCREMENT,
  `Nombre` varchar(100) NOT NULL,
  `Descripcion` text,
  `FechaCreacion` varchar(100) NOT NULL,
  `FechaFinalizacion` varchar(100) NOT NULL,
  `Estatus` enum('Pendiente','Realizando','Finalizada') NOT NULL DEFAULT 'Pendiente',
  `IdUsuarioACargo` int NOT NULL,
  `IdGrupo` int NOT NULL,
  PRIMARY KEY (`IdTareaPendiente`),
  KEY `fk_IdUsuarioTareaPendiente_INDEX` (`IdUsuarioACargo`) /*!80000 INVISIBLE */,
  KEY `fk_IdGrupoTareaPendiente_INDEX` (`IdGrupo`),
  CONSTRAINT `fk_IdGrupoTareaPendiente` FOREIGN KEY (`IdGrupo`) REFERENCES `tb_grupos` (`IdGrupo`),
  CONSTRAINT `fk_IdUsuarioTareaPendiente` FOREIGN KEY (`IdUsuarioACargo`) REFERENCES `tb_usuarios` (`IdUsuario`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_tareaspendientesgrupos`
--

LOCK TABLES `tb_tareaspendientesgrupos` WRITE;
/*!40000 ALTER TABLE `tb_tareaspendientesgrupos` DISABLE KEYS */;
/*!40000 ALTER TABLE `tb_tareaspendientesgrupos` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_tematicas`
--

DROP TABLE IF EXISTS `tb_tematicas`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_tematicas` (
  `IdTematica` int NOT NULL AUTO_INCREMENT,
  `Tematica` varchar(100) NOT NULL,
  `Clase` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`IdTematica`)
) ENGINE=InnoDB AUTO_INCREMENT=361 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_tematicas`
--

LOCK TABLES `tb_tematicas` WRITE;
/*!40000 ALTER TABLE `tb_tematicas` DISABLE KEYS */;
INSERT INTO `tb_tematicas` VALUES (1,'ABOGAC√çA','ESTUDIOS JURIDICOS'),(2,'ACTUARIA','ECONOMIA Y SOCIEDAD'),(3,'ADMINISTRACI√ìN','GESTION EMPRESARIAL'),(4,'ADMINISTRACI√ìN AGRARIA','AGRONOMIA'),(5,'ADMINISTRACI√ìN AGROPECUARIA','AGRONOMIA'),(6,'ADMINISTRACI√ìN DE EMPRESAS','GESTION EMPRESARIAL'),(7,'ADMINISTRACI√ìN DE NEGOCIOS','GESTION EMPRESARIAL'),(8,'ADMINISTRACI√ìN DE ORGANIZACIONES DE SALUD','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(9,'ADMINISTRACI√ìN DE POL√çTICAS P√öBLICAS','ECONOMIA Y SOCIEDAD'),(10,'ADMINISTRACI√ìN DE POL√çTICAS P√öBLICAS LOCALES','ECONOMIA Y SOCIEDAD'),(11,'ADMINISTRACI√ìN DE SISTEMAS','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(12,'ADMINISTRACI√ìN EDUCATIVA','CIENCIAS DE LA EDUCACION'),(13,'ADMINISTRACI√ìN FINANCIERA','GESTION EMPRESARIAL'),(14,'ADMINISTRACI√ìN GUBERNAMENTAL','GESTION EMPRESARIAL'),(15,'ADMINISTRACI√ìN P√öBLICA','GESTION EMPRESARIAL'),(16,'ADMINISTRACI√ìN URBANA','GESTION EMPRESARIAL'),(17,'ADUANAS','GESTION EMPRESARIAL'),(18,'AGROBIOTECNOLOG√çA','AGRONOMIA'),(19,'AGRONEGOCIOS','AGRONOMIA'),(20,'ALIMENTOS Y BEBIDAS','DISCIPLINAS CLINICAS'),(21,'AN√ÅLISIS DE SISTEMAS','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(22,'AN√ÅLISIS DE SISTEMAS INFORM√ÅTICOS','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(23,'ANESTESIOLOG√çA PEDI√ÅTRICA','DISCIPLINAS CLINICAS'),(24,'ANTROPOLOG√çA','ESTUDIOS HISTORICOS Y HUMANOS'),(25,'ANTROPOLOG√çA F√çSICA','ESTUDIOS HISTORICOS Y HUMANOS'),(26,'ARCHIVONOM√çA','ESTUDIOS DE LA CULTURA'),(27,'ARQUEOLOG√çA','ESTUDIOS HISTORICOS Y HUMANOS'),(28,'ARQUITECTURA','IMAGEN Y SONIDO'),(29,'ARTE','ARTES VISUALES'),(30,'ARTES AUDIOVISUALES','ARTES VISUALES'),(31,'ARTES ESC√âNICAS PARA LA EXPRESI√ìN DANC√çSTICA','ARTES ESCENICAS'),(32,'ARTES ESC√âNICAS PARA LA EXPRESI√ìN TEATRAL','ARTES ESCENICAS'),(33,'ARTES VISUALES PARA LA EXPRESI√ìN FOTOGR√ÅFICA','ARTES VISUALES'),(34,'ARTES VISUALES PARA LA EXPRESI√ìN PL√ÅSTICA','ARTES VISUALES'),(35,'ASISTENTE DIRECTIVO','GESTION EMPRESARIAL'),(36,'ASISTENTE EJECUTIVO','GESTION EMPRESARIAL'),(37,'AUDIOLOG√çA','DISCIPLINAS CLINICAS'),(38,'BIBLIOTECOLOG√çA','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(39,'BIOINGENIER√çA','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(40,'BIOLOG√çA','CIENCIAS BASICAS'),(41,'BIOLOG√çA EXPERIMENTAL','BIOLOGIA'),(42,'BIOLOG√çA MARINA','BIOLOGIA'),(43,'BIOM√âDICA','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(44,'BIOMEDICINA B√ÅSICA','CIENCIAS BASICAS'),(45,'BIOMEDICINA EXPERIMENTAL','CIENCIAS BASICAS'),(46,'BIOQU√çMICA DIAGNOSTICA','CIENCIAS BASICAS'),(47,'BIOTECNOLOG√çA','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(48,'CARDIOLOG√çA PEDI√ÅTRICA','DISCIPLINAS CLINICAS'),(49,'CIENCIA DE DATOS','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(50,'CIENCIA DE EDIFICACI√ìN','INGENIERIAS'),(51,'CIENCIA DE LOS ALIMENTOS','DISCIPLINAS CLINICAS'),(52,'CIENCIA Y TECNOLOG√çA','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(53,'CIENCIAS ADMINISTRATIVAS','GESTION EMPRESARIAL'),(54,'CIENCIAS AGRARIAS','AGRONOMIA'),(55,'CIENCIAS AGROPECUARIAS','AGRONOMIA'),(56,'CIENCIAS APLICADAS','CIENCIAS BASICAS'),(57,'CIENCIAS BIOL√ìGICAS','BIOLOGIA'),(58,'CIENCIAS BIOM√âDICAS','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(59,'CIENCIAS CONTABLES','CONTADURIA'),(60,'CIENCIAS DE AUDITORIA','CONTADURIA'),(61,'CIENCIAS DE LA COMUNICACI√ìN','INGENIERIAS'),(62,'CIENCIAS DE LA EDUCACI√ìN','CIENCIAS DE LA EDUCACION'),(63,'CIENCIAS DE LA EMPRESA','GESTION EMPRESARIAL'),(64,'CIENCIAS DE LA INFORM√ÅTICA','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(65,'CIENCIAS DE LA PRODUCCI√ìN','GESTION EMPRESARIAL'),(66,'CIENCIAS DE LA SALUD','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(67,'CIENCIAS DEL ARTE','IMAGEN Y SONIDO'),(68,'CIENCIAS DEL DEPORTE','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(69,'CIENCIAS DIPLOM√ÅTICAS','ESTUDIOS POLITICOS Y SOCIALES'),(70,'CIENCIAS ECON√ìMICAS','ECONOMIA Y SOCIEDAD'),(71,'CIENCIAS EMPRESARIALES','GESTION EMPRESARIAL'),(72,'CIENCIAS FARMAC√âUTICAS','CIENCIAS BASICAS'),(73,'CIENCIAS FORESTALES','INGENIERIAS'),(74,'CIENCIAS HUMANAS','ESTUDIOS HISTORICOS Y HUMANOS'),(75,'CIENCIAS INFORM√ÅTICAS','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(76,'CIENCIAS JUR√çDICAS','ESTUDIOS JURIDICOS'),(77,'CIENCIAS M√âDICAS','DISCIPLINAS CLINICAS'),(78,'CIENCIAS POL√çTICAS','ESTUDIOS POLITICOS Y SOCIALES'),(79,'CIENCIAS QU√çMICAS','CIENCIAS BASICAS'),(80,'CIENCIAS QUIMICOBIOLOGICAS','CIENCIAS BASICAS'),(81,'CIENCIAS SOCIALES','ESTUDIOS POLITICOS Y SOCIALES'),(82,'CIENCIAS TECNOLOG√çCAS','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(83,'CIENCIAS VETERINARIAS','CIENCIAS VETERINARIAS'),(84,'CIENCIAS Y ARTE','IMAGEN Y SONIDO'),(85,'CINEMATOGRAF√çA','ARTES VISUALES'),(86,'CIRUG√çA PL√ÅSTICA EST√âTICA','DISCIPLINAS CLINICAS'),(87,'CIRUG√çA PL√ÅSTICA RECONSTRUCTIVA','DISCIPLINAS CLINICAS'),(88,'CIRUJANO DENTISTA','DISCIPLINAS CLINICAS'),(89,'COMERCIALIZACI√ìN','GESTION EMPRESARIAL'),(90,'COMERCIO EXTERIOR','GESTION EMPRESARIAL'),(91,'COMERCIO INTERNACIONAL','GESTION EMPRESARIAL'),(92,'COMPOSICI√ìN','IMAGEN Y SONIDO'),(93,'COMPUTACI√ìN','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(94,'COMUNICACI√ìN AUDIOVISUAL','ESTUDIOS DE LA CULTURA'),(95,'COMUNICACI√ìN HUMANA','ESTUDIOS DE LA CULTURA'),(96,'COMUNICACI√ìN P√öBLICA','ESTUDIOS DE LA CULTURA'),(97,'COMUNICACI√ìN SOCIAL','ESTUDIOS DE LA CULTURA'),(98,'COMUNICACI√ìN VISUAL','ESTUDIOS DE LA CULTURA'),(99,'CONSTRUCCI√ìN','INGENIERIAS'),(100,'CONTABILIDAD','CONTADURIA'),(101,'CONTABILIDAD FINANCIERA','CONTADURIA'),(102,'CONTABILIDAD FISCAL','CONTADURIA'),(103,'CONTABILIDAD P√öBLICA','CONTADURIA'),(104,'CONTADOR PRIVADO','CONTADURIA'),(105,'CONTADOR P√öBLICO','CONTADURIA'),(106,'CONTADOR P√öBLICO NACIONAL','CONTADURIA'),(107,'CONTADUR√çA','CONTADURIA'),(108,'CONTADUR√çA PRIVADA','CONTADURIA'),(109,'CONTADUR√çA P√öBLICA','CONTADURIA'),(110,'CRIMINAL√çSTICA','ESTUDIOS POLITICOS Y SOCIALES'),(111,'CRIMINOLOG√çA','ESTUDIOS POLITICOS Y SOCIALES'),(112,'CULTURA F√çSICA Y DEPORTES','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(113,'DERECHO','ESTUDIOS JURIDICOS'),(114,'DERECHO ADMINISTRATIVO','ECONOMIA Y SOCIEDAD'),(115,'DESARROLLO DEL PRODUCTO','INGENIERIAS'),(116,'DESARROLLO EDUCATIVO','CIENCIAS DE LA EDUCACION'),(117,'DESARROLLO HUMANO','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(118,'DESARROLLO RURAL','AGRONOMIA'),(119,'DID√ÅCTICA DEL FRANC√âS COMO LENGUA EXTRANJERA','ESTUDIOS HISTORICOS Y HUMANOS'),(120,'DIET√âTICA','DISCIPLINAS CLINICAS'),(121,'DIRECCI√ìN DE PROYECTOS','GESTION EMPRESARIAL'),(122,'DISE√ëO','IMAGEN Y SONIDO'),(123,'DISE√ëO ARQUITECT√ìNICO','IMAGEN Y SONIDO'),(124,'DISE√ëO DE ARTESAN√çAS','IMAGEN Y SONIDO'),(125,'DISE√ëO DE INTERIORES Y AMBIENTACI√ìN','IMAGEN Y SONIDO'),(126,'DISE√ëO DE MODAS','IMAGEN Y SONIDO'),(127,'DISE√ëO GR√ÅFICO','IMAGEN Y SONIDO'),(128,'DISE√ëO INDUSTRIAL','IMAGEN Y SONIDO'),(129,'DISE√ëO PARA LA COMUNICACI√ìN GR√ÅFICA','IMAGEN Y SONIDO'),(130,'DOCENCIA DEL INGL√âS COMO LENGUA EXTRANJERA','ESTUDIOS HISTORICOS Y HUMANOS'),(131,'ECONOM√çA','ECONOMIA Y SOCIEDAD'),(132,'EDUCACI√ìN (ABIERTA Y A DISTANCIA)','CIENCIAS DE LA EDUCACION'),(133,'EDUCACI√ìN ESPECIAL','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(134,'EDUCACI√ìN ESPECIAL DE AUDICI√ìN','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(135,'EDUCACI√ìN ESPECIAL DE LENGUAJE','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(136,'EDUCACI√ìN PARA LA SALUD','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(137,'EDUCACI√ìN PREESCOLAR','CIENCIAS DE LA EDUCACION'),(138,'EJECUTIVO BILING√úE','GESTION EMPRESARIAL'),(139,'ELECTRICIDAD','INGENIERIAS'),(140,'ELECTRICISTA','INGENIERIAS'),(141,'ELECTR√ìNICA','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(142,'ENFERMERA QUIR√öRGICA','DISCIPLINAS CLINICAS'),(143,'ENFERMER√çA','DISCIPLINAS CLINICAS'),(144,'ENFERMER√çA DEL NEONATO','DISCIPLINAS CLINICAS'),(145,'ENFERMER√çA GENERAL','DISCIPLINAS CLINICAS'),(146,'ENFERMER√çA INFANTIL','DISCIPLINAS CLINICAS'),(147,'ENFERMER√çA PEDI√ÅTRICA','DISCIPLINAS CLINICAS'),(148,'ENFERMER√çA PERINATAL','DISCIPLINAS CLINICAS'),(149,'ESPECIALISTA EN ORTODONCIA','DISCIPLINAS CLINICAS'),(150,'ESTAD√çSTICA','CIENCIAS BASICAS'),(151,'ESTUDIOS √ÅRABES','ESTUDIOS DE ESTADO Y SOCIEDAD'),(152,'ESTUDIOS ASIA ORIENTAL','ESTUDIOS DE ESTADO Y SOCIEDAD'),(153,'ESTUDIOS DE LA INFORMACI√ìN','ESTUDIOS DE ESTADO Y SOCIEDAD'),(154,'ESTUDIOS FRANCESES','ESTUDIOS DE ESTADO Y SOCIEDAD'),(155,'ESTUDIOS INGLESES','ESTUDIOS DE ESTADO Y SOCIEDAD'),(156,'ESTUDIOS ISL√ÅMICOS','ESTUDIOS DE ESTADO Y SOCIEDAD'),(157,'ESTUDIOS LIBERALES','ESTUDIOS DE ESTADO Y SOCIEDAD'),(158,'ESTUDIOS POL√çTICOS Y GOBIERNO','ESTUDIOS POLITICOS Y SOCIALES'),(159,'FARMACIA','CIENCIAS BASICAS'),(160,'FILOLOG√çA CL√ÅSICA','ESTUDIOS HISTORICOS Y HUMANOS'),(161,'FILOLOG√çA HISP√ÅNICA','ESTUDIOS HISTORICOS Y HUMANOS'),(162,'FILOSOF√çA','ESTUDIOS HISTORICOS Y HUMANOS'),(163,'FISIATR√çA','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(164,'F√çSICA','CIENCIAS BASICAS'),(165,'FISIOTERAPIA','DISCIPLINAS BASICAS'),(166,'FONIATR√çA','DISCIPLINAS CLINICAS'),(167,'FOTOGR√ÅFIA','ARTES VISUALES'),(168,'GASTRONOM√çA','CIENCIAS BASICAS'),(169,'GEN√âTICA PERINATAL','DISCIPLINAS BASICAS'),(170,'GEOGRAF√çA','ESTUDIOS HISTORICOS Y HUMANOS'),(171,'GERONTOLOG√çA','DISCIPLINAS BASICAS'),(172,'GESTI√ìN DE HOTELER√çA','GESTION EMPRESARIAL'),(173,'GESTI√ìN DE TURISMO','GESTION EMPRESARIAL'),(174,'GESTI√ìN DEL TERRITORIO','ESTUDIOS HISTORICOS Y HUMANOS'),(175,'GESTI√ìN DIRECTIVA EN SALUD','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(176,'GESTI√ìN Y ECONOM√çA AMBIENTAL','ECONOMIA Y SOCIEDAD'),(177,'HEMATOLOG√çA PEDI√ÅTRICA','DISCIPLINAS CLINICAS'),(178,'HISTORIA','ESTUDIOS HISTORICOS Y HUMANOS'),(179,'HISTORIA DEL ARTE','ESTUDIOS HISTORICOS Y HUMANOS'),(180,'HOTELER√çA','GESTION EMPRESARIAL'),(181,'HUMANIDADES','ESTUDIOS HISTORICOS Y HUMANOS'),(182,'INDUSTRIA','GESTION EMPRESARIAL'),(183,'INFORM√ÅTICA','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(184,'INFORM√ÅTICA ADMINISTRATIVA','GESTION EMPRESARIAL'),(185,'INFORM√ÅTICA EMPRESARIAL','GESTION EMPRESARIAL'),(186,'INFORM√ÅTICA FINANCIERA','GESTION EMPRESARIAL'),(187,'INGENIER√çA AEROESPACIAL','INGENIERIAS'),(188,'INGENIER√çA AGR√çCOLA','AGRONOMIA'),(189,'INGENIER√çA AGROINDUSTRIAL','AGRONOMIA'),(190,'INGENIER√çA AGRON√ìMICA','AGRONOMIA'),(191,'INGENIER√çA AGROPECUARIA','AGRONOMIA'),(192,'INGENIER√çA AMBIENTAL','INGENIERIAS'),(193,'INGENIER√çA BIOM√âDICA','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(194,'INGENIER√çA BIOQU√çMICA','CIENCIAS BASICAS'),(195,'INGENIER√çA CIVIL','INGENIERIAS'),(196,'INGENIER√çA COMERCIAL','GESTION EMPRESARIAL'),(197,'INGENIER√çA DE ALIMENTOS','INGENIERIAS'),(198,'INGENIER√çA DE LA ENERG√çA','INGENIERIAS'),(199,'INGENIER√çA DE LA SALUD','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(200,'INGENIER√çA DE LAS TECNOLOG√çAS DE TELECOMUNICACI√ìN','INGENIERIAS'),(201,'INGENIER√çA DE MATERIALES','INGENIERIAS'),(202,'INGENIER√çA DE PROCESOS Y COMERCIO INTERNACIONAL','GESTION EMPRESARIAL'),(203,'INGENIER√çA DEL SOFTWARE','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(204,'INGENIER√çA EL√âCTRICA','INGENIERIAS'),(205,'INGENIER√çA ELECTROMEC√ÅNICA','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(206,'INGENIER√çA ELECTR√ìNICA','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(207,'INGENIER√çA ELECTR√ìNICA INDUSTRIAL','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(208,'INGENIER√çA EMPRESARIAL','INGENIERIAS'),(209,'INGENIER√çA EN ADMINISTRACI√ìN INDUSTRIAL','INGENIERIAS'),(210,'INGENIER√çA EN AGROINDUSTRIA','AGRONOMIA'),(211,'INGENIER√çA EN ALIMENTOS Y BIOTECNOLOG√çA','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(212,'INGENIER√çA EN BIOTECNOLOG√çA','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(213,'INGENIER√çA EN CIENCIAS COMPUTACIONALES','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(214,'INGENIER√çA EN COMPUTACI√ìN','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(215,'INGENIER√çA EN COMUNICACIONES','INGENIERIAS'),(216,'INGENIER√çA EN COMUNICACIONES Y ELECTR√ìNICA','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(217,'INGENIER√çA EN ELECTRICIDAD','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(218,'INGENIER√çA EN ELECTR√ìNICA','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(219,'INGENIER√çA EN ELECTR√ìNICA Y COMPUTACI√ìN','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(220,'INGENIERIA EN GESTI√ìN EMPRESARIAL','GESTION EMPRESARIAL'),(221,'INGENIER√çA EN NANOTECNOLOG√çA','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(222,'INGENIER√çA EN NEGOCIOS','GESTION EMPRESARIAL'),(223,'INGENIER√çA EN OBRAS Y SERVICIOS','INGENIERIAS'),(224,'INGENIER√çA EN RECURSOS NATURALES Y AGROPECURIOS','AGRONOMIA'),(225,'INGENIER√çA EN SISTEMAS','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(226,'INGENIER√çA EN SISTEMAS DE PRODUCCI√ìN','INGENIERIAS'),(227,'INGENIER√çA EN SISTEMAS PECUARIOS','AGRONOMIA'),(228,'INGENIER√çA EN TELEM√ÅTICA','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(229,'INGENIER√çA EN VIDEOJUEGOS','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(230,'INGENIERIA EN ZOOTECNIA','CIENCIAS VETERINARIAS'),(231,'INGENIER√çA FORESTAL','INGENIERIAS'),(232,'INGENIER√çA GEOGR√ÅFICA','INGENIERIAS'),(233,'INGENIER√çA INDUSTRIAL','INGENIERIAS'),(234,'INGENIER√çA INFORM√ÅTICA','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(235,'INGENIER√çA INFORM√ÅTICA EMPRESARIAL','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(236,'INGENIER√çA MEC√ÅNICA','INGENIERIAS'),(237,'INGENIER√çA MEC√ÅNICA EL√âCTRICA','INGENIERIAS'),(238,'INGENIER√çA MECATR√ìNICA','INGENIERIAS'),(239,'INGENIER√çA QU√çMICA','INGENIERIAS'),(240,'INGENIER√çA SISTEMAS COMPUTACIONALES','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(241,'INGENIER√çA TOPOGR√ÅFICA','INGENIERIAS'),(242,'INGENIER√çA ZOOTECNIA','CIENCIAS VETERINARIAS'),(243,'INGENIERO AGR√ìNOMO','AGRONOMIA'),(244,'INHALOTERAPIA','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(245,'INSTALACIONES EL√âCTRICAS','INGENIERIAS'),(246,'INTELIGENC√çA ARTIFICIAL','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(247,'INTERVENCI√ìN CL√çNICA EN ADOLESCENTES','DISCIPLINAS CLINICAS'),(248,'INTERVENCI√ìN CL√çNICA EN NI√ëOS','DISCIPLINAS CLINICAS'),(249,'INVESTIGACI√ìN DE MERCADOS','GESTION EMPRESARIAL'),(250,'KINESIOLOG√çA','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(251,'LABORATORISTA','CIENCIAS BASICAS'),(252,'LABORATORISTA CL√çNICO','DISCIPLINAS CLINICAS'),(253,'LENGUA','ESTUDIOS HISTORICOS Y HUMANOS'),(254,'LETRAS HISP√ÅNICAS','ESTUDIOS HISTORICOS Y HUMANOS'),(255,'LITERATURA ALEMANA','ESTUDIOS DE LA CULTURA'),(256,'LITERATURA HISP√ÅNICAS','ESTUDIOS DE LA CULTURA'),(257,'MANEJO DE APARATOS DE ELECTRODIAGN√ìSTICO','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(258,'MANTENIMIENTO EL√âCTRICO','INGENIERIAS'),(259,'MANTENIMIENTO INDUSTRIAL','INGENIERIAS'),(260,'M√ÅQUINAS DE COMBUSTI√ìN INTERNA','INGENIERIAS'),(261,'MARKETING','GESTION EMPRESARIAL'),(262,'MATEM√ÅTICAS','CIENCIAS BASICAS'),(263,'MEC√ÅNICA AUTOMOTRIZ','INGENIERIAS'),(264,'MEC√ÅNICA DIESEL','INGENIERIAS'),(265,'MEDICINA','DISCIPLINAS BASICAS'),(266,'MEDICINA VETERINARIA','CIENCIAS VETERINARIAS'),(267,'M√âDICO CIRUJANO','DISCIPLINAS CLINICAS'),(268,'M√âDICO PARTERO','DISCIPLINAS CLINICAS'),(269,'MERCADOTECNIA','GESTION EMPRESARIAL'),(270,'MERCADOTECNIA INTERNACIONAL','GESTION EMPRESARIAL'),(271,'M√öSICA','IMAGEN Y SONIDO'),(272,'NEGOCIOS INTERNACIONALES','GESTION EMPRESARIAL'),(273,'NEONATOLOG√çA','DISCIPLINAS CLINICAS'),(274,'NEUMOLOG√çA PEDI√ÅTRICA','DISCIPLINAS CLINICAS'),(275,'NEUROCIRUG√çA','DISCIPLINAS BASICAS'),(276,'NEUROLING√ú√çSTICA','DISCIPLINAS BASICAS'),(277,'NIVELACI√ìN DE LA ENFERMER√çA','DISCIPLINAS CLINICAS'),(278,'NUTRICI√ìN','DISCIPLINAS CLINICAS'),(279,'NUTRICI√ìN HUMANA','DISCIPLINAS CLINICAS'),(280,'NUTRICI√ìN PEDI√ÅTRICA','DISCIPLINAS CLINICAS'),(281,'OBSTETRICIA','DISCIPLINAS CLINICAS'),(282,'ODONTOLOG√çA','DISCIPLINAS CLINICAS'),(283,'ODONTOPEDIATRIA','DISCIPLINAS CLINICAS'),(284,'√ìPTICA','DISCIPLINAS BASICAS'),(285,'OPTOMETR√çA','DISCIPLINAS BASICAS'),(286,'ORGANIZACI√ìN INDUSTRIAL','INGENIERIAS'),(287,'ORIENTACI√ìN PSICOL√ìGICA','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(288,'OTONEUROLOG√çA','DISCIPLINAS BASICAS'),(289,'OTORRINOLARINGOLOG√çA','DISCIPLINAS CLINICAS'),(290,'PEDAGOG√çA','CIENCIAS DE LA EDUCACION'),(291,'PEDIATR√çA','DISCIPLINAS CLINICAS'),(292,'PERICULTURA','DISCIPLINAS CLINICAS'),(293,'PERIODISMO','ESTUDIOS DE ESTADO Y SOCIEDAD'),(294,'PODOLOG√çA','DISCIPLINAS CLINICAS'),(295,'POLIT√âCNICA','CIENCIAS BASICAS'),(296,'PROGRAMACI√ìN DE VIDEOJUEGOS','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(297,'PROGRAMADOR ANALISTA','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(298,'PROMOCI√ìN DE LA SALUD','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(299,'PROTESISTA DENTAL','DISCIPLINAS CLINICAS'),(300,'PROTOCOLOS DE COMUNICACI√ìN','INGENIERIAS'),(301,'PSICOANAL√çSIS','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(302,'PSICOLOG√çA','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(303,'PSICOLOG√çA DE LA SALUD','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(304,'PSICOLOG√çA EDUCATIVA','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(305,'PSICOLOG√çA EN TERAPIA FAMILIAR','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(306,'PSICOLOG√çA SOCIAL','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(307,'PSICOONCOLOGIA','DISCIPLINAS CLINICAS'),(308,'PSICOPEDAGOG√çA','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(309,'PSICOTERAPIA','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(310,'PSICOTERAPIA BREVE SIST√âMICA','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(311,'PSICOTERAPIA INFANTIL','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(312,'PSICOTERAPIA PSICOANAL√çTICA','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(313,'PUBLICIDAD','GESTION EMPRESARIAL'),(314,'PUERICULTURA','DISCIPLINAS CLINICAS'),(315,'QU√çMICA','CIENCIAS BASICAS'),(316,'QU√çMICA CL√çNICA','DISCIPLINAS CLINICAS'),(317,'QU√çMICA EN ALIMENTOS','CIENCIAS BASICAS'),(318,'QU√çMICA FARMACE√öTICA BIOL√ìGICA','CIENCIAS BASICAS'),(319,'QU√çMICA Y FARMACIA','CIENCIAS BASICAS'),(320,'QU√çMICO BACTERI√ìLOGO PARASIT√ìLOGO','CIENCIAS BASICAS'),(321,'QU√çMICO FARMACE√öTICO BIOL√ìGICO','CIENCIAS BASICAS'),(322,'QU√çMICO FARMAC√âUTICO INDUSTRIAL','CIENCIAS BASICAS'),(323,'QU√çMICO FARMACOBI√ìLOGO','CIENCIAS BASICAS'),(324,'QU√çMICO INDUSTRIAL','CIENCIAS BASICAS'),(325,'QUIROPR√ÅCTICA','DISCIPLINAS CLINICAS'),(326,'RADIOLOG√çA','DISCIPLINAS CLINICAS'),(327,'RADIOLOG√çA E IMAGEN','DISCIPLINAS CLINICAS'),(328,'RECURSOS HUMANOS','GESTION EMPRESARIAL'),(329,'REDES DE COMUNICACI√ìN','INGENIERIAS'),(330,'REHABILITACI√ìN INTEGRAL','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(331,'RELACIONES COMERCIALES','GESTION EMPRESARIAL'),(332,'RELACIONES INTERNACIONALES','GESTION EMPRESARIAL'),(333,'REUMATOLOG√çA PEDI√ÅTRICA','DISCIPLINAS BASICAS'),(334,'ROB√ìTICA','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(335,'SALUD P√öBLICA','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(336,'SECRETARIA EJECUTIVA BILING√úE','GESTION EMPRESARIAL'),(337,'SECRETARIADO','GESTION EMPRESARIAL'),(338,'SECRETARIADO BILING√úE','GESTION EMPRESARIAL'),(339,'SECRETARIADO EN COMPUTACI√ìN','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(340,'SISTEMA EDUCATIVO NACIONAL','CIENCIAS DE LA EDUCACION'),(341,'SISTEMA EN COMPUTACI√ìN ADMINISTRATIVA','GESTION EMPRESARIAL'),(342,'SISTEMAS DE INFORMACI√ìN','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(343,'SISTEMAS INFORM√ÅTICOS','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(344,'SOCIOLOG√çA','ESTUDIOS POLITICOS Y SOCIALES'),(345,'T√âCNICO RADI√ìLOGO','DISCIPLINAS CLINICAS'),(346,'TECNOLOG√çA INFORM√ÅTICA','TECNOLOGIAS PARA LA INTEGRACION CIBER-HUMANA'),(347,'TERAPIA DE LENGUAJE','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(348,'TERAPIA FAMILIAR','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(349,'TERAPIA F√çSICA','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(350,'TERAPIA OCUPACIONAL','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(351,'TERAPIA RESPIRATORIA','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(352,'TERAPISTA EN COMUNICACI√ìN HUMANA','DISCIPLINAS PARA EL DESARROLLO, PROMOCION Y PRESERVACION DE LA SALUD'),(353,'TRABAJO SOCIAL','ESTUDIOS POLITICOS Y SOCIALES'),(354,'TURISMO','GESTION EMPRESARIAL'),(355,'URBANISMO','IMAGEN Y SONIDO'),(356,'URBAN√çSTICA Y MEDIO AMBIENTE','IMAGEN Y SONIDO'),(357,'URGENCIAS M√âDICAS B√ÅSICO','DISCIPLINAS CLINICAS'),(358,'UROLOG√çA GINECOL√ìGICA','DISCIPLINAS CLINICAS'),(359,'VETERINARIA','CIENCIAS VETERINARIAS'),(360,'ZOOTECNIA','CIENCIAS VETERINARIAS');
/*!40000 ALTER TABLE `tb_tematicas` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_tematicascursos`
--

DROP TABLE IF EXISTS `tb_tematicascursos`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_tematicascursos` (
  `IdTematica` int NOT NULL,
  `IdCurso` int NOT NULL,
  PRIMARY KEY (`IdTematica`,`IdCurso`),
  KEY `IdTematicaCurso_INDEX` (`IdCurso`),
  KEY `IdCursoTematica_INDEX` (`IdTematica`) /*!80000 INVISIBLE */,
  CONSTRAINT `IdCursoTematica` FOREIGN KEY (`IdTematica`) REFERENCES `tb_tematicas` (`IdTematica`),
  CONSTRAINT `IdTematicaCurso` FOREIGN KEY (`IdCurso`) REFERENCES `tb_cursos` (`IdCurso`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_tematicascursos`
--

LOCK TABLES `tb_tematicascursos` WRITE;
/*!40000 ALTER TABLE `tb_tematicascursos` DISABLE KEYS */;
/*!40000 ALTER TABLE `tb_tematicascursos` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_tematicasusuarios`
--

DROP TABLE IF EXISTS `tb_tematicasusuarios`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_tematicasusuarios` (
  `IdTematica` int NOT NULL,
  `IdUsuario` int NOT NULL,
  PRIMARY KEY (`IdTematica`,`IdUsuario`),
  KEY `IdUsuarioTematica_INDEX` (`IdTematica`) /*!80000 INVISIBLE */,
  KEY `IdTematicaUsuario_INDEX` (`IdUsuario`),
  CONSTRAINT `IdTematicaUsuario` FOREIGN KEY (`IdUsuario`) REFERENCES `tb_usuarios` (`IdUsuario`),
  CONSTRAINT `IdUsuarioTematica` FOREIGN KEY (`IdTematica`) REFERENCES `tb_tematicas` (`IdTematica`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_tematicasusuarios`
--

LOCK TABLES `tb_tematicasusuarios` WRITE;
/*!40000 ALTER TABLE `tb_tematicasusuarios` DISABLE KEYS */;
INSERT INTO `tb_tematicasusuarios` VALUES (49,1);
/*!40000 ALTER TABLE `tb_tematicasusuarios` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_usuarios`
--

DROP TABLE IF EXISTS `tb_usuarios`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_usuarios` (
  `IdUsuario` int NOT NULL AUTO_INCREMENT,
  `CorreoElectronico` varchar(200) NOT NULL,
  `Contrasenia` varchar(500) NOT NULL,
  `Nombre` varchar(50) NOT NULL,
  `Paterno` varchar(30) NOT NULL,
  `Materno` varchar(30) DEFAULT NULL,
  `FechaNacimiento` varchar(100) NOT NULL,
  `Genero` varchar(25) DEFAULT NULL,
  `Descripcion` text,
  `PromedioGeneral` double DEFAULT NULL,
  `TipoUsuario` enum('Estudiante','Profesor') CHARACTER SET binary COLLATE binary NOT NULL,
  `FechaCreacion` varchar(100) NOT NULL,
  `IdLocalidad` int NOT NULL,
  `Imagen` mediumblob,
  `ChatsConmigo` bit(1) NOT NULL DEFAULT b'1',
  `AvisosActivos` bit(1) NOT NULL DEFAULT b'1',
  `Activo` bit(1) NOT NULL DEFAULT b'1',
  PRIMARY KEY (`IdUsuario`),
  UNIQUE KEY `CorreoElectronico_UNIQUE` (`CorreoElectronico`),
  KEY `fk_IdLocalidadUsuario_INDEX` (`IdLocalidad`),
  CONSTRAINT `fk_IdLocalidadUsuario` FOREIGN KEY (`IdLocalidad`) REFERENCES `tb_localidades` (`IdLocalidad`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_usuarios`
--

LOCK TABLES `tb_usuarios` WRITE;
/*!40000 ALTER TABLE `tb_usuarios` DISABLE KEYS */;
INSERT INTO `tb_usuarios` VALUES (1,'BRIANLOMELI097@OUTLOOK.COM','MTIzNDU2Nzg=','Brian','Gaytan','Lomeli','jueves 01/01/1998 12:00:00','MAN','Hola Mundo!',95,_binary 'Estudiante','mi√©rcoles 27/04/2022 19:37:29',583,_binary 'ˇ\ÿˇ\‡\0JFIF\0\0H\0H\0\0ˇ\€\0C\0\n\n\n		\n\Z%\Z# , #&\')*)-0-(0%()(ˇ\€\0C\n\n\n\n(\Z\Z((((((((((((((((((((((((((((((((((((((((((((((((((ˇ\¬\0ÙÙ\"\0ˇ\ƒ\0\0\0\0\0\0\0\0\0\0\0ˇ\ƒ\0\0\0\0\0\0\0\0\0\0\0\0\0ˇ\⁄\0\0\0\0\ÊØf\"\“*¢¢Z\"â@ (e\nD•	¢≈®,™ã ∞J†Ñ‘®®\ \€d©™,∂Y)2\—\"¿•ñà®\0RZ\"ñMXJÅ\n∂) •@-å®J® \0±)d\—2•ã¢	!TP RQ#Eä#Qà‘§\“$\‘\"à\—s@\‘%≤¢¢-2\‘D•íí*í¢ †∑#L“•*\nÇ†©e®5Y-\”$\“\n%\n(R\"ä\0\0\0\0¡APì!B™\"†\–\0EX*hÄYIE\0XÇ\“¿\0@\0-2H¢,@©4â5)0PV\0X[b(%Çí(•îñ\r ®4®\0(\nî\0ã¢Mµ,MB48\À3jZ	B\ ÄY\“5–äX\n\nBÚ¯ø%\'\ËºO\œ\Ã\Á\€˚?0?†˙ÀΩõØ\ﬂ<?cW†QQ*í¢,–íM+*D¢b¿í%®*Yj+Lç\"*R†°\nT†∞œâÙ~&f|fp†J}_µ¸πu˚Ææg°ztëV¿X%Tö≤EÄC)®Jpñd∞µ(´í\Í\‚ödië´ë¶QØè∑ãs\·¯\›x\ŒQd\0!A\Ï˛\À˘\œ\Ó5\◊€º˙]\—BÖBTBVK¶jÛ¨IIV\0*[@©m	d5ó\»cÒ\ﬂÇ\Ââd\…!aTQ=;K˚ˇ\0WÛ\ﬁ\€\—Ù≥Kr*\rH*‹çIhÅaA9!ö\»‘Ö®çIm®(ää¢\09xù¸çsÚæm\‚sêÄÑPZ †üo\Õ˙v˝≥\Á˙ß~\◊5m\…*R¢¨,I-»®*R\Ê¿-\»\”#H-à®∂í] \“Ú}mü\Á=&˘˘dê\0Ä*ZÖ&\Á⁄Ωˇ\0CÒ˙\Ó\œG=3\–%%¨	,)`∞\¬%(\·.n5\"]2] \“\nÇÇ¢(ZÉ?•\Ê\Ôõ\€\Âº03\0\0\0†7\Ó¯^\”~Øπ\‚˚XÙu≤ÕÄ\"\Í\"R%ÄA©	PVFôë\Œ\Z¿*\ƒj\Êô¶ô5¶lï®ôÛ˙¸MÛ¸ˇ\0ÚærX%\0V´\ÈÙ∏~¢vÚ˝Æ\›q›®\Œ\Í\r3j†≤$\”+*B‹ã ©,\”(®ÆS2\„wôz06\¬]\ﬁj\Èy•\Ë¿\€4\’¡w\«|\”?ó˝\‰∑\«\‡\≈ÀÄXRõÔüæ\Î\–˜˛Øó∑ß,~&\„ˆOÛmü\ÿ?ùı?~¸ü\—:~ë\‰ˆk\–p‹Ω’∂	¶bmàt\Ã%mÑ|\Ós|∫π´ïéée\ÍÊÆóí^◊Ö;8é\ŒIz\„8N_î˜<}˘¸¸éH\0ni{pß\Ë=\œ\ƒ{πı~ì\Á\·˘âº¸&¸r¢P¶K˙sÒøß«≥’úw:mòtb&	∂!\“afò\'\Ã\Â7«¥\Âm\Í\Âc£	z^C≠\„W•\Ê6¿\Èy¨\Êè3\ÀÙ¸M˘˛id\Ê\0\0Róß:ø™\·\Á˚òı˛G?Ø¸\Œ¸\ﬂ*\∆>ü_¡˙[ıæo*\Zœø\„˝7\œ\Èg\—€ß4\È\’\»uúáY\Ãtò&\ÿ\Zd|≤Næ}^iz\Œuwy££§¡z9´£ö:1+¨\¬_õÛü£¸\’\·ôd¿\0\0\0\ÊüO≥˘\Ô^u˚ø=\Îx∂@\Ê¡˙?ã\ÀNü£˚º/[>è±ä÷ô\Zdöfb’∂\œ9∫˘˙9•\Ë¿\€£l£ö:^C´ëzπR~kÙøúr\„,ò\0\0\0\0\roù_ßá≠\‰ô-ôY\0]g\ÿk∑\›«¥ÙıºK\⁄ráW(vrñvqßW$urW\Œ\√|70:9éép\Ï\„N”ê\Ï\‚^\ŒC´ï^ìßá\Ïys≥8\0\0\0\0•5íñ\rf\¬v\„\÷/•Û}\◊}wÜ∫uòF\ÿV\ÿF\ÿV\ÿ&\ÿK∂	\∆eÆ[b.\Ÿ&\ÊK∂\ÿ\Zdi!Æzâéú∫≠Û}/\"Np\ƒ\0\0\0fÖä\0 ˙˚W¡\Îr\Ì´\÷Ú\”[sWYÑtºáG;n\Ô4trßG!\ ¸˚\◊.ÆJ\Í‰éÆC¨ÊÆ≥úé≥úÆ∑çóØ}7C∑ï˜|9π\0\0\0\0∞j\≈5zYœü^r\Õ\„q\”\Î¯ıπ˜k\‡iˆ\Î\‡É\œÉ\œã\Œ/£<ız=}Û©˜ºÒªfÒ\ZÑ™IQQDQ*\∆ZÜ54≥\‰˙˛LX9\–\0\0\0\0Ø_ùπ”ùô≥¶!\ﬁﬁß]KºÜíjKl%∆Ñ†UI¨\≈P!@\0î)\0!`gx‹π˘~üõùÉ\0\0\0\0\0YKBÙ\œ]\ÕS¶IhH®*\nÇÅ*ÄÄYD¢(\0(!5öŒ≥πy¸ˇ\0G\œ\Œ¡ä\0\0\0\0\0,•î\r÷∫Mı\ÃV§T%A\ZâVÊïëR¿í¿\0Uñsaç\„kœèn<\ÓF(\0\0\0\0l\Î\\\Ô]j|˝9Ù^\÷^ò\0\0†Ä¢àB†–Ä°H¢XÖä©Döé]e9¸ˇ\0G\œ\œPbÄ\0\0\0\0\Ë˘˚Ùù,o?\'I9k\È\◊+\÷ts&\ÊŸã¶sóIöîZî@ΩZëPî%ÅU@•Ic\Á\Ô«ñ≤1@\0\0\0\0”ûı:\ŸwûR\Ãouwës™J37à‹î¨\r$4`äóªù\ﬁv\ÂW£ö7ôl∞ã$4ï	Bh\œ£é5\ÃbÄ\0\0\0)ku≠e\”8âçv≤\Ô2UJd∏ã£)∑=.\Á:tôÜ\”H\Z3ºF¨\…D.wX∂ò]\œ\\KóHf\⁄eº\Ÿ&¨|\Ì\„\ZÇ\0\0\0\0ª\«mX\ﬁliygx\Áz≥Ω\Ê]*M`±®∏∫¨Õåihô\Ë9™[VÃ®Œπ\Í[5õ%\–KÉQ%M#3Æ´ñ\Ì≤D3\À\Ë˘Ò`\Õ\0\0\0{õ\‹1´6≈§\ÿ\Œu%õ\≈Mg5uq\rk6\»X\‰\ÎZKSí≥B∑ê\Ê1t4\ÌM\Á!(ï\Ã]dáR\Ã\‰W(1@\0\0\0\È\‘\ÈØ/R®\‘C$pπ@ö\Ã[CÄ\Áˇ\ƒ\0,\0\0\0\0\0\0\0 !01@P2\"#3A`4êˇ\⁄\0\0ˇ\0i¯ä?\ÿÀÄXå{i\'˛N±_ÚXÖKÚo\ÕK\Z◊ñº;\‹WÆ\÷F5\’4¥ññb‹∞∏\Ã\ÌiÙ#\√&+êV®j;^yn\Œô◊±\Èbj\Â™gwB°X±{ñ6∂wÒ\‡\Íˇ\0-7{X⁄π)8\…\„c≤?ˆ0œØØP4b´\Zé\Â\√b@–™HiıµjeXöÖ|$ú=#-ıu\Z*º\Â®¸«õO;\ÈµP˛øTJ¨˘~ Äè0p\Ï\»\÷ˇ\0§!É\’UÍ´ÉW\Êw,,%)ujh˘]\Í\ﬁf•cô\«~jT\‰R\02É6¨\Ï*n±?nV˜@H¶\–˙ﬁ≤≥Ú1É#\Ô\‹ÚÖA\ÎFqﬂ´p˘kcL1˚∏ÚLJkÑg\ )\ÊëÍù∞¢!ò\Á£\ F\ÿv\‰•M°£\’ˆYÙ≈ü\Âw|a˛∏&fsmR´)™xö/YÑ¯3\„Ñˇ\0\‘\◊w\Ô\∆;•L’®\∆\√F •F\”∫ø5vª+™ceø=UKQé?êáS¸ê%¯\ lL\≈Qy\Z\Á¿ï*T\ﬁT©R•Nı›ïèq¥ÖDP)Å®,MoÜïz\Ô¨xpuûÚ\«\Ô*u\œJùecù¸U˘ZaakJ/~ZµÍøéïSH\”v\Õ29\'\\©S¡7\∆^#ÆVú¶ìÛ7G\‰näbjb\Z><E&6•Ztâã5§ö`µå\ÿ)Syº\Îï*u\œ/\ÎU\“y∞µ!0¨FAHÜ‰ª™Ω\¬Õ¶\röõıM@\«iï:ß¬ï*mà˙û˘©¡T\n\∆\÷[j7\„u1V•\ZBòhèEWq\‡a™J\ƒU˝8pÑ\ÊiﬂÇT©Òﬁùˆ\Ái\ jàw\0Tëå\Z%Nπ\—<r•Jï*T©U≥¿i\–\÷BÃ•Jï*T©\’<i\‰Æ\"ØÅ3†\\¥Ñ\÷*m\ ≤ùRßL\⁄x\ÂJï*T©—â˚x˘ä£P†|ô¥©\“IM$Åj\ﬂ(u<\‰R˙;\Ì\„R\È¨)6|\‹2•M•r:,Ω3ò\r%ﬂ≤õJï*m*VeôfY≈•Jê§)\nBê≥ò,\·gY\÷t≥¨\Ë∫S»øo∏Qm\÷˛âΩzZÇu\€‹†u9Ω\'u\‰1‰∑§zÚ\È\“w^;{Ùe3§\Óºv˙VY˝x\ÕÄÙá¶Y˛;Ùá¶Y˛®\Ÿ1T¯G¶Y˝xM\Ë]ùÕß\Ã^\ÍT£\ÿ\Óx\¬[˙õs\ÿ\Óx3\‚J=xM\Ó«±p†Òn∑RxfŸî©S\Ë\ÿQyRÅπ(\n-≤(*TÚFë•\›¯1rÜé\‘^lV˜tôº©S`T¨\À2ëiRÇ\›nÅÄ∂ˆ\›\»\–4JÖ≤Ä°E∑¥hÑ5Õ∂\—(Gú ∑Bl\Î\r2∂∏∑Kµ∂ôæ\Îu∫\ﬁ\≈B\ﬂL([®*\rÇ\›G0PTXZ\"([\\\rAMäç2Å¥ÍÄ°\rS\Œ\›\0\Ë\ﬁ¿\ËõiR•¶π\–iã\r\◊Vî<ˆÜ\Ëç∞Bç\ÁG˘øˇ\ƒ\0#\0\0\0\0\0\0\0\0\0 0@!P3`Qˇ\⁄\0?\¬4,+z\ÏÆ\¬˛πkcˆ≠Û8\÷u-Qî\ÁIÿà\Ÿi\Œ\Î\⁄tV5.k¢ê.∫v\—Rô-Àõh•Z¨\◊C…úC)U\Ô\ÍW\À˛üò¸∞{FK(\œ…üä\–yo\ÍLº|6ˆÖ•\Èæq~\»-_^\"~MQ\‚™˘\“c\Âó\—\„≤<í\Á	ª)?\Z#U¥\ŒÜG¿\∆1åc\∆1åx[mF1åc¯}h\·åc\Â\‡˙ñ1û\√\Ï3\ÿˆ\◊\ZW^>Ç>©ı£•]\À\∆Q\Ã\’ˇ\ƒ\0!\0\0\0\0\0\0\0\0\0\0\00 1@PA`pˇ\⁄\0?∏~˜p;©\‘ˇ\0nΩ\‚ì\Ô&=åPL\√\∆|b4\rñVF\Ê±!qıç–®¢ä(¢ã\ÍÕäÖ\·4ÄÒ\‹\… êr\ÈUÚ≥àÒâ ±\0Ú\ZD¯\Œ>A9wO∏¸|©¸\„≠^Æ=ú©\Z∏\„ÉQ∫†Q\›}ed\ÓV\Íu`Ü¯\Áç\'ˇ\ƒ\05\0\0\0\0\0\0\0\0!10PQa\"@Aq Åë#2bê°±3B`pí\—ˇ\⁄\0\0?˘â5J\·a\‰ΩÒ˝W¥n\Ïõ\Ï§qâî\–p√ßÖ\¬\ <–∑(±oÒN·è™3\ÎäUiuf3\Ê§q6\ Ú˘Ò&Ωt@åGA}*à=…ô\‰\0\ÎT¯m¢[ê¯ETê\√\Z=\Ë¶mEôø`°á9ï4≤$ıEö¢êï˝£@ü\’|?|2<ÖVR˙_øEî.≠D;∞\ﬂ\√àºJ&\ÍS_4RVz	î\ÿa*8\Õzî˜˙\—m\rnê°\r˘Cm\0~ÖEî‰ßÖ\…ú\—Ùø≤*P\nA∞\÷\ H\ﬂ≠t\ﬂ\Ì\"˜F\Œ\–IW\n%\⁄INà∫\‘q0QE˙zv@\‰∏U˘ëzß∑≥RÇ]\◊\r´Æ/¢hc´Å\ƒrS©ºòR\0\ËNÛ:\„>B\Í\Ã\\Z\‚LjΩõZ\’vëE\ﬂ!\ÎÅk\È\'V\‡b∫¯a\ZØt[\'%±\Ÿ\»\0&∏6êC¢\”s\n®A®ì\—\≈ü$H\Ë~û\0\Êõ\ƒ9ä©#%:é™xî\ÀÖ4AyÑ|póI\·é¶¥\‡m\»\Ÿ(\Ï\Í˜Uì`áêu*©‘ß¿\‚\Ô»ãW ä‡ßòòR	´Çéb•18-º\„Éy\Â\Œ	\ÔR´ øäcq\‰*™´wM\‘\ﬂNnø/\Èo•\›0â˛˛ß5M\‘\Ê\È\ŒK\«_\„/ˇ\ƒ\0)\0\0\0\0\0\0\0\0\0!1A Qa0q@Åë\—Ò°±\·¡ˇ\⁄\0\0?!Ñ!0ñ!ŒÇ∂6!Ats˜\'Z9«∏ûô•/Eºõü\"g˜\È\"k–≤ºHsáÖØ˜O\÷n87&§\ 7!˙«æ`Ñæ\‚W	MIÿÑ ¥DåôÑ\Ã\'\Ô0∑ºv˙˝œæ>\¬Dá\–\‡ÇZ(\‡B\€¯±∂&˙$mâÖî-vˆ\Ë\‹˘abcÛL\¬bwR≥\'ıEÖ®Ñ∫∞∫WúA£a{ah}Ò˘\Ÿ>\›^\›K\Œ7\ƒ&V\Á\ËZ\Ât,m\È,m˝≠a˝\ÈX\‹€£ﬂ™e,£ˆN¥sÖâ\ÿK(òY˜\Œ\‚PêH\‡D§6XZã<êX^î\Ã˚\‚ür\\¨A,#aayû¥#l/\«\’\€\–˝e\·a\∆\'D6?&57>¶\ÿLO\\°i\ÈA°\"	baaô\ÿ€°céü\—\«\ﬂÚcn´\‡•\ËÑâ©˚\¬\œ8HK<\Ïv\¬\Î˜\«\Ï^\‚\œ\œF\›t!RülBhLBâî¢\“t!t˛∞π\¬ˇ\0zΩ≤çÑ#\‰IûÆ=çÑ≥¡±\r˝5˛\Á\Ê/ÙWúØÛ?#cl!t!at¨!òêÑ\¬=ƒà%0ø(î!)0Ñ!1	ï–Ñ,~iè\ﬂO\Ë¢zâ\‚îO±N|ßæ.Ö\«\"\ \€+Llr\'\ËnsÖ\”KÖ˛\·\€\€+º{àÇ\ƒ∞∑\¬S*—£I\·\'˘ÑÆE\Â	I°\È\\∑Ô™ã\Íü◊ú\œ\"‹Ñ!Llx\–˘t~j/[cú˝0˜\ƒ&\Â ë©$-Ñ,mã†ü|/nn5π§;\Ÿ\Ão°aöç-\'\“¸wÿ•\”˘c\€+Ñ! ñ7\ /:ãè\÷)~\¬és\…˘\Á+QØ∂ÖZ˛BΩ¥\·^¥&D•°„õü&dLB	bfÒfâÙs¸ahrp-3πK\”¿µzàù)\·a∏’ä{Pˇ\0ØÙˆØ>Ç¬ª7Ù\'lv\ÌÚ,ã\‹L∏æ\Â\≈\À^á\ÔL˚t!iâù\≈¡\œ,,&Q8&&!ò\”nháA¢\–¸±∫\≈÷±∂\√Rö\◊f\◊ˆ6 ãlsù\ÕÒ∂)Û)D\Ê.\¬U\È˜}X]B\ƒ\≈O®ﬂç˝áof\Z˝\“\◊\·bz˜£Âï†∫y«∂M(\‹5_$\r\Í∂){å0\n]\n+ÛÎøè\„Úz˝e.§#l.\ré|¨¨\À˘®≤|)N/R\¬\Ë\‰Ç2xüı˝˚ï\œL\€\—^è9Zz¸\œ\ÊôrØmE\\_E\ÿu^;˙+AE\‹UÛ!ÕÑä\ÌWÚ-\Œ\r±püJò•\≈.i~\≈)E‘±∂\›qZÙn¯;_∞≠\—\⁄}°´∫ñ\›OX-±ˇ\0!\”{H}“úµ\Œ\›?ºX/J\Âeaa8≈îm\“\‹¥enx9åKˇ\0æ§|ó≠t,.\‚\“y®ïm^ﬂ∞\≈UPµ\ÿ\€l\›µÙóûù|gÚ\·?£\Î+Q\ÿn±I7Ç&öÙNjii≤\ †¥7#>ñn?¯7.ø\“SÛë{l~hS\€?¢îNúÙ-Qﬂ©˜)Ú¯X˛≈çÒr˙É9\◊˘h\Á5r^\«\—iï‘∫°¨ë«ëzmˇ\0îH$QãL\\\"\„˜ü\—K\n\'‹∞•.9\œ\◊;àF˚aAiÑZ)è˘SJÜá∞vﬁΩk+(5-çÖÖ-RW€úk+\∆\']-˚âîøî∏ˆ9\œ=Nr±qs\Ó-Ößıä2\Óˇ\0ÃÉi\ﬂ\Ÿ~\√kÍ££m\¬+û)®7\÷\ﬂ$\"ÚÆ\„Bó¸\∆\≈(ò∫4\Í•\Ë_\Èqf/N\»Xÿ¢~ÚÛ5í\ÍÙ˛}è¯¶ê§˜äã‹Ω≠ëä\÷bî¢b}äRâî∏¢=\À‰∞•¸]T¢e\≈(ôKˆ(ü\ÿX^rˇ\0\‡4^GupÜˇ\0ØB\„a	tF¨\Ô>\ÂwQQ\Ó.\ﬁ0Ö4\œn·™π\ \ÈÙ\„v6‹∞¢}ãäRó±K\Ó&]1M\«Ã∞•\ÏRî•..(ôM\ﬁ\»f•Tıhß\—§Ñº\›:\Â4¥*ﬂÑ!N$$\Îj≤\\\€\ÿNSªS˚\È¥6\Ï\Ô\ÿ[F*£í\Z\⁄vïeuZˆ\‘\÷€é∂GUˆ•¸E,,\‰Z\n\Œ:)D\‡übîN	îLY&^†.\Ê\ÁçTÇæ\Î\ÿ~öçI´FäÉ¸ïE\"\ÿÑıõe\Ô\‰^\◊KmÙÙ-uâ\«V\„\ÕQ+\„\Ó:\‰WçJ\\)JRî∏Q2âˆ(ôEÇâ“âóRç\€sc\ﬂsÉ[mÍµç;º)g\Ÿ.Fñ;6Å˙≠5oQUõ)Ø≤î•)JRîoˆ)aD\Èz.)J\\(ﬁáÛ	≥\÷z^Â®ï©‚†ã˘=WF\Ÿjã]çë±¶¢±÷ºª*Ω˛E˛ôwo\Ôç“âQ\rU∏$^ÄW´\Ó\\îß˙)~∆ÜW¡pôKï ôJRó\ƒ\ Râ˘)Æ|2_hß¨Ñ;~úLwùìTøQã∑óªı–Å~™Ü\Î\¬\Î§éFn\œJ}\◊r\‹•)†¸R\·?∞¥,˛Ñ+\ÏXQ2î˜6.ÚRîN	≤Â¢ãá«ø\'ØTj_Táu\ ˚ÉNá=J0£\ÂÙì≠\’\«\ÁA\Õ\Ô\—e•Òı5∞ôKÿØ°kä6RîL•)JQ2î•)J|\‚Ø\‡{¸ØÜ%A\‰ªkézñ\Zd\⁄v\ZTôJ]O|\'\n\'\ÌÇVj]\nRâóÒó4∞¢x•?e)©#OπSçEª\ BÛÖ“Ñm\Ëh\ﬁQ-E•Ö\…Kç\—D(ú(Ö)qJRî∏!\Ó HI#	\Â5Û&\Ãn˚cı’Øún6\Óp∂W|ã\ZjRîL∏]\nRâîNap¢eÇe)K\—\Ô~\r¢Ω≤ç\rg∂É≠fo*\ﬂC\ÿ\ÏQYu,\‰Lπ)v(∏R˝ä±Kˆ)D≈®XÇ0•(â;ôØ¡Æï?˙	=≥⁄ëzîL•,)z~xX•‘•‘•/üêû%EEQó∏úi}ÜÒÜæ-=e\ÈÚQÙ\ZäRîL•\ÔÇtL¢p•+.>g\œ\Z˜\Ë\ÿÌãñÙ8cj\ÀGæÁ¨∫ì.5•œò•\Ô·ößJ\'\¬+++RâîL¢x¶®\‘HÀãäRâ§A_Q≤,¥˜Øq…øcAj\≈\–Us°\œ¡$\ﬁ»≥\ÏY\\¯É7É<C?¯0X-\…MÜ\Ô\‡Ö˝	\n5BVGr.Ëâπ\‰ª°\"àÚ\"˜ h\÷\¬R—â\ÏÒ+Å\¬µ\Zq	î¢’â6c¥\Â\ Q2êèñP˜\Z£SR≥R\ÍSÙ/\∆Rî∏˘âuÌÖîà$L=±!øLñ¯/9y®î˛\¬^Ç‹Ç\”\r\√Pè\Ô+\¬\'Ç!-H≤±\€\—‹Ñ=«±Ø¯\›¯J˛]ZƒÑ°∞∞∫\"6YJ^ÖßB\¬\¬Ç\ËßëΩ\Î\÷\‚\œ9Zcl/…ãs\r;\·u!\∆\'W¥?\”\‚6qJRî∫âŸÖâA\"C˙Ù?g\"\ 9\È\ÿ/á–ébBXÇ\„•ho∑M\ƒ\È\ﬂ∂=˙^\∆¡|E\›\ÿJat!\Áuv\¬Öôî-q∏l\Ê\≈©\\r8t~é˝+\”_èØIá1#j¯5=[à£Üò\‰n\ËZ°j!tl\\>LØUc\Ës\Ê\◊\¬\œ|ãu\—Û*E)t¬ûOXØ∂ù°au\'\—.\‚SoÖü@°O¸7\r£\‹[\œ–æq\Ôá\‡û	y öl7q*\≈\«$|\næ\r{°a•ax¯ôÑ\ÓmÅàFàHZ\ZöÆ‹ö\‹PüqCCÿ±jX¥\ËF\∆\«$\ËF\›\r{>[è\‚¶<;Nn-¸â¯7\Âõ	j6\¬|ã¡_$\◊S\‰,UJT$\ÓT.\∆5\'+\‰WK\Á)âú„ÉçF£¯%∏æ¢\ÿn\·èc@\“ óryÚ1\r{ë\Âäy\\âÜ)≤â>x_st%7b”í\Ô\ƒ˚l-\»MH\Í7O\ËZ°(#\‹\";∏ççE>\„oÖÜ\·^JëR4\Ï$©n6ó∏B|\n˚ì∏èÇ#\›ªï¨j_òºëæ\ÊÑ#vêpj@^Bç\÷\rÑOf8\—	\–œ∞òz\n\r.F¥\—|ò¥k]µ\Z\ÓÛÑ\‘‘ábß¿¥-\Õœ®”ëhK¿\„ë\È≥\‡H\Õqà\»\‘ÿΩÑ˚\nv\'cùQ&\«\»6∞≥sG˛	\r¥\'qI\…\nπ/\Ã$ëW\Z±\Z\—\‡±˙\Î®n¥\Zöäˇ\0\√z\√9∂ÇSeà¸-\«\‚y	$Utl—Ü\–Q44?$\◊ah±I/í]û)r\‘z¥mæ\¬Y\€z&˜W¡.ˇ\0@∑\‰ä\Ó;Ÿâ\Ë\◊!v±Hä\ÏFÿß«¨îT\‘lˆú\·Ø∏µi¸å\‡`Ç\r^\‚T$JA\ÓBµ¿\›—öë≠∆åT-\ÕG∏\”	>„´ëˆ„¶ño∑%†ùzíüÉ+Ü&ªâ\ÎÆ!\rh˚\r\÷ﬁøÿ≠=E=¸\·KπW\Ëì\»\ﬂ`\€\Ï6çæ~¢pcWÇ\Õ\Õ\"n\≈.3N⁄ö\Õ>Ç\”tJ{Üb(˙aMQ+aú\"(ÙZ\∆>LMÉbn\r˙\„B\‘b)5a2¢≠âÑA!\ƒ\\0±4¢A±\Ï=\œˇ\⁄\0\0\0\0\0\0k@~\ƒ\0J6 ë@Úr8	4tÑC\·¥5U≠˜68\ƒZTö[√à\ŸYw<–º\‡@∆ê˛∫Dˇ\0<ø\'˜tW˜\nO^]s\ﬁs,\‚}H3\Ãdy\Ë\Á\‰4‹∞ëVõ?\r\◊\œ,Û\Ópç)Å	\√0\0îMd‘Öá3ø&yP„Ç™—∞É\·Ù\»5Ç`å-Æ[UsëÒO\€0æ~üÅ§v˝\÷˜ -ÊÅè<ﬁ†nÜ\ﬂzöo¿©\ kzxıpΩ™\0TΩ\Ô\‚w\r\‡\"\»vòJ\‰å!£Ç¬ÅÜÚæqà˘\√[iû	n.˚ã\È{˘\Ÿ\»\‡76q…å\r<±\«¿õ˝’†˘*\“M\◊6û˝ˇ\0â≤g\÷3V\ÿ#Û¡Ç`Àå/.Ùa4 C[≤U3Ü\‘\ﬂ\»˝.bÇˇ\0◊â2üâ\0\–>≠•e\ \«Kc58&äd\Ìˇ\0ÚQ|8\‚:Sˇ\0N\—z∂a1á@ü\Î\Ì∂Y{mj{ï\\Ä\Îù=OúGæ\Á\¬˙ö˚\Ôä|\»;ú0\⁄¡≠\ƒ~MπìÛàiø#≥~˚\Ôæk&í\›^<GHKZrF∆ø)#\nîÄ∂˚\Ôæ˘ÆÖªÎ≤à¥\Ó<c§4F™\Z©v˚\Ôæ˚\Êøg\ÔñB ÜÅé©\“X\ÂS\·\≈˚\Ôæ˚\ÎΩˆ˚Ql\"P\√H\Ï\“Ô∑Ωà^˚\Ôæ˚Ø˝¸7\ÂoÖ\«\„O-[ÇE{˛\n>˚\Ôæ˙\Èg\ ˜\Ìm@cçìNÛ\œ.%\«>˚\Ôæ˚ÔµäN\«Ù¡\ÕWôO[oä”è<Äæ˚\Ôæ˚\Ô™z%É£.∫∏\'s\Óí\€\ÓQ+>˚\Ôæ˚\Ô™O2å˘\Ô:ôJ+n¶\Î\≈.iÄ~˚\Ôæ˚\ÔÆEEæ{œÆ2}y\œ8∫\¬8c>˚\Ôæ˚\Ô≠\◊r1˜Iã	<|„§ó\√2Û~˚\Ôæ˚\Ô£,™¢eÇ/>\≈¡°\Ï)ºæ˚\Ôæ˚\Ôí\÷∆Ω,¢z™%˛\‹\È\⁄\≈4•ø˜˚\Ôæ˚Ó∑≤©cEt⁄§\–œã∫}\Á\r\◊k¶∑˚\Ôæ˚\Ô\√z<ª,o°ŒÅå ú–úå/û˚\Ôæ˚\Ë<s\»\0¿¸ˇ\ƒ\0!\0\0\0\0\0\0\0\0!1AQ 0aqÅ@ˇ\⁄\0?¡∫\‚?˘ó$s\ÍM|2c\„b0ªÇé\\\›pG\œf\∆Gˆ\„`|ÜÒY\Í\ƒ9’ô6XYC\ŸbAΩYΩAΩAó˘eú\Ÿ\Í\À¨˚e®\„Ü\»òÉ\”fY\Í82\À8≤≤\Í7≥\∆@ıd¡bœêqÕúqeûºceê>¨≤lÙA±Aeëˆ\r`\„ã<eíAeû±éÆ\À\r\‚Àò\„∏1n¯ wã˛X˜¡\œ6sêYÕñ† ∞≤\ÌñAñYÚ\Ã\Ê\À9≤\À ˚eñ{É\…\ÿ>Yd@¡wççë˛Ycg\‡h[gÚ9≤\»ˆl\Í¶2\√\’˛\\\‰\ÿ2\∆@Jêà˚É\Ÿ\À#v˛d%\√g¢\¬\œà\Ôò˘\„\‘õ\ƒ¢±˝É^ ∞\‡ª¸yì\Ÿêgp|±ıg\»\‚\…\Ó:å\Î¿k\€ ≥\‰a\Ó\À ,Åı 6]\Â¸∂∞˘`Yeñ|≤\…\Ê9á}x\Ó\œVFAÚ\Œr\‚æG\Õ#•\»6Mõd«î;≤√¢\∆ê=ó¸Å˘ë\‘\r\≈\Í\œw†ª¸<:õ\‘g{é{≥\∆v†˚g¢’ûêry\r\Í\r\Í’ô\Ó\‡ñ\'¸X\‡FyyÉ\”hè®$\Œ,≥\ÌóPY˝Ål≥¡Ωs ˚\Í[ƒªØ\„˛Eë\Ê\"o\Ÿ\€9\ﬂ	˝É\ÏWåÄoå ˚\‡>@¯\Á∏\Ôõ6\r|3˘&r\\}\œë\›˛\\∞gø∂Yíqır\ÓL\·ê\ÍÇ\»\Ó\Îà\œvGP}É\‹\råıí¿ü\…\–√õ\‹c\„G\⁄öB∏0¸h∞grqg\À,\À!ﬁ°\Œ\Ì\ŒI˝á;a\ÿ}Cƒæ\ÂØ˘˘g∏ò\ÿ0\Ìëk\Á¸Ö!\–ÚCú1ásû¨,˘9\Ô¿\∆8á\‘!¡o®}\√\Ïá\Ï>•ı.Q¸“¥åyôb\€ÑÂ≤à\Â}¿p\Ó\À\Œ\⁄=\€,?-\‚\‚\ƒ0ñ¯R•\€F\Ã`\‘Úqdâ9\◊\»ˆ2gQ\œ6√ñÒlù\Ê\ÿxá\Ï0èç˘\r•\œÙsÑ∫Û£,Ä,zÉ\Ó	çıy±\0\»:Ñ∂\Ÿh?´∏\‚\‚\…\…ûΩ´Q\À\√P\Á~\Z\⁄\€m≠≤Ò\√\Ìó\◊\Ë?\0€Ñ<xÉm˜Üç∂\∆-\„ªm\‚\”\Ì•∞\Ô_†êq\›_\ƒf3\‡|¯ã\‘QZ˛~ìª\›\”Ù°\Ê8ÒÅœçé≠è\√o\È;Ω\›?bß¯é\ÔwO’ñ˝îy?q\«\‡w{éøOP=O_ß,˝\'\„\…t˝/Wª’ñAˆ>¯\Ì\Á/\ÁìœØ?\‰u˙_WÚ˛l\«\Ï`{±É\Ìß\À>\ÿz≥à3≤2\‚\œgè~>?J\Âå|ù\Í∑oQ\œc’Äw\À’±ô\Õ\‹f]&\…\¬>˙\À¸!Ù€ë˘ı\Z˜\‡\Îl\Œ\Ì˛Aß¸é;á[üvÒ\n\\\›u \¬9\‰á{çá-r\÷_∞|Ö˜˘´\‘\√g1Ω,lã\‹w\€\ƒ\Í˝á=C\ƒ\„6\«^GªﬂÉ¿üüõﬂÇ{Ò\Îb:Ûˇ\ƒ\0!\0\0\0\0\0\0\0\0\0\0!1AQ 0aqÅëˇ\⁄\0?OJ\'\Ó\ƒ\ﬁ\À\∆uD§¢ã±¡xg\“≥°(Eåòx/\Ï^2£)\›/ÜP¢ÿ∞TR±1\“˙XQ5\Ëö1\ÈT^î™	ÆôNã\nR¯\'åï	¶Ö˙\„ıõ∏++\Ìõ\ﬂ8zX.ˆ\¬˝|Q1M.?ßìö\ƒ\ŸzÁ¢óäQ~\ÀÒfS®\'\—z/\«B0(\"ö\·¸R¢≠Mπ\…|(õ)Xú.v\\	≤≤âªÇî•B~î®•/¢eEú/Çl¢~äà\…z\ËfÃî¢s(øπ(ô|}Yb˝ïMz^j+\ËLæ	ñlhÜ\ÔBnŒ∂\'u\ƒ28\\&RäSTTRîLO%ÛÇlM≤≤±∏Ö\Î\·^Ñ\ƒ Ñ˙++ÖzB~£\ƒ(ü•\‚â˙&^\ Q1∂¥VV&ˆ!∫˛ì/Ë¢Ç}∏Ñ\≈˝+\“,w%eû¸˛	ät\À–∞Ró\"\»\ﬂHø	pÑ\Êë6ä&dº\'\¬~ëzgæ1\≈oÑ\ÓÑ?Ö\¬5ë~\ ^SÖ‚æÑ˝*?B¿ôJ\'J&\'\Èì¿¸F>(o°∫6W¬±<îlR˛Ñ\—P˜Çî•LΩî•5\»\ﬂ\ \—EÅﬁã\—J_\n/\—s°ŒÑ\ƒ\⁄++)˛òbx)JRã/\"y\“Y%Cbo±7\“\‡ûJ∂QgÖ8•;)q°cB\…˝/=è\Â*TïeùFÛ4$WB\Ó{hLP¢•\Ë˝∏hû\“pûÇBB\≈ÙÖ{/¸ò_3tÑ}êÇ∞ÉD!	\ƒ!Ÿß\ﬂÙç:Ñ\”\·¨\‡ëâ\›\r\\¿àA!xAÆ\"!ëàLâDó\‡yB\„?\nCQ\‰X3\ƒ µí4BÑ!áØ\√	ÒñJkËëêÑ ë°5Å˝ÆLz\·$ƒà$∂A\"Ñ!N!ª1ã\Ì\·3\—\rìÑ!B1\"WD ìdÙK\∆\'¯(¸ÜípKD1(ƒ¶BKˆB\"JâN0DA!°,ï¸¸/Cu\—6ù‘êî¶	û%–ñ2D5ÙÇ^Ò˚û∑„Ö≤˙˚»ó§\Ô\Èq\◊\rˇ\0b6\“CíIãï\Õ/\‘LZF\Ô´n!>MêΩ\ÂràT∂^ ∏P•¢$ü\‚ù&\ÈTb\⁄h\ÀBco°∂ãYΩ	\‹2àú\¬K\∆ å\ﬁ?\Â\œñ–ø–≤oi¨	\‰YHYà6\·¢wB\ËÃúEΩ\√0≠˙.åæâ\‡Yø¬è°8®˜H˛xbOmâ•Ü;m<¡5\¬?\‡g\\2;T5≥7Z\€ë1\\\‰k9\ZôLKI±&µë≥\»\◊_jõŒáhI<±®\'RÇZπõ\Ìâ-îQãO0i=ÙU¨â-±4\‹0∞ƒ¶\›$Ú:ƒ´\ÕΩâMR±fW\⁄\"biˇ\0D\◊D<¢,\—4¥6õ ÖRlRx,‘ôõîI\‡ù\√\'±°h[cB\Ÿ\‹\ÿ\Î˜°\ÿ\Õ8\Ï[ˇ\0v!èÆ_ˇ\ƒ\0)\0\0\0\0\0\0!1AQaqÅë°±¡\—\·Ò0@ ˇ\⁄\0\0?µB\Ÿ\„ò}\·ü9[˚Jô@¨-˜¨™§u@\Z7\0è_x\œ9≤9y\‚\€\ﬁQ+¨	á\ W∂f?p\n\Ì(\—\ﬁz\Ì8\◊\ÔYYÛ\⁄Åí@ıö∏Ü0\Ô\nãaS\À2\ÀÛ˙A\\>∞\›\◊B\\Es\ﬂ\È-_âbˆÄg¥•\„◊â´£L@0u\„\ŒPµñ\‘G+Ùî\ÿyD¨}\÷@q\nˇ\07ñ\’˝\÷\ﬂ\Ì¿Øú\Î5\÷:V∞6\‚\0\'°+º+˜~g\ êSI´Ñx\0˘¡mº1\ﬂA©K®V\“\'U@\∆OT©éM|πÄ5òu\“ˆÅ__~L\Î=\‡=?w%|Ò2iò¸Kh\‘W0≥\„F\”}=1+Ü“•^o|¡k§\÷u®\Ó∑+J\‚}=\‡9|°Cìq\⁄\"\‡¬∫\Ôô`q\“nt \–˚ô®\Î?uÄÈßú\”OIÜ:\◊¿Æ\ﬁÚ≥[}\ƒ\»q)ß\\}\⁄[Ú¿f¥9\÷Oˆ∑£\nCc\ \Z\”\Ã3Æb\Ÿl0˘C\ﬂXY\ﬁ\‡∑\›\È\”\‚∫˝\Î\Ênâ\Ã«º¢˚¥å-ÙÄ\ÂPPg\⁄˛\¬m\ﬂ˘4‡ØòÿÆgIª\”˚ö\⁄±\ÁÛ\Á-_ø\ƒ3Pø\ \◊]*ø:˚Là¡ö>\ÔÙeÅÒ}ÙÄª\Îº´¥l\Áh}O\n\‡¸\È\næ¥+OJòz\È<ˆ\Ã-ù6Åg\Ê|¿6q‘Ä^9˚ºæ–∂z\‚\rWx&≥¢fıô∫\Î\0Øò\Zwîæ	GX-\Õkà\Î1Y`>H•õ\Ô\n_\‘¶\n>jòß•@t\Î¨+_<NOú\‡m˚ö˙ˆò\È\⁄q\Œ\–\Ã3ç T¿VzU@yô<\Z8ñ\ﬂKÅıÃ¢µ\ﬂ3BΩQc\Ÿ\nª”¥˛¸ÜÆ˝\–\À\œD(˝¿˛˝∏-6ïã\Î4Æ®c˚*∞˚@uÆë.ú\ÕJ÷™\"\Ÿ\Ê˙\Ã1¸Aooò6˜ôÇ;G(\rq\n˙\Ê£¨\Z«≤G|A“∞iú)\«0≠]*¶ài\ÁU¬á\⁄T\¬«àjv\ÌX5\Î\ \n\Ëm4cÕÖ0é]aü\‹5®c¥ı\ƒ,bz\Ôˆ\ÂµN\— ÿú=ôÉâøH`ØIM_YüÃ¨gú√É\–\«\‚˛\√8á\ Pˇ\0fˇ\0π_IàcÛê1•3JÆ\“\«>æiXIMΩg©n__\Ï˚p\√[\‹ı\◊4áø\‹¿Ω30\»taú!wüoàÄπâÀ≤Y_|•}®\‚ˆî+yH\„<ÒïZCL\√\’,î¿\’]*PÜ4\ﬁW∫˙\Ô(ØyLòX\◊|¡ì;^ 7}gö@¡+X\“\n\÷\0vÖiÛ\0\’\€1¶ìÉç\Ó\ﬂ2x\Ô\Ï\ =\Ê?±)ØíºtÛÚÄôÛàê\…zÃ¥`.ê3˚é¿!˚ñ\∆góÔî£à™†&=J.\»ø\r°ÆPJ¸\Ã}akÆ≥>ûS\Á¥t@ﬁΩ·ØµL7\«xsÒ\◊!\◊\n\Î8y¡ùP?X7Ò…º˝\√\Ì\√\ÎXï\Ì3˜òi˘ }f4ï˙πSO¢Ø§\ﬂ\Œe¶vâ^m\ÿöπ\Ã*Ø-AúÛ˜y∏ˆD=˜Ö±\Î\0`W\ƒ˝MâOGy†Fa∂ qoÜ\◊˚ôŸÖ?16\œHÄæjY\ÊØ±à\ﬂ8≈û`ÉPx\Ós˘Ç\ZA/∞lˆÖß9áπ\ƒ-ıÜÃï\ÁlG\„òlıñòÅûq*äòi\Œˇ\0àXœ¥1¨\À?uÜ5©£à|≥qô\Êº˛wÄ¨s˜ôºﬁ∞-ÛÜ˜\ŒÒ;À≠9Ä~å°\—\ﬁCP\Î¨+ohU\Á0¡ú~\‡L}vô˜πT\€i´\Á.æ\‹\Zz\‹\Zz\Î/8\Ã\0\‹\ﬂH\Â˙A£ù•u óˆ\À\Z{A•˙@N t|\Âç`m\·\€0\“¶_®_}°W˙\÷Q\0\Ÿrä\Ô\ƒA≥Û516É£\÷\È-}\–R\"≥±\◊Yw\Ã\¬\Á^≤•\∆Ùô øm˙@y\Ó`z\"6Ç.πıÖ\\\Ëå/µO∏Üq\÷\0?YòΩwñÛ\“\rA\Â0o˝0Ω<\‡!O¥(ıî›ØyüÆ\⁄0\‹ˇ\0#ÚÇ\’ÙÛÜF\›∞z8˜üói˛\À\œIVˆX¡0WïC¯\Èì\“BA∏)ƒ©}\‚_^fıŒ≥\ZıÅ∑^ Vû∞\‘>9ôe\€ˆJ\Ã\”\Œ\‡7çø¨/˘)¸\ >O}°~ú¡N{\‚R´ox\ﬂ_9˛ O\Ï’ü\‰∏uÖï≠\Ô˚Ä\’˘b°Øùq:8¨˝\“\ræ\–∂\Í@∑F∞7}\È2sò}˜Åí˘\ﬁW˙ç™<à[_hØH\Âà˛\Âs\ﬁcO;áHa0≤zŒê\¬wπA∆º%c\ŒbÒØiLΩﬂ∏ó\◊3Û\Â≠±\rOH_\Ô≥ıQ˙\÷¶aåzAe¡èí˝@˝C˝^\rpÖP\Î¨–á5§\ÈU\09\“˛\–◊àf\ÎV&SohÜ!]Ûq\Î8eòóñQ|™R¸\Èè\ƒ≠Ù\“\À\Ô)vˆ\ƒ\n\ni\Ôq6\·í!ó¥)\ÂÕ•fø|J\ZÛ∫X\Ã˛3)=wïâc∂∞AÒp£P\·+\Ê\ZÉ=eπÜ1?9ò*˚K€¨{JÑ\“˝%zTY≠3pL~aWû`s\œfc0SáE4=\‡èNn),ÑhÛP 	\r˝.P=\‡éì∏\Ã-¡›Ö£äñ1b€Ø;Ç˙\“{ê:ı\“dÛf[i¡\◊hP_ögÒØÚo~rïgù¸Ã∏9\“`.	°ú\Îìgº\»∞o\Êk\Ê9Ÿñ%\ƒ\È\Ìå˚¡€Æ!ÙL¯?®/\‰ÅOú0\ﬂN7òÇOÚj\Êó\Îú¿µQ&Æoº\◊_Xr˘Üó9¶\‰G¡\«<\ \rzC_ioîò{°à5ßm%Ø;m˜\“\0}˜áXdoõvÉwy©é\’\“r:BÉ<\Ô/Ö˜ﬂÄ\◊–πÅejz\”G≠Ùé\0#≠L8â\‡&¿ä,u≠Söoàrª¥R2´%÷ïsí¡\\éGΩ1ü˙tïô\’\Ÿ\ÿ`ªCw\ƒRVz\È>æ\‹\Ó\n\Ô\ s¥\r]e?#\ÁìWxP\ƒZ\⁄\Î\Ã2˚\¬~~æ	Æ3/ÚÜq\∆\€\∆˘ç~\Èî\Àis 6\⁄¥¿\ﬂ˙ä°Û¢ \¬\ÿ\„9\“Aœ¥–±\‚\0JV;∫Ûü[EX\◊\ \rı\Ã(y_y~\0lÇvéöˆq*∞›És]¢Ù:<o\“y3ïZgPt\"-ê´\Z\Ô)\Ê∑\0Ä\◊^D\‹h\√u\n∂\«e\›\Zºâ\—\€1fˇ\0¨Ò\ÁN≤\ﬂ]`ûå\◊.Ù\ÏÇ\ÃıK>ˇ\0ë\◊hVûªA5n¿=≤\‹˜˚¥2\\¶\ƒ∫ı◊¥2÷∂éYœî)\Î{\À\ZS\«˘Q∑_â]z¿\Ÿ€è˚Dn˝©f\‹¡?≤è\ÃÙ/\Ôx!\÷T	y\÷\01èÑVt∫â¶≠ı\⁄c∫º\√6“ºó?qOÖ@?Rü~“ëåÜK–Ö±LUØWwÃò\◊å}ÊΩ¶}¸_ëò˚Pñ\Á¢˘Y\÷#\ﬁ≤™≥.†uÅlΩˇ\0\n¯îº¿:\ /\Ô\ÓQ:Vq^˝\‚{{¿\ÏK~¶NæP/≠¸BòÙà$\Œ Q\Ÿ\÷Z˙\√oéêıÖo\Èˆ\ÈÒ\n\—Û®P~æ\‹2<LF!`¡π˚\÷_$µ\◊[ñ}ˇ\0&ü\Ã\≈C^ê˝\"`I\⁄\ZªC\ﬂx˛Uﬁìxä\Î\nÄ}?ÙÜé7T¨8\\\ËyGdi\Z\’\Í\ÍÒz≈ø\⁄iØé<*\’)‘≤ï≠hù∫14U\‹˜l\ﬂZÜTéÿÑ,√¥-è;eúKUÚÇØ*óûëƒ´ß¨¸îc\“XƒßÒZ\Ì^–ø\’@q˜Û>\‹\È\Êà\ﬂI\ÊfP?æGDuØ\Ï0CÛ¥\ÿ>Øà[˝Ç,6zo,\Zµô˛ÀégD-/\÷rmå@X|¿ÃπÆ≥\»¯âuò~ëhµ\Ô”Æ\Ó√û};\ÃV\r\Õm—¢åDÜ\Z¯|\\\À>ˇ\0ës\‡@˛ZÆ¨-^´K√ç\r\„\‰0Ú|\\KÓü™Éá}\·ô_Æ»á	m|A\ÓÉ\œv}T¯Ç.\nl=g˘-\È\–˚P+œâEüs)]∏òÖV/\‚o\⁄\Zc\⁄\rc\”xSoX?πsH/\‚@ƒ∑.¢£ £≤mQc\œh9Û\Ã¯≠ıÉ•iw2\Ì¶\"kg2≈¶\r∫\„Ò\0-Z,\Íõy\„uçv\œÍæ∑UÒ@æìLk1\„âS\r:É_$7≠\nµ§«óZ`[eôf\√5\◊X\0\‚øI\’	n>˙\√NŒê¡\næ\‹b¶í´F}*\„L\ÀŒü®4\ÎS\Ì\√RÙÜ=eVk\ﬁ\È\‡˝\Õ\È\Ê\rµ§\r>º¶t\œon vÜZÖA¶µóé≤\œ\‘\Z¸\≈˛Bu\“\Ï\—\Á§5|Bé<\Âó&\n¡≥\Ây\⁄]*ˆáïµz¨≥\Î\0%fY˜¸ñs.Ò£\Ô˚ü\0∏Ä¥Pu\‰Lüq¢z4{^}rE%π£Û¬†‘∂˙¬´>\”˜/\È)^\ŸœÜ\"˙¬©Ø\r\ËÜ5\Ì1é§\Ÿ1}\"æ˝`Lñ˘\ p{\‚=7©¥?;\Èaıü]f¨C/>%#\ÓKÏ™ï†ú {†QP\√\Ì0©æΩ|F\“ı\ŒÒ∞\◊\0Z≠P7£70\ƒ\ËWL\‚ˇ\0ˆd∑\“)Ã∂YÃøÄ¨¯Äí\ﬂT(\—\“`w>£\\=pÜ–áôi\Â0S≥Ø\Á\‚\r\„\Ê>Ø\Á3ìº7K∏Å\r{A+\⁄k,®\"\ﬂ\\\Ãk≤vãr\ﬂx≥ûe˙\ﬂ3˝güÅWw\Î\rq\ﬂ¿0Ùõ\√Z\Îº¡><\rPk˘\‡W]wõ˝©£êuá\Á¡_1¶™*µ£W˝Ñ8`\‰\ÂVÆä\∆Xüx≠˝˝M<F\ƒ˝x\nkV}}ø¿»®öQ.!ßÆ∞…´H\‡B\÷D/A7Æ˚m¯Ç9{¬ïu\ƒî—Ç&=bª\Àu˙M\œX:}¸M5\Á1V=b¸ §ÒDµ˝ØôÉ˘/˘\“˛KyK9ñD-ı–Öé:¶>YÇ¨Bò\‚7H-\‚^vÉü9˛@ˇ\0\'\r\’@\’\nákà\ÈÙÜ ∏øÚ[ÔòâÖ\Ï=y\‡à\npõ©´vÇ4\Â\’\'z^\råKGL\ﬂÚ,Ãôw\‚¿7öû\È.\√;\‘\0UZh%b.5ªB±ΩC5ti]Ç√øÚ&\ÏÓ™è≠J›èO2ø˘ k\‘y\“.`õA\Œx®\Á_hUV¸ê\ÔæÛ¸Ä]\\…à\Â.úsƒ≤H;z\√\√QW\\\¬\Á®MÑ≥\Ô˘é\"¶∂\ÈöwÖ¡≤ñsíÅÖF9m&Öº\“\›\›a4.1\\\‹R∑ò\–`cQ\\Æ\Í\ƒC5^¯É\Â0Ü\ﬁ\Z3d\”1í\’ƒ™,J Øó&5\Ã≠%ç\”Z;qxä*ùCŸçç;\À*—º\nPÖ¡ØX,%\Ì}b§\Z[¯®XÒƒøøIf∞fﬂ∏^˙A••|¯xÚô˝¯˜ÉL∞\À\Ái\È«¨(UAw˚\Ì\◊N[Ú˙\“\›\Êo~§º¶1\“ :B\Õ5∏©üs\næ4\Ôéuk–èqØ+eÆ™æQÆõ±Æ´{•π§©-˛\ÎXbd\Õ^˛&fßàÛ∂6Rı£ß^ª@bn\“\ÎK∑t™9HzPf\Œe¢Ú∑Ö•\—[ıÜz@∑\ƒ£*\Í\Ìà=!{@ªK^û\0X\“œ¨>âe~¶;.t¸Éú\Àb ¢˜Añ}ˇ\0e≥VÆ\›\‡kÚöiºH\›/\Î˝ãd∑Xó0∆Ω°[∆ÆI_;√ó\ƒ2\Á;CD)ı\ﬁ*q\⁄7Ø=zKÃ•ÀñÖ£Ä&\Í`\ÂVoHL™Æ\œ\Î\ﬂ\«Ò3\·≥ˇ\0Ä3æ3˚Öl:(n»´{5≥¨\—˙\0zßr◊ë<Ü\€\Ô§#àS]\"“π\ﬁ\r`˙\ƒ\‡Û\”\‚Úá^*Pzı!hoò]uç_h&x5Æ3ÚÄP\—ÚOq\‡bΩ¸m¯i/\Ô\“®!ßg[qÒ.m:ª\‘<3\Î-˘Éß\ﬂ\ƒZ\ #;\‹8øHÇáæa\rQt≠zF\¬\Ÿ≠PZ\Z¥\ﬂØ\ÈZº\È£\Ì\Ì.\Zú˜\ŒÒ\ﬁ;xa\„´¿∑^—înÅ◊è\‰≤\ÊèkÜ¨v\ÀQ™5Üå©Õπb(º6|{JWù\ ¯ò4\ÊS\·=/hÄ?~ö\À>ˇ\0êj*±\ﬁ\nﬁì>©…§˘Ãßµ@0Cx0;¶aò\Í\Ô|\‘/Gº5\∆vî_Ñ;\ﬁ\–\«{Ç≥,˛@4yA+\Œrˇ\0eútÇv\ÃøIÚMé U®ÉXß3v5\–\Ìy∆Ω°\·\«,ÿ≠∑Gyk1j\∆¡è\‹\÷v<\√?¸\ƒYªEU©øJ˝\‘@™dñáèV€∞X\÷B\Óπ\ƒG`å!ΩØ©àöΩπÄ¨\Ày\È/:˘E]\ÔDŒêµaÅ\Êr\Á8®ô\⁄aßx\È\Z=c«î¡¶∫ˆ\⁄æc\“\Êí˛`ö{∞k\◊-©-|0K\ƒ\Ãú ∑§(6Ö≥˙Ç\‚\‡ﬁúŒØl\¬Ò\≈\ \Íg◊ùwa\Á\—\n?ì+ä•.£ø^ÖC◊ëc\◊;oò®q65~2ó\'Oî\Ÿ.Y˜¸É\Â?^\Zò3\·R»â|}˚\ﬁ*ù0ä^î\\>H˚\Ô+íJ\0\Ê\ÎôF¶ª∞CD\Á∏ƒ∂ˆLπ\ﬁCo3›ºrñUyN\Ì\Ó&\È\Ô†\Ÿ\Êá—î©¶\neñW=\‡ö>W1/ø∂ê¨>ô\À,π®éæí˝∏Ö1\röK0˚¿ªA]0.Òó]òYà≠\ Xi¨\Z˛ëæ¡˘O,F\ÂÖ\Âè\\\\V[\√g.πÚ©b\Ô˛\ﬁ_x8Øo*∑Ö¡u=\„0-pΩ\‡Ñg¨\÷WŒº\”?åÒ\ﬁN˙\È\n\”\÷Y°l\ÎU4j’ó\≈\∆\ƒi[´∞YiUl†}\ﬂN<†ÆißLc0]æ`ñ=võüIíî˚ø¨¬º.P]í\ﬁS-â\≈\Ô\rà(C(ç\”^èúó\’\‡∑î0\Á\⁄e\·+¸ƒ¢˝®Hı€¨∑8˚àù†_?2è&l\“\n˝®[>πÉœ¨<íÉ0\·\0kº\◊˝é\Â∫\¬ùnµÇçU\’\Ë¨\Á\◊\«˚¯\r0≠\·*a0ö\‹tΩsæ¨.\Õ2V\0\›\n+LwÖØ\ÕWuΩz\¬¡\Ì˜Hïù25≠\0µZ^\—¡\”CetΩ{≥J\‘;çíµ°h\ŸI\€:∆¨mh.Æë\ŒF\‘\‰\Õ\Â1uàéìª.∂Ç\'b3v\À\‘nı5ÜGcêe@¿”ª≤C\ÓêCZå¸Ùã\03\œ\«(Csú√´§\«X˚ û\Ï\\C\’¸∑\'^%ª\ﬁ`Åüh±ô^~˙¿çò\Îö\Î\⁄/\ S\ﬁ¯®c\÷[7iÅp\Êo0\‚∞Z\–Xòz\Ê°Oà}ü¡˘áqV˚+ı.\Œ\‡fé˙¨\À`ıˇ\0Ä\”ﬁæt≤´‹ª\”ı0ê\Ï=OMe\\±\rÜò\r¢C∑\Ã@KX\Ï”êÜ+èC£Tı97´òbj\À&\‰1Øä\Ï\∆cí »òF,\»,◊°n.õ\€\Ë4µq[ùE⁄∂ïc\\\ƒjq∂ ÓØú6à[8\÷Œí\…\Ô¨5ÒßÖ\¬*\‡¨\"aú)∑X\rıö?ô^zOqàh˜î\ÁÆ–≠s>HWøHZez\¬o3\ÊÇ\€\“6\nØ\‘Eéó˚ıÚÇ\≈\È£\Õæ™vå˘ˇ\0Ä\”c˚0JCg\'Ûºbößk\‹˜ˆb\Ã\›*⁄≥áÅ\ƒ9∞*#¢(\√…ÜY\“\“Åù<5x4\≈*ÉéS…ÄZRG5e˙\Ìq©\—˛tÇD ´ßX/H7˘\Ì,_˙!\ÀK\€¿∏^\0∏\Ê8˘ñ\¬˙{\ â§ÄÄ\«xäΩ!\œ>Ω>aC\ÈPFa}˜ÄyÖ¶ì\Œk\r¸≠s\€X∞f¡\ÕZæ≥\œ˛CLU«ûûâ1kfNÜRX\0N\ÿn\ZÚuà\’Bl˛b\Ê\ÂÀçR ã\⁄\”Z\ÕsP`$h\€A\ÿø[ñB%r\Ôìj^CÇ[b\ÿ\‘i`-ÆaOD4∂\Î÷ôbÇ\'7\–5πãÙu¶™∆â\ÁÃ´S/\”\n˜Éº¯	D,{%\Ô¨*˛RúûPj\—\ﬂUñ±-\Î\Ô<˜Éı\ﬁ´\Ì;éeâ¿Ø8-ΩHp°Åqâyâ¥\√\…KÜXzƒº√ñ±	¢¥∑\‚˝˝ck®\‚ø\Ë4\œ\‘\’\Á+LÚùD~¸¡TÜï(	â∞∂¥%®›ïTih5}G\›?SF\nd\≈D)6ë\ZΩvàä\⁄\Ó\¬\–e>^*ªd]\–Z\Ì\÷\Zb]G\0£æ\Õ\”SúX∫˘¡\ﬂ«Ñ\0^`C˝†7_hY¡ÇZ¡›æˇ\0\»Òò©^∞*ñ8o\ 2äå•\Îº‘á([˘vq\n\¬j\È\Á≠1t=R\‹At¯Ç÷µ\⁄\'t\Á¥æg≠K8\¬Ïòã¢\‚[∞πqg\‚d+a\ÏC˙œø\‰\‚Ö¡|\'\ÊT®ù\nÚ˘â’ìé^uóHºë«§1\À\Î\‚@\‹Bñqï\Z\Íq\ZÙà`tB\Áãa*\‰¿…ÆV;´bä\⁄oRkP^\ÔóÚ\ËÇ¿Ü?pkÉ\”¬∂Ú\‚˝∞M+\“*K9˚\Î*k2yÃ¥Ü`\·Xz\·Dáp3(\”?2ópU-¯Ç@˘oT\—\Á\n\ZΩ\Ê\Ì/e\÷?ı\ZaÜ5\’7c©zu\r¿-ñk£yõ¯±g\√UA∂ù£œ°≥e\ÿ⁄Æ(î\Œ{vóqN∫A7ß9ñ\√L\ÏTz∫K.†@.∫Û\0ä\Ô¥\Z\«\ﬂR*\÷<°§K\·\Ô-ıP≥\Á\nOPü|\Âö¡Ø\\¬ÖC©+à\Zu\‚Y(TÆ\“˙\≈9\\;q£˜§¡pèw˛˚ëur!x\–¥\”…îZUCXºÒf©_¸j  *\‡\rcTfæû+\œ\\mh.ßˆG0}LZÄwæìGûnö\Èà-:\Ô9Øò:UyÉ\⁄èYcèb\Áû,*\Âôa\ÀX\r˝°oà+àeö˜ Ω˛\Ôo˘ÇáO§∑,\Ô\Â≥\⁄˝∑Åj\Ê˜Ç\‹\Î\ﬁ«¨WGv\Î\'ú\ÏWÄoßCvÇkx?uÖ\·`p]\Õ:C\Èî◊çx\÷dı\„7\Â_%\—\«jäv\ÈEmPG=Üe4Ω\‡ouÛÄ8˜®-Ω¢¨ﬁ∫\\\◊;\€zûF`,\Ãr„ãî˛\ i\‰\ ]Ãçæ∞ZAÄo\ÔòrÅ%5F\r|\Âk§˝á\—(Ò,Ã≤˙K<˙\¬C\√\‘g\ﬁ?¯CGB\◊\√Gú∑R\Ë˙FTlX@é\⁄^±p´X;ªG´a≥£\ÀzÙóJ\‰\Ë3pı¨Aì8Ω\·l®\ƒ=Gh\∆¡œî˜C*9ä~.+W_q\‘˚\È\·_ô]!\œMS°,Y‹Ñº\‘SéaJ\÷)ª¨SX_:A—ùoòrvÄL$˘˛\ ?\Ï\’\÷\·O^/<zìü˚Å„Ü≤¢\‚¨;O‘∏\0eé\“\·IhÒ\Á*\«\ÿ~\‰X\nÛ\ﬁSú@h\Áò&Q-Ö\Ì§∂[OÑ∏∞\Zf__æ∞d®\'oI~\"\ƒ˛\Â±\ﬂ0f{ lπI] <\‡,®wç&\‰§d`à85K\Œ €ØEùj˚cºD\÷#Up∆£\Í\ÃrÍöΩ}\„ˇ\0Qpˇ\0™eVπÅ~ó\·øxn©}Ω∫BZ◊¥	˙Öu˛\ \‚e\‹\Í\¬C§SH1\‹\Ê}.©Ij¡roâh.\“€Åq˝B˘jT°M~`˚B∞ÚÖA6\ƒWX$(˛@P\„˘\ƒö#\Í¿ß¨,\œ5,ß\›ˇ\0∂Zˇ\0Ù\√H[§a&a\√\ ¶Ñ≤Ãï•M…Æ\Ïk˜x\›nØ˝ßaXùπìn≥b†[¡Vx≠boPNÑA9ó\‚\"\÷ ªW¨üú(ˇ\0e¡TsòÒ.ªkª\À9ÜX\ÊΩ wb\Zˆäo∑ïÃç>zÄZ|E∏WTKúm\„\rà≤\Ê0^_®Ép≤ä£2\Ëm\‰{\ ZZntz\œ\À˛\∆¯c\¬ˆ∆≤\‘ƒîÛã\ÌœÄ\ÊX-\Ì§2¢>*!™){G±\\#\ÌÙõ≠=ZÒ\0cp¸üàÑ[¡ç2ßö$ö∫@\‹ 6\≈J\›y\ÕY¯ÄXûﬁê\\˛\¬\Íf†∏R6\Èıå¥\’\»\„\r‹°Uª˘òˇ\0v	©\ÓVπ\ÔÕíø\‡Õù˙C©ùöe1~\ƒ8hi\“ç˘Mñª\÷ çø8B©◊été:µ\Ê.ÔÑÅo˝¿3\‡;(ã±óEä\ﬁ\Z§c$\‰¨wç*	¶ººAÛe:´é\–\‰y¨µª\ﬁkùÛwÛ\n∫4A9\÷ıñ\Â¡¨\Ô\ÀwbÕë\—M˜Ji\Ô-\Œ πñ≥8çÜ[˜¸Äk*¥ïp+Òı)Ä\Ô\ﬁ°âº\ÿ˜åè\‰Eq+\Ô\÷jM´Û:\rwÇõ£¸*Vb˜çf\◊\≈\\\∆,@VÛDo6ˇ\0LOP∏\⁄V\ŒÅ®ö\œ\‡ñK∑X¥˙\È±[Ûå`J}?ré\Œ.¥\ÊNóøÚ}∏`<¯ıñO§¿bT:BœôL<\–wÄ]†tJZ°5¨Î¥•=*?¯RòΩb\≈*\⁄\Íık´ùX\Ÿb\‹@z≥=\≈cx\“\Ïu\‚i\ o\÷\0°\⁄a¨\Z\‹\ÈJ\œ_\05Ò]xfP˛\Ã˛\Ê\…l¶˛µΩ á¨∂óÅs\Ã∆öf`ºi/“ßˇ\0[>#ãÅèòs\“\Ã/≤\Ì\‚[.Ÿ™ÖoâU\«x≥\Ô˘\0<\Ê<\·NO([Úï\”1gw\ﬁüŸâàSÒ‹Ä\€OΩ`˙ˇ\0e&òÇˇ\0ei\ﬁgò^\ﬂ2æ˝b#á\ﬂP33}>_¯∆ü01.\Á∫\ﬂyKØÒ|}axÆIf\ÔúÛ¡àSøH˛@a1\ﬁ(õ\÷Û0qüÚ^\–s\œyl˘åvAZ|@\…ZC\ÌK>^a3\Ô?pz|G†\Êné´\÷?¯àﬂÇ\ÕA{\≈Xkª\ÁÛ\Ì\0\ﬂ\‚SZCó£)Å]e3Lx£≥\¬\ÔH%Û<\Â>ˇ\0íΩ6üXï\È+\“3\Ê\‘ﬁº•\ËásP®ﬂ¶\–ú<@›ö\◊\ƒ\◊c\ÃXùoˇ\0\”æôôã@Ü+∫yç<)ºü\Ïò&OöA°¥o5¥\nœûaqy\Î©\÷~\Â=f+§*9ö\Êî\Õ~mº-\«\ﬂX\Zè\Ô:\ƒQTª≈≤f}cˇ\0Ü\Í\r1\ƒl\r°-U\‰¸\Õ^ßÅ\Zx4\ƒ\◊q.™	p\◊£H-©s\\@ò>\r~zÙxm\Ã0\ÊXˇ\0≥rV|µ%7Ö;SA3ôcuPWv?¯S0KÙπ´/®Aj°4ﬂü\∆!˜ØÅÆo«á\‹¿âËûâÆ5ÅP£˚\n\ÍÄ3\⁄G\œ⁄ï\Ê8e±S\”\¬\ﬂ˛©tïöÇΩ<+\Ô\÷=°ä4ï\‚\—\Ô>HWπQˇ\0\ƒö≥Fô∏¯õ\ƒ\‘\‰Ø\Ã˜íº:\ﬁCQ›âÆ˜ÅbGƒæAy—É\”\Ôƒ∏˛„ëÇZöÔ¨¥\‹˘L≥íX/ØX%]zCU©\◊\Ê[8=\‡cı+¬µˆÄ#	à¶&%ıó¥\“\ÿ/˘\ﬁ#≥\raOH\ﬁùˇ\0\·qø\ÓXV@fµP∑R\ÂZ\ﬁ¢X◊¥\Z|±e˘\ﬁasx\Á\‚8bˆ˛¿™N\‹ƒÅL¡erÅç˙\ﬂ\“7é\–.∏Û∏=\Ã™yiP,¡\«ˆzæ\‚\ÍÆb\◊\ÁòC0ó˝¸è?¯( ∑\nß0Ø\‹\Z‘î|K&¸\ e2èˆpsòˇ\0\‚\ÿÙÅá⁄ç\0&t/iõØΩcÆ˘Ûlµæí÷éqàÅ[Ò0%\Àeìò%ß&\ÿ\ƒ\"áS\Ô\‚j∫x*≤˝˝\ÂöyÄ3n∞\“»áR∂72\›Ùãa;b\Â\ﬁS\⁄*\≈\⁄u ?àL¯ap_ÄRú≠\Âi\0>\–À¨\Í¯	\Â(iî˛ƒç∆πrú@µë\Ëôpä∫ˆànt\“R∑\Œ`\Í^≥Fã\⁄-+ã®£~K)R\œ1R\‹\ƒ\÷:9îßoH—™:@µ;\ﬁ)[\”_yEè\‘*S∑\‚°çeπ∞\”uöR“∏Je\‰\Ã+¸ü®ç¶\∆aây\‹\È)§	´Ä«™\ZY\Á/\'h!gtF\’\≈Aq5\„^%±{£iW\Â\0¿˜’ñc\ÊΩ±\Z\»\◊H\Î∂#gV\€¿^¶+(vˇ\0\ƒ\ËV±!nW+´º˛\»lúµ\0\÷\Í˚J5£∂±≥^ˇ\0πöµtâZ^Ò\Z\ÌxÅub∂¸\≈W˘äÅOkÄV˝ òæl¿XLAöf_ΩÙ\ﬁ`≤\ﬁ\ƒ%¨ømSyH\ÁO¶6t+ñ\"Ù\"p≥P]s\\|Gº=\–;=`´Ú\…kBhî•¥5≤#\’\0Z_\‹\ ~q\È\≈k)_¨¿«±\0±arKv≠°X\€Ü˘ˇ\0≥ù<AZ\"n\Ô*k\'`Å+\ÎÿÅ\ ∆ìGºVHX]`\Ï•\‹G∑\Î/-\≈e˚àä®öÄD¨±\’\Ã]Û\n-ªLÑn\‚€¥L¶ãà´¥z¿\Â∞[ª0A\\¬åâz\Á¸ó\—ZuVën\›LE`HaGµ|FôÒ*\ÊÙ~e™5{\ƒZ)ªû˛íós±Ü +â™[\n≠L\À\Íí\‚\‚ä\⁄Y\Õ\ﬁ\"‹†nˇ\0ø©b\◊˚¢s¸?\ÏŸ¥Ä\–ôú†Æï6˘Ò;\Z9)~WPb i\ƒˆ˝¡î\‡ç[\r9ÇäT¢kN±Kt∫\ﬂ0h\¬]îK~»òZ\Œ&°\∆t¸˜ä\‰k\≈_\‚=o\ÊpP\ÈY¯ô≤\‹%≤ìüÚ6ãù¢åùTB\ÁMF~ê∫Ú∏h\–BÑ°\ﬁ˝{JnÚ…öö¥Z\⁄\“\0dy\Õ\„®?ñí∆ú:∑ß\√ı\⁄j \0Ø\Ã,¨éµ\Z(B⁄á⁄ô!\În`∫yï\‡Æ\ƒ\Z\Ã?vÑ`j-\”\ÿ˘öE”úˇ\0›á\÷-ÄÒq4¢âÛ®\ÔüDá\Âö7L≠YvkÛ\n´¿\ÔK+\”f˝¿Z0æ\–ÜØXEZ\Êi¨iàç–ß\„>\rê\√;¿≥k≤\ÿ\⁄\·zø¢&Ñ<†\‚\Î¥3µ#\Õ\‚ºi1Ûß\ÊPQ†\Ì\ﬁºõ\'∞4˝¿ÄB\Óe\›*ˆV\Õ\·F]\Ô\⁄\n›û≠¡\Í#*i7%IGôºE`Ê®ú\Á\ÿu\⁄!\√ÛÄkÛÛ-f±hÛ\Œ∫¨H´\Á_˚\\Æ\"	z0,É¥≥î\nóZ\ƒ\Z\„;D.ı\Ôõ\Ì\0Æ°\Ÿ0\’\ÂZÙ£˘\nÚ[\÷èo\ƒ\"\’~¶\’\Î¸ôÙÆı(`\‰\œ\Ófô\‚±oZ\\•CzE\–X\\QÖwèìH8y\‚-Nê—§1\Î\0ó_H_@∆ïP™\Õ{MkáKè6\'ÿ∫zòñè¨lm\Á\⁄ch†Ω]êS\ﬁ\0gMs1\◊(∑V&\Íü\\B´.±D\Ê˘¸¿†≠\È\Ì\no\ÈsÅà:é:F\–_5-•DO˙†\÷\‡ÆQ{+\\∞∑¢ç\\m≥hYã\Ôˇ\0\r3\"(¡\‡w®\Ôñ˙>!\„ã\›%.và:≠∑\Ãt±6Hå\ÌX¸¶πz\—oÙ≥Ò+a{à∏+2Vÿâ\ZûwÑX\Ã\\/ı5\Õ–õ9Çµp¿°}°23/odÚôúZ\◊yÃãπïôâFcˇ\0]n\–@£xñsº€†+\”ﬂºlf=ôÜ≥\Êâ\Ã^E≥˚l\r\Ê√º\n\–N$(ó–Ü¡\È6Ò\◊K54±)œÖ©?ˇ\Ÿ',_binary '',_binary '',_binary '');
/*!40000 ALTER TABLE `tb_usuarios` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Table structure for table `tb_usuariosgrupos`
--

DROP TABLE IF EXISTS `tb_usuariosgrupos`;
/*!40101 SET @saved_cs_client     = @@character_set_client */;
/*!50503 SET character_set_client = utf8mb4 */;
CREATE TABLE `tb_usuariosgrupos` (
  `IdUsuario` int NOT NULL,
  `IdGrupo` int NOT NULL,
  `FechaIngreso` varchar(100) NOT NULL,
  `Intentos` int NOT NULL DEFAULT '0',
  PRIMARY KEY (`IdUsuario`,`IdGrupo`),
  KEY `IdUsuarioGrupo_INDEX` (`IdGrupo`) /*!80000 INVISIBLE */,
  KEY `IdGrupoUsuario_INDEX` (`IdUsuario`),
  CONSTRAINT `IdGrupoUsuario` FOREIGN KEY (`IdGrupo`) REFERENCES `tb_grupos` (`IdGrupo`),
  CONSTRAINT `IdUsuarioGrupo` FOREIGN KEY (`IdUsuario`) REFERENCES `tb_usuarios` (`IdUsuario`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;
/*!40101 SET character_set_client = @saved_cs_client */;

--
-- Dumping data for table `tb_usuariosgrupos`
--

LOCK TABLES `tb_usuariosgrupos` WRITE;
/*!40000 ALTER TABLE `tb_usuariosgrupos` DISABLE KEYS */;
/*!40000 ALTER TABLE `tb_usuariosgrupos` ENABLE KEYS */;
UNLOCK TABLES;

--
-- Dumping events for database 'courseroom'
--

--
-- Dumping routines for database 'courseroom'
--
/*!50003 DROP FUNCTION IF EXISTS `fn_AgregarAvisoChat` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_AgregarAvisoChat`(
	_IdChat INT,
    _IdUsuarioEmisor INT,
    _Aviso VARCHAR(256),
    _TipoAviso VARCHAR(20)) RETURNS int
    DETERMINISTIC
BEGIN
	 IF courseroom.fn_CampoValido(_Aviso) = 1 AND courseroom.fn_CampoValido(_TipoAviso) THEN
    
		IF EXISTS(SELECT IdUsuarioEmisor FROM tb_chatspersonales WHERE IdUsuarioEmisor = _IdUsuarioEmisor AND IdChat = _IdChat AND Activo = 1) THEN
			
            SET @IdUsuarioReceptor := -1;
			SELECT IdUsuarioReceptor INTO @IdUsuarioReceptor FROM tb_chatspersonales WHERE IdUsuarioEmisor = _IdUsuarioEmisor AND IdChat = _IdChat AND Activo = 1 LIMIT 1;
            
            INSERT INTO tb_avisos(Aviso,FechaEnvio,IdUsuario,TipoAviso) VALUES(_Aviso,courseroom.fn_ObtenerFecha(),@IdUsuarioReceptor,_TipoAviso);
            
			RETURN @IdUsuarioReceptor;
            
		ELSEIF EXISTS(SELECT IdUsuarioReceptor FROM tb_chatspersonales WHERE IdUsuarioReceptor = _IdUsuarioEmisor AND IdChat = _IdChat AND Activo = 1) THEN
			SET @IdUsuarioEmisor := -1;
			SELECT IdUsuarioEmisor INTO @IdUsuarioEmisor FROM tb_chatspersonales WHERE IdUsuarioReceptor = _IdUsuarioEmisor AND IdChat = _IdChat AND Activo = 1 LIMIT 1;
            
            INSERT INTO tb_avisos(Aviso,FechaEnvio,IdUsuario,TipoAviso) VALUES(_Aviso,courseroom.fn_ObtenerFecha(),@IdUsuarioEmisor,_TipoAviso);
            
			RETURN @IdUsuarioEmisor;
            
		ELSE
			RETURN -1;
        END IF;
        
	ELSE
		RETURN -1;
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_AgregarAvisoPregunta` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_AgregarAvisoPregunta`(
	_IdPregunta INT,
    _IdUsuarioEmisor INT,
    _Aviso VARCHAR(256),
    _TipoAviso VARCHAR(20)) RETURNS int
    DETERMINISTIC
BEGIN

	 IF courseroom.fn_CampoValido(_Aviso) = 1 AND courseroom.fn_CampoValido(_TipoAviso) THEN
    
		SET @IdUsuario := -1;
        SELECT IdUsuario INTO @IdUsuario FROM tb_preguntas WHERE IdPregunta = _IdPregunta AND IdUsuario <> _IdUsuarioEmisor AND Activo = 1;
		
		IF @IdUsuario > 0 AND @IdUsuario IS NOT NULL THEN
			
            INSERT INTO tb_avisos(Aviso,FechaEnvio,IdUsuario,TipoAviso) VALUES(_Aviso,courseroom.fn_Obtener_Fecha(),@IdUsuario,_TipoAviso);
            
			RETURN @IdUsuario;
            
		ELSE
			RETURN -1;
        END IF;
        
	ELSE
		RETURN -1;
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_CampoTextoValido` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_CampoTextoValido`(_Campo TEXT) RETURNS bit(1)
    DETERMINISTIC
BEGIN
	RETURN _Campo IS NOT NULL AND LENGTH(_Campo) > 0;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_CampoValido` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_CampoValido`(_Campo VARCHAR(256)) RETURNS bit(1)
    DETERMINISTIC
BEGIN
	RETURN _Campo IS NOT NULL AND LENGTH(_Campo) > 0;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_EstatusTareaProfesor` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_EstatusTareaProfesor`(_FechaCreacion VARCHAR(100), _FechaEntrega VARCHAR(100)) RETURNS varchar(10) CHARSET utf8mb4
    DETERMINISTIC
BEGIN

	SET @Fecha_Creacion := fn_ObtenerFechaHora(_FechaCreacion);
    SET @Fecha_Entrega := fn_ObtenerFechaHora(_FechaEntrega);
    
    IF @Fecha_Creacion < @Fecha_Entrega THEN
		RETURN 'ABIERTA';
	ELSE
		RETURN 'CERRADA';
	END IF;
	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_ExisteUsuario` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_ExisteUsuario`(_IdUsuario INT) RETURNS bit(1)
    DETERMINISTIC
BEGIN
	
	RETURN EXISTS(SELECT IdUsuario From tb_usuarios 
    WHERE IdUsuario = _IdUsuario AND Activo = 1);
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_ExisteUsuarioChatear` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_ExisteUsuarioChatear`(_IdUsuario INT) RETURNS bit(1)
    DETERMINISTIC
BEGIN
	
	RETURN EXISTS(SELECT IdUsuario From tb_usuarios 
    WHERE IdUsuario = _IdUsuario AND Activo = 1 AND ChatsConmigo = 1);
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_ExisteUsuarioEnGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_ExisteUsuarioEnGrupo`(_IdCurso INT, _IdUsuario INT) RETURNS bit(1)
    DETERMINISTIC
BEGIN

	RETURN EXISTS (SELECT UsuariosGrupos.IdUsuario FROM tb_usuariosgrupos UsuariosGrupos 
    INNER JOIN tb_grupos Grupos ON Grupos.IdGrupo = UsuariosGrupos.IdGrupo
    WHERE Grupos.IdCurso = _IdCurso AND UsuariosGrupos.IdUsuario = _IdUsuario);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_IntentosAceptablesGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_IntentosAceptablesGrupo`(_IdGrupo INT, _IdUsuario INT) RETURNS bit(1)
    DETERMINISTIC
BEGIN
	
    DECLARE _NumeroMiembros INTEGER;
    DECLARE _Intentos INTEGER;
    
    

    SET _NumeroMiembros = courseroom.fn_ObtenerNumeroMiembrosGrupo(_IdGrupo);
    
    SET _Intentos = courseroom.fn_ObtenerIntentosUsuarioGrupo(_IdGrupo, _IdUsuario);
    
    SET _NumeroMiembros = _NumeroMiembros / 2;

	IF _NumeroMiembros < _Intentos THEN
		RETURN 0;
	ELSE 
		RETURN 1;
    END IF;
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_NombreCompleto` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_NombreCompleto`(_Nombre VARCHAR(50), _Paterno VARCHAR(30), _Materno VARCHAR(30)) RETURNS varchar(112) CHARSET utf8mb4
    DETERMINISTIC
BEGIN
	RETURN CONCAT(_Nombre,' ',_Paterno,' ',_Materno);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_NombreCompletoUsuario` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_NombreCompletoUsuario`(_IdUsuario INT) RETURNS varchar(112) CHARSET utf8mb4
    DETERMINISTIC
BEGIN

	RETURN (SELECT courseroom.fn_NombreCompleto(Nombre,Paterno,Materno) FROM tb_usuarios 
    WHERE IdUsuario = _IdUsuario AND Activo = 1);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_NombreCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_NombreCurso`(_IdCurso INT) RETURNS varchar(250) CHARSET utf8mb4
    DETERMINISTIC
BEGIN

	RETURN (SELECT Nombre FROM tb_cursos 
    WHERE IdCurso = _IdCurso AND Activo = 1 LIMIT 1);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_NombreGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_NombreGrupo`(_IdGrupo INT) RETURNS varchar(80) CHARSET utf8mb4
    DETERMINISTIC
BEGIN

	RETURN (SELECT Nombre FROM tb_grupos 
    WHERE IdGrupo = _IdGrupo AND Activo = 1 LIMIT 1);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_NombrePregunta` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_NombrePregunta`(
	_IdPregunta INT
) RETURNS varchar(200) CHARSET utf8mb4
    DETERMINISTIC
BEGIN

	RETURN (SELECT Pregunta FROM tb_preguntas WHERE IdPregunta = _IdPregunta AND Activo = 1);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_NombreTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_NombreTarea`(_IdTarea INT) RETURNS varchar(150) CHARSET utf8mb4
    DETERMINISTIC
BEGIN

	RETURN (SELECT Nombre FROM tb_tareas 
    WHERE IdTarea = _IdTarea LIMIT 1);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_ObtenerAnio` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_ObtenerAnio`(_Fecha VARCHAR(100)) RETURNS int
    DETERMINISTIC
BEGIN
	RETURN CONVERT((SUBSTRING(_Fecha, -13, 4)),UNSIGNED INTEGER);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_ObtenerDia` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_ObtenerDia`(_Fecha VARCHAR(100)) RETURNS int
    DETERMINISTIC
BEGIN
	RETURN CONVERT((SUBSTRING(_Fecha, -19, 2)),UNSIGNED INTEGER);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_ObtenerFecha` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_ObtenerFecha`() RETURNS varchar(100) CHARSET utf8mb4
    DETERMINISTIC
BEGIN
	SET lc_time_names = 'es_MX';
	RETURN CONCAT(DAYNAME(NOW()),' ',DATE_FORMAT(NOW(), '%d/%m/%Y %T'));
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_ObtenerFechaHora` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_ObtenerFechaHora`(_FechaHora VARCHAR(100)) RETURNS datetime
    DETERMINISTIC
BEGIN
	RETURN DATE_FORMAT(STR_TO_DATE(SUBSTRING(_FechaHora, -19),'%d/%m/%Y %H:%i:%s'),'%Y-%m-%d %H:%i:%s');
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_ObtenerHorario` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_ObtenerHorario`(_Fecha VARCHAR(100)) RETURNS varchar(30) CHARSET utf8mb4
    DETERMINISTIC
BEGIN
	RETURN (SUBSTRING(_Fecha, -8, 8));
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_ObtenerIntentosUsuarioGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_ObtenerIntentosUsuarioGrupo`(_IdGrupo INT, _IdUsuario INT) RETURNS int
    DETERMINISTIC
BEGIN
	
    DECLARE _Intentos INTEGER;
    
    SET _Intentos = (SELECT Intentos FROM tb_usuariosgrupos WHERE IdGrupo = _IdGrupo AND IdUsuario = _IdUsuario);
    
    IF _Intentos IS NULL THEN
		RETURN 0;
	ELSE 
		RETURN _Intentos;
    END IF;
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_ObtenerListaTematicasCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_ObtenerListaTematicasCurso`(_IdCurso INT) RETURNS text CHARSET utf8mb4
    DETERMINISTIC
BEGIN

	RETURN (SELECT GROUP_CONCAT(Tematicas.tematica) FROM tb_tematicas 
    Tematicas INNER JOIN tb_tematicascursos TematicasCursos ON Tematicas.IdTematica = TematicasCursos.IdTematica
    WHERE TematicasCursos.IdCurso = _IdCurso);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_ObtenerListaUsuariosGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_ObtenerListaUsuariosGrupo`(_IdGrupo INT) RETURNS text CHARSET utf8mb4
    DETERMINISTIC
BEGIN

	RETURN (SELECT GROUP_CONCAT(IdUsuario) FROM tb_usuariosgrupos 
    WHERE IdGrupo = _IdGrupo AND fn_IntentosAceptablesGrupo(IdGrupo,IdUsuario) = 1);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_ObtenerMes` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_ObtenerMes`(_Fecha VARCHAR(100)) RETURNS int
    DETERMINISTIC
BEGIN
	RETURN CONVERT((SUBSTRING(_Fecha, -16, 2)),UNSIGNED INTEGER);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_ObtenerNumeroMiembrosCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_ObtenerNumeroMiembrosCurso`(_IdCurso INT) RETURNS int
    DETERMINISTIC
BEGIN
	RETURN (SELECT COUNT(IdUsuario) FROM courseroom.tb_cursosusuarios WHERE IdCurso = _IdCurso AND Estatus = 'Actual');
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_ObtenerNumeroMiembrosGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_ObtenerNumeroMiembrosGrupo`(_IdGrupo INT) RETURNS int
    DETERMINISTIC
BEGIN
	RETURN (SELECT COUNT(IdGrupo) FROM courseroom.tb_usuariosgrupos WHERE IdGrupo = _IdGrupo);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_ObtenerPromedioPuntualidad` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_ObtenerPromedioPuntualidad`(_IdUsuario INT) RETURNS double
    DETERMINISTIC
BEGIN

	RETURN (SELECT AVG(TareasUsuarios.Puntualidad) FROM tb_tareascursousuarios TareasUsuarios
    INNER JOIN tb_tareas Tareas ON Tareas.IdTarea = TareasUsuarios.IdTarea
    WHERE TareasUsuarios.IdUsuario = _IdUsuario AND Tareas.Activo = 1 AND
    TareasUsuarios.Puntualidad IS NOT NULL);
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_ObtenerPuntualidad` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_ObtenerPuntualidad`(_FechaCreacion DATETIME,
 _FechaEntregada DATETIME, _FechaEntrega DATETIME) RETURNS double
    DETERMINISTIC
BEGIN

	IF _FechaCreacion IS NOT NULL AND _FechaEntregada IS NOT NULL AND _FechaEntrega IS NOT NULL THEN

		SET @DiferenciaCreacionEntrega = TIMESTAMPDIFF(MINUTE, _FechaCreacion, _FechaEntrega);
		SET @DiferenciaEntregadaEntrega = TIMESTAMPDIFF(MINUTE, _FechaEntregada, _FechaEntrega);
		
		RETURN (100 / @DiferenciaCreacionEntrega) * @DiferenciaEntregadaEntrega;
	ELSE
		RETURN -1;
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_PromedioCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_PromedioCurso`(_IdCurso INT, _IdUsuario INT) RETURNS double
    DETERMINISTIC
BEGIN
	
	RETURN (SELECT AVG(TareasCursoUsuarios.Calificacion)
    FROM tb_tareascursousuarios TareasCursoUsuarios
	INNER JOIN tb_tareas Tareas ON Tareas.IdTarea = TareasCursoUsuarios.IdTarea
	INNER JOIN tb_cursos Cursos ON Cursos.IdCurso = Tareas.IdCurso
	WHERE TareasCursoUsuarios.IdUsuario = _IdUsuario 
    AND Cursos.IdCurso = _IdCurso  AND TareasCursoUsuarios.Estatus = 'CALIFICADA'
    GROUP BY TareasCursoUsuarios.IdUsuario);
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP FUNCTION IF EXISTS `fn_UltimoMensajeChat` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` FUNCTION `fn_UltimoMensajeChat`(_IdChat INT) RETURNS text CHARSET utf8mb4
    DETERMINISTIC
BEGIN
	
    RETURN (SELECT Mensaje FROM tb_mensajeschat 
    WHERE IdChat = _IdChat ORDER BY IdChat DESC LIMIT 1);
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_AbandonarCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_AbandonarCurso`(
	IN _IdCurso INT,
	IN _IdUsuario INT
)
BEGIN

	
	-- Validar que exista el curso:
    IF EXISTS (SELECT IdCurso FROM tb_cursos WHERE IdCurso = _IdCurso AND Activo = 1) THEN
        
        -- Validar que exista el usuario:
        IF courseroom.fn_ExisteUsuario(_IdUsuario) THEN
			
            -- Validar que  se encuentre enrolado en el curso:
            IF EXISTS (SELECT IdCurso FROM tb_cursosusuarios WHERE IdUsuario = _IdUsuario AND IdCurso = _IdCurso AND Estatus = 'Actual') THEN
				
                UPDATE tb_cursosusuarios SET Estatus = 'Suspendido' WHERE IdUsuario = _IdUsuario AND IdCurso = _IdCurso AND Estatus = 'Actual';
                
                SET @IdProfesor := -1;
                SELECT IdProfesor INTO @IdProfesor FROM tb_cursos WHERE IdCurso = _IdCurso LIMIT 1;
                
                CALL sp_AgregarAviso(@IdProfesor,CONCAT('El Usuario ',courseroom.fn_NombreCompletoUsuario(_IdUsuario),' Ha Salido Del Curso ',courseroom.fn_NombreCurso(_IdCurso)),'Curso');
                
                SELECT @IdProfesor AS "Codigo", 'El Usuario Ha Abandonado El Curso Satisfactoriamente' AS "Mensaje";
                
            ELSE
				SELECT -1 AS "Codigo", 'El Usuario No Est√° Tomando El Curso Actualmente' AS "Mensaje";
            END IF;
            
        ELSE 
			SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
        END IF;
        
	ELSE 
		SELECT -1 AS "Codigo", 'El Curso No Se Encuentra Registrado' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_AbandonarGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_AbandonarGrupo`(
    IN _IdGrupo INT,
    IN _IdUsuario INT
)
BEGIN

    DECLARE _NumeroMiembros INTEGER;
    
     IF EXISTS(SELECT IdGrupo FROM tb_grupos WHERE IdGrupo = _IdGrupo AND Activo = 1) THEN

        IF courseroom.fn_ExisteUsuario(_IdUsuario) = 1 THEN

            SET _NumeroMiembros = courseroom.fn_ObtenerNumeroMiembrosGrupo(_IdGrupo);

            SET _NumeroMiembros = (_NumeroMiembros / 2) + 1;

            UPDATE tb_usuariosgrupos SET Intentos = _NumeroMiembros 
            WHERE IdUsuario = _IdUsuario AND IdGrupo = _IdGrupo;
			
            CALL sp_AgregarAvisosGrupo(_IdGrupo,_IdUsuario,CONCAT('El Usuario ',
            courseroom.fn_NombreCompletoUsuario(_IdUsuario),' Ha Abandonado El Grupo ',courseroom.fn_NombreGrupo(_IdGrupo)),'Grupo');

            SELECT 1 AS "Codigo", 'El Usuario Ha Abandonado El Grupo Satisfactoriamente' AS "Mensaje";

        ELSE 
            SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
        END IF;

    ELSE 
        SELECT -1 AS "Codigo", 'El Grupo No Se Encuentra Registrado' AS "Mensaje";
    END IF;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ActualizarConfiguracion` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ActualizarConfiguracion`(
	IN _IdUsuario INT,
    IN _ChatsConmigo BIT,
    IN _AvisosActivos BIT,
    IN _Activo BIT
)
BEGIN
	-- Validar que exista el usuario:
    IF courseroom.fn_ExisteUsuario(_IdUsuario) = 1 THEN
		
        UPDATE tb_usuarios SET  ChatsConmigo = _ChatsConmigo, AvisosActivos = _AvisosActivos,
        Activo = _Activo WHERE IdUsuario = _IdUsuario;
        
        SELECT 1 AS "Codigo", 'Se Ha Actualizado La Configuraci√≥n Del Usuario Satisfactoriamente' AS "Mensaje";
        
    ELSE 
		
        SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
		
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ActualizarDatosAutenticacion` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ActualizarDatosAutenticacion`(
    IN _IdUsuario INT,
    IN _CorreoElectronico VARCHAR(200),
    IN _Contrasenia VARCHAR(500)
)
BEGIN

    -- Validar que los campos de correo y contrasena no sean nulos o vacios:
    IF courseroom.fn_CampoValido(__CorreoElectronico) = 0
		OR courseroom.fn_CampoValido(_Contrasenia) = 0  THEN
        SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
	ELSE

        -- Validar que exista el usuario:
        IF courseroom.fn_ExisteUsuario(_IdUsuario) = 1 THEN

            -- Validar que el correo electronico no exista en otro usuario activo:

            IF NOT EXISTS (SELECT CorreoElectronico FROM tb_usuarios WHERE IdUsuario <> _IdUsuario AND Activo = 1) THEN

                UPDATE tb_usuarios SET CorreoElectronico = _CorreoElectronico,
                Contrasenia = _Contrasenia WHERE IdUsuario = _IdUsuario;

                SELECT 1 AS "Codigo", 'Se Han Actualizado Los Datos De Autenticaci√≥n Del Usuario Satisfactoriamente' AS "Mensaje";

            ELSE
                SELECT -1 AS "Codigo", 'El Correo Electronico Ya Se Encuentra Registrado' AS "Mensaje";
            END IF;

        ELSE
            SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
        END IF;

    END IF;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ActualizarDatosGeneralesCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ActualizarDatosGeneralesCurso`(
	IN _IdCurso INT,
    IN _Nombre VARCHAR(256),
    IN _Descripcion TEXT)
BEGIN

	IF courseroom.fn_CampoValido(_Nombre) = 1 AND courseroom.fn_CampoTextoValido(_Descripcion) = 1 THEN

		IF EXISTS(SELECT IdCurso FROM tb_cursos WHERE IdCurso = _IdCurso AND Activo = 1) THEN
			
            UPDATE tb_cursos SET Nombre = _Nombre, Descripcion = _Descripcion WHERE IdCurso = _IdCurso;
			
			SELECT 1 AS "Codigo", 'Se Han Actualizado Los Datos Generales Del Curso Satisfactoriamente' AS "Mensaje";
		ELSE
			SELECT -1 AS "Codigo", 'El Curso No Se Encuentra Registrado' AS "Mensaje";
		END IF;
        
	ELSE
		SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ActualizarDatosGeneralesGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ActualizarDatosGeneralesGrupo`(
    IN _IdGrupo INT,
    IN _Nombre VARCHAR(80),
    IN _Descripcion TEXT
)
BEGIN

    IF courseroom.fn_CampoValido(_Nombre) = 1 AND courseroom.fn_CampoValido(_Descripcion) = 1 THEN
		IF EXISTS(SELECT IdGrupo FROM tb_grupos WHERE IdGrupo = _IdGrupo AND Activo = 1) THEN
			UPDATE tb_grupos SET Nombre = _Nombre, Descripcion = _Descripcion WHERE IdGrupo = _IdGrupo AND Activo = 1;
			SELECT 1 AS "Codigo", 'Se Han Actualizado Los Datos Generales Del Grupo Satisfactoriamente' AS "Mensaje";
		ELSE
			SELECT -1 AS "Codigo", 'El Grupo No Se Encuentra Registrado' AS "Mensaje";
		END IF;
    ELSE
        SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ActualizarDatosGeneralesTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ActualizarDatosGeneralesTarea`(
    IN _IdTarea INT,
    IN _Nombre VARCHAR(150),
    IN _Descripcion TEXT
)
BEGIN

    IF courseroom.fn_CampoValido(_Nombre) = 1 AND courseroom.fn_CampoValido(_Descripcion) = 1 THEN
		IF EXISTS(SELECT IdTarea FROM tb_tareas WHERE IdTarea = _IdTarea AND Activo = 1) THEN
			UPDATE tb_tareas SET Nombre = _Nombre, Descripcion = _Descripcion WHERE IdTarea = _IdTarea;
			SELECT 1 AS "Codigo", 'Se Han Actualizado Los Datos Generales De La Tarea Satisfactoriamente' AS "Mensaje";
		ELSE
			SELECT -1 AS "Codigo", 'La Tarea No Se Encuentra Registrada' AS "Mensaje";
		END IF;
    ELSE
        SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ActualizarDatosPersonales` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ActualizarDatosPersonales`(
    IN _IdUsuario INT,
    IN _Nombre VARCHAR(50),
    IN _Paterno VARCHAR(30),
    IN _Materno VARCHAR(30),
    IN _Genero VARCHAR(25),
    IN _FechaNacimiento VARCHAR(100),
    IN _IdLocalidad INT
)
BEGIN
    IF courseroom.fn_CampoValido(_Nombre) = 0
        OR courseroom.fn_CampoValido(_Paterno) = 0
        OR courseroom.fn_CampoValido(_FechaNacimiento) = 0 THEN
        SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    ELSE
        IF courseroom.fn_ExisteUsuario(_IdUsuario) = 1 THEN
            IF EXISTS(SELECT IdLocalidad FROM tb_localidades WHERE IdLocalidad = _IdLocalidad) THEN
                UPDATE tb_usuarios SET Nombre = _Nombre, Paterno = _Paterno,
                Materno = _Materno, Genero = _Genero, IdLocalidad = _IdLocalidad,
                FechaNacimiento = _FechaNacimiento WHERE IdUsuario = _IdUsuario;
                SELECT 1 AS "Codigo", 'Se Han Actualizado Los Datos Personales Del Usuario Satisfactoriamente' AS "Mensaje";
            ELSE
                SELECT -1 AS "Codigo", 'La Localidad No Se Encuentra Registrada' AS "Mensaje";
            END IF;
        ELSE
            SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
        END IF;
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ActualizarImagenCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ActualizarImagenCurso`(
    IN _IdCurso INT,
    IN _Imagen MEDIUMBLOB
)
BEGIN
    
	IF EXISTS(SELECT IdCurso FROM tb_cursos WHERE IdCurso = _IdCurso AND Activo = 1) THEN
    
		UPDATE tb_cursos SET Imagen = IF(OCTET_LENGTH(_Imagen) > 0, _Imagen, NULL) WHERE IdCurso = _IdCurso AND Activo = 1;
		SELECT 1 AS "Codigo", 'Se Ha Actualizado La Imagen Del Curso Satisfactoriamente' AS "Mensaje";
		
	ELSE
		SELECT -1 AS "Codigo", 'El Curso No Se Encuentra Registrado' AS "Mensaje";
	END IF;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ActualizarImagenGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ActualizarImagenGrupo`(
    IN _IdGrupo INT,
    IN _Imagen MEDIUMBLOB
)
BEGIN
    
	IF EXISTS(SELECT IdGrupo FROM tb_grupos WHERE IdGrupo = _IdGrupo AND Activo = 1) THEN
    
		
		UPDATE tb_grupos SET Imagen = IF(OCTET_LENGTH(_Imagen) > 0, _Imagen, NULL) WHERE IdGrupo = _IdGrupo AND Activo = 1;
		SELECT 1 AS "Codigo", 'Se Ha Actualizado La Imagen Del Grupo Satisfactoriamente' AS "Mensaje";
        
	ELSE
		SELECT -1 AS "Codigo", 'El Grupo No Se Encuentra Registrado' AS "Mensaje";
	END IF;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ActualizarImagenPerfil` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ActualizarImagenPerfil`(
    IN _IdUsuario INT,
    IN _Imagen MEDIUMBLOB
)
BEGIN
    
	IF courseroom.fn_ExisteUsuario(_IdUsuario) = 1 THEN
		
		UPDATE tb_usuarios SET Imagen = IF(OCTET_LENGTH(_Imagen) > 0, _Imagen, NULL) WHERE IdUsuario = _IdUsuario AND Activo = 1;
		SELECT 1 AS "Codigo", 'Se Ha Actualizado La Imagen Del Usuario Satisfactoriamente' AS "Mensaje";
	ELSE
		SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
	END IF;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ActualizarInformacionExtra` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ActualizarInformacionExtra`(
    IN _IdUsuario INT,
    IN _TipoUsuario VARCHAR(20),
    IN _PromedioGeneral DOUBLE,
    IN _Descripcion TEXT
)
BEGIN

	IF _TipoUsuario = 'Estudiante' THEN
		
		IF _PromedioGeneral IS NULL  THEN
			SELECT -1 AS "Codigo", 'El Promedio General No Tiene El Formato Adecuado' AS "Mensaje";
		ELSE
			IF EXISTS (SELECT IdUsuario FROM tb_usuarios WHERE IdUsuario = _IdUsuario AND TipoUsuario = 'Estudiante') THEN
				UPDATE tb_usuarios SET PromedioGeneral = _PromedioGeneral,
				Descripcion = _Descripcion WHERE IdUsuario = _IdUsuario;
				SELECT 1 AS "Codigo", 'Se ha Actualizado La Informaci√≥n Extra Del Usuario Satisfactoriamente' AS "Mensaje";
			ELSE
				SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
			END IF;

		END IF;    
    ELSEIF _TipoUsuario = 'Profesor' THEN
    
		IF EXISTS (SELECT IdUsuario FROM tb_usuarios WHERE IdUsuario = _IdUsuario AND Activo = 1 AND TipoUsuario = 'Profesor') THEN
			UPDATE tb_usuarios SET Descripcion = _Descripcion WHERE IdUsuario = _IdUsuario;
			SELECT 1 AS "Codigo", 'Se ha Actualizado La Informaci√≥n Extra Del Usuario Satisfactoriamente' AS "Mensaje";
		ELSE
			SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
		END IF;
    ELSE
		SELECT -1 AS "Codigo", 'Tipo De Usuario No Registrado' AS "Mensaje";
    
    END IF;
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_AgregarAviso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_AgregarAviso`(
	IN _IdUsuario INT,
    IN _Aviso VARCHAR(256),
    IN _TipoAviso VARCHAR(20)
)
BEGIN
	
    IF courseroom.fn_CampoValido(_Aviso) = 1 AND courseroom.fn_CampoValido(_TipoAviso) THEN
    
		IF courseroom.fn_ExisteUsuario(_IdUsuario) = 1 THEN
			INSERT INTO tb_avisos(Aviso,FechaEnvio,IdUsuario,TipoAviso) VALUES(_Aviso,courseroom.fn_ObtenerFecha(),_IdUsuario,_TipoAviso);
            SELECT LAST_INSERT_ID() AS "Codigo", 'El Aviso Ha Sido Registrado Satisfactoriamente' AS "Mensaje";
		ELSE 
			SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
		END IF;
        
	ELSE
		SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_AgregarAvisosCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_AgregarAvisosCurso`(
	IN _IdCurso INT,
    IN _IdUsuario INT,
    IN _Aviso VARCHAR(256),
    IN _TipoAviso VARCHAR(20)
)
BEGIN
	
    IF courseroom.fn_CampoValido(_Aviso) = 1 AND courseroom.fn_CampoValido(_TipoAviso) THEN
    
		IF EXISTS(SELECT IdCurso FROM tb_cursos WHERE IdCurso = _IdCurso AND Activo = 1) THEN
        
			CREATE TEMPORARY TABLE tabla_Cursos (SELECT IdUsuario FROM tb_cursosusuarios WHERE IdCurso = _IdCurso AND IdUsuario <> _IdUsuario AND Estatus = 'Actual');
            
            SET @IdUsuario := -1;
            SELECT IdUsuario  INTO @IdUsuario FROM tabla_Cursos LIMIT 1;
			WHILE @IdUsuario > 0 AND @IdUsuario IS NOT NULL DO
				INSERT INTO tb_avisos(Aviso,FechaEnvio,IdUsuario,TipoAviso) 
                VALUES(_Aviso,courseroom.fn_ObtenerFecha(),@IdUsuario,_TipoAviso);
				DELETE FROM tabla_Cursos LIMIT 1;
                SELECT IdUsuario  INTO @IdUsuario FROM tabla_Cursos LIMIT 1;
			END WHILE;
            
            DROP TABLE tabla_Cursos;
            
            SELECT 1 AS "Codigo", 'El Aviso Ha Sido Registrado En Los Usuarios Del Curso Satisfactoriamente' AS "Mensaje";
		ELSE 
			SELECT -1 AS "Codigo", 'El Curso No Se Encuentra Registrado' AS "Mensaje";
		END IF;
        
	ELSE
		SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_AgregarAvisosGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_AgregarAvisosGrupo`(
	IN _IdGrupo INT,
    IN _IdUsuario INT,
    IN _Aviso VARCHAR(256),
    IN _TipoAviso VARCHAR(20)
)
BEGIN
	
    IF courseroom.fn_CampoValido(_Aviso) = 1 AND courseroom.fn_CampoValido(_TipoAviso) THEN
    
		IF EXISTS(SELECT IdGrupo FROM tb_grupos WHERE IdGrupo = _IdGrupo AND Activo = 1) THEN
        
			CREATE TEMPORARY TABLE tabla_Grupos (SELECT IdUsuario FROM tb_usuariosgrupos WHERE IdGrupo = _IdGrupo AND fn_IntentosAceptablesGrupo(IdGrupo,IdUsuario) = 1 AND IdUsuario <> _IdUsuario);
            
            SET @IdUsuario := -1;
            SELECT IdUsuario  INTO @IdUsuario FROM tabla_Grupos LIMIT 1;
			WHILE @IdUsuario > 0 AND @IdUsuario IS NOT NULL DO
				INSERT INTO tb_avisos(Aviso,FechaEnvio,IdUsuario,TipoAviso) 
                VALUES(_Aviso,courseroom.fn_ObtenerFecha(),@IdUsuario,_TipoAviso);
				DELETE FROM tabla_Grupos LIMIT 1;
                SELECT IdUsuario  INTO @IdUsuario FROM tabla_Grupos LIMIT 1;
			END WHILE;
            
            DROP TABLE tabla_Grupos;
            
            SELECT 1 AS "Codigo", 'El Aviso Ha Sido Registrado En Los Usuarios Del Grupo Satisfactoriamente' AS "Mensaje";
		ELSE 
			SELECT -1 AS "Codigo", 'El Grupo No Se Encuentra Registrado' AS "Mensaje";
		END IF;
        
	ELSE
		SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_AgregarAvisosTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_AgregarAvisosTarea`(
	IN _IdTarea INT,
    IN _IdUsuario INT,
    IN _Aviso VARCHAR(256),
    IN _TipoAviso VARCHAR(20)
)
BEGIN
	
    IF courseroom.fn_CampoValido(_Aviso) = 1 AND courseroom.fn_CampoValido(_TipoAviso) THEN
    
		IF EXISTS(SELECT IdTarea FROM tb_tareas WHERE IdTarea = _IdTarea AND Activo = 1) THEN
        
			CREATE TEMPORARY TABLE tabla_Tareas (SELECT IdUsuario FROM tb_tareascursousuarios WHERE IdTarea = _IdTarea AND IdUsuario <> _IdUsuario);
            
            SET @IdUsuario := -1;
            SELECT IdUsuario  INTO @IdUsuario FROM tabla_Tareas LIMIT 1;
			WHILE @IdUsuario > 0 AND @IdUsuario IS NOT NULL DO
				INSERT INTO tb_avisos(Aviso,FechaEnvio,IdUsuario,TipoAviso) 
                VALUES(_Aviso,courseroom.fn_ObtenerFecha(),@IdUsuario,_TipoAviso);
				DELETE FROM tabla_Tareas LIMIT 1;
                SELECT IdUsuario  INTO @IdUsuario FROM tabla_Tareas LIMIT 1;
			END WHILE;
            
            DROP TABLE tabla_Tareas;
            
            SELECT 1 AS "Codigo", 'El Aviso Ha Sido Registrado En Los Usuarios De La Tarea Satisfactoriamente' AS "Mensaje";
		ELSE 
			SELECT -1 AS "Codigo", 'La Tarea No Se Encuentra Registrado' AS "Mensaje";
		END IF;
        
	ELSE
		SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_AgregarChat` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_AgregarChat`(
	IN _IdUsuario INT,
    IN _IdUsuarioReceptor INT
)
BEGIN

	IF courseroom.fn_ExisteUsuario(_IdUsuario) = 1 AND courseroom.fn_ExisteUsuarioChatear(_IdUsuarioReceptor) = 1 THEN
	
		-- Validar que no exista la relacion:
		IF NOT EXISTS(SELECT IdChat FROM tb_chatspersonales WHERE IdUsuarioEmisor = _IdUsuario 
			AND IdUsuarioReceptor = _IdUsuarioReceptor AND Activo = 1) AND 
			NOT EXISTS (SELECT IdChat FROM tb_chatspersonales WHERE IdUsuarioEmisor = _IdUsuarioReceptor
			AND IdUsuarioReceptor = _IdUsuario AND Activo = 1) THEN
            
				INSERT INTO tb_chatspersonales (IdUsuarioEmisor, IdUsuarioReceptor, FechaCreacion, Activo)
				VALUES (_IdUsuario,_IdUsuarioReceptor,courseroom.fn_ObtenerFecha(), 1);
                
                CALL sp_AgregarAviso(_IdUsuarioReceptor,CONCAT('Se Ha Creado El Chat Con ',courseroom.fn_NombreCompletoUsuario(_IdUsuario)),'Chat');
                
				SELECT LAST_INSERT_ID() AS "Codigo", 'Se Ha Creado El Chat Satisfactoriamente' AS "Mensaje";
		ELSE
			SELECT -1 AS "Codigo", 'El Chat Ya Se Encuentra Registrado' AS "Mensaje";
		END IF;
		
	ELSE 
	
		SELECT -1 AS "Codigo", 'Alg√∫n Usuario No Esta Disponible Para Chatear' AS "Mensaje";
		
	END IF;
    
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_AgregarCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_AgregarCurso`(
	IN _Nombre VARCHAR(256),
    IN _Descripcion TEXT,
    IN _IdProfesor INT
)
BEGIN

	IF courseroom.fn_CampoValido(_Nombre) = 1 AND courseroom.fn_CampoTextoValido(_Descripcion) = 1 THEN

		IF EXISTS(SELECT IdUsuario FROM tb_usuarios WHERE IdUsuario = _IdProfesor AND TipoUsuario = 'Profesor') THEN
			
            INSERT INTO tb_cursos(Nombre, Descripcion, FechaCreacion, IdProfesor, Activo, Finalizado) 
            VALUES(_Nombre,_Descripcion, courseroom.fn_ObtenerFecha(),_IdProfesor, 1,0);
            
            SELECT LAST_INSERT_ID() AS "Codigo", 'El Curso Ha Sido Registrado Satisfactoriamente' AS "Mensaje";
            
		ELSE 
			SELECT -1 AS "Codigo", 'El Profesor No Se Encuentra Registrado' AS "Mensaje";
		END IF;
	ELSE
		SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_AgregarDesempenoUsuario` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_AgregarDesempenoUsuario`(
	IN _TareaCalificada VARCHAR(150),
    IN _Calificacion DOUBLE,
    IN _PromedioCurso DOUBLE,
    IN _PromedioGeneral DOUBLE,
    IN _PrediccionPromedio DOUBLE,
    IN _RumboEstatusPromedio VARCHAR(20),
    IN _Puntualidad DOUBLE,
    IN _PromedioPuntualidad DOUBLE,
    IN _PrediccionPuntualidad DOUBLE,
    IN _RumboEstatusPuntualidad VARCHAR(20),
    IN _Rezago BIT,
    IN _IdUsuario INT,
    IN _IdCurso INT
)
BEGIN
	 IF courseroom.fn_ExisteUsuario(_IdUsuarioEmisor) = 1 THEN
		IF EXISTS(SELECT IdCurso FROM tb_cursos WHERE IdCurso = _IdCurso AND Activo = 1) THEN
			
            INSERT INTO tb_desempenousuariocurso (TareaCalificada,Calificacion,
			PromedioCurso,PromedioGeneral,PrediccionPromedio,RumboEstatusPromedio,Puntualidad,PromedioPuntualidad,
			PrediccionPuntualidad,RumboEstatusPuntualidad,Rezago,FechaRegistro,IdUsuario,IdCurso)
			VALUES(_TareaCalificada,_Calificacion,_PromedioCurso,_PromedioGeneral,_PrediccionPromedio,_RumboEstatusPromedio,
				_Puntualidad,_PromedioPuntualidad,_PrediccionPuntualidad,_RumboEstatusPuntualidad,_Rezago,_IdUsuario,_IdCurso);
                
			SELECT LAST_INSERT_ID() AS "Codigo", 'Se Ha Agregado El Desempe√±o Del Usuario Satisfactoriamente' AS "Mensaje";

        ELSE
			SELECT -1 AS "Codigo", 'El Curso No Se Encuentra Registrado' AS "Mensaje";
        END IF;
     ELSE
		SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
     END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_AgregarGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_AgregarGrupo`(
	IN _Nombre VARCHAR(80),
    IN _Descripcion TEXT,
    IN _IdCurso INT
)
BEGIN

	IF courseroom.fn_CampoValido(_Nombre) = 1 AND courseroom.fn_CampoTextoValido(_Descripcion) = 1 THEN
		IF EXISTS(SELECT IdCurso FROM tb_cursos WHERE IdCurso = _IdCurso AND Activo = 1 AND Finalizado = 0) THEN
			INSERT INTO tb_grupos(Nombre,Descripcion,FechaCreacion,IdCurso,Imagen,Activo)
			VALUES(_Nombre,_Descripcion,courseroom.fn_ObtenerFecha(),_IdCurso,NULL,1);
		
			SELECT LAST_INSERT_ID() AS "Codigo", 'El Grupo Ha Sido Registrado Satisfactoriamente' AS "Mensaje";

        ELSE
			SELECT -1 AS "Codigo", 'El Curso No Se Encuentra Registrado O Ya Esta Finalizado' AS "Mensaje";
        END IF;
    ELSE
		SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;	
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_AgregarInteres` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_AgregarInteres`(
    IN _IdUsuario INT,
    IN _IdTematica INT
)
BEGIN

    -- Validar que exista el usuario:
    IF EXISTS (SELECT IdUsuario FROM tb_usuarios WHERE IdUsuario = _IdUsuario AND TipoUsuario = 'Estudiante') THEN
        
        -- Validar que exista la tematica:
        IF EXISTS(SELECT IdTematica FROM tb_tematicas WHERE IdTematica = _IdTematica) THEN
            
            -- Validar que no exista la relacion:
            IF NOT EXISTS (SELECT IdTematica FROM tb_tematicasusuarios WHERE IdTematica = _IdTematica and IdUsuario = _IdUsuario) THEN

                INSERT INTO tb_tematicasusuarios VALUES (_IdTematica, _IdUsuario);
                
                SELECT 1 AS "Codigo", 'Se Ha Agregado El Inter√©s Al Usuario Satisfactoriamente' AS "Mensaje";

            ELSE 
                SELECT -1 AS "Codigo", 'El Inter√©s Ya Se Encuentra Registrado En Ese Usuario' AS "Mensaje";
            END IF;

        ELSE
            SELECT -1 AS "Codigo", 'El Inter√©s No Se Encuentra Registrado' AS "Mensaje";
        END IF;
        
    ELSE
        SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_AgregarPregunta` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_AgregarPregunta`(
    IN _IdUsuario INT,
    IN _Pregunta VARCHAR(200),
    IN _Descripcion TEXT
)
BEGIN

    IF courseroom.fn_CampoValido(_Descripcion) = 1 AND courseroom.fn_CampoValido(_Pregunta) = 1 THEN

        IF courseroom.fn_ExisteUsuario(_IdUsuario) = 1 THEN
        
            INSERT INTO tb_preguntas (Pregunta, Descripcion, FechaCreacion, Estatus ,IdUsuario, Activo)
            VALUES (_Pregunta, _Descripcion, courseroom.fn_ObtenerFecha(), 'Abierta', _IdUsuario, 1);

            SELECT LAST_INSERT_ID() AS "Codigo", 'Se Ha Agregado La Pregunta Satisfactoriamente' AS "Mensaje";

        ELSE
            SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
        END IF;
    ELSE 
        SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;
        
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_AgregarRespuestaCuestionario` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_AgregarRespuestaCuestionario`(
	IN _IdCurso INT,
    IN _IdUsuario INT,
    IN _IdPregunta INT,
    IN _Respuesta VARCHAR(15)
)
BEGIN
	

	IF EXISTS(SELECT IdPregunta FROM tb_preguntascuestionarios WHERE IdPregunta = _IdPregunta) THEN

		IF EXISTS(SELECT CursosUsuarios.IdCurso FROM 
			tb_cursosusuarios CursosUsuarios
			INNER JOIN tb_cursos Cursos ON Cursos.IdCurso = CursosUsuarios.IdCurso 
			WHERE CursosUsuarios.IdCurso = _IdCurso AND Cursos.Finalizado = 1 AND Cursos.Activo = 1
			AND CursosUsuarios.IdUsuario = _IdUsuario AND CursosUsuarios.Estatus = 'Actual') THEN
			
            IF (SELECT COUNT(IdUsuario) FROM tb_cuestionarios WHERE IdUsuario = _IdUsuario AND IdCurso = _IdCurso) <= 20 THEN
            
				INSERT INTO tb_cuestionarios(IdCurso,IdUsuario,IdPregunta,Respuesta) 
				VALUES(_IdCurso, _IdUsuario, _IdPregunta, _Respuesta);
				
				SELECT LAST_INSERT_ID() AS "Codigo", 'Se Ha Registrado La Respuesta En El Cuestionario Correctamente' AS "Mensaje";
			ELSE
                SELECT -1 AS "Codigo", 'El Cuestionario Ya Ha Sido Contestado Con Anterioridad' AS "Mensaje";
			END IF;
		ELSE  
			SELECT -1 AS "Codigo", 'El Cuestionario No Puede Ser Respondido Por El Usuario En Este Momento' AS "Mensaje";
		END IF;
	ELSE  
		SELECT -1 AS "Codigo", 'La Pregunta No Se Encuentra Registrada' AS "Mensaje";
	END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_AgregarSesion` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_AgregarSesion`(
    IN _IdUsuario INT,
    IN _Dispositivo VARCHAR(50),
    IN _Fabricante VARCHAR(30),
    IN _Uuid VARCHAR(64),
    IN _DireccionIP VARCHAR(100)
)
BEGIN

	IF courseroom.fn_CampoValido(_Dispositivo) = 1 AND 
        courseroom.fn_CampoValido(_Fabricante) = 1 AND
        courseroom.fn_CampoValido(_Uuid) = 1 AND
        courseroom.fn_CampoValido(_DireccionIP) = 1 THEN
        
        IF courseroom.fn_ExisteUsuario(_IdUsuario) = 1 THEN
			INSERT INTO tb_sesiones (Uuid, Dispositivo, Fabricante, UltimaConexion, DireccionIP, IdUsuario, Activo)
			VALUES (_Uuid, _Dispositivo, _Fabricante, courseroom.fn_ObtenerFecha(), _DireccionIP, _IdUsuario, 1);

			SELECT LAST_INSERT_ID() AS "Codigo", 'Se Ha Agregado La Sesi√≥n Correctamente' AS "Mensaje";
	
        ELSE 
            SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
        END IF;
    ELSE
		SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_AgregarTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_AgregarTarea`(
	IN _IdCurso INT,
    IN _Nombre VARCHAR(150),
    IN _Descripcion TEXT,
    IN _FechaEntrega VARCHAR(100)
)
BEGIN

	IF courseroom.fn_CampoValido(_Nombre) = 1 AND courseroom.fn_CampoTextoValido(_Descripcion) = 1
		AND courseroom.fn_CampoValido(_FechaEntrega) = 1 THEN

		IF EXISTS(SELECT IdCurso FROM tb_cursos WHERE IdCurso = _IdCurso AND Activo = 1) THEN
			
            INSERT INTO tb_tareas(Nombre,Descripcion,FechaCreacion,FechaEntrega,IdCurso,Activo)
			VALUES (_Nombre, _Descripcion, courseroom.fn_ObtenerFecha(), _FechaEntrega, _IdCurso, 1);
            
			CALL sp_AgregarAvisosCurso(_IdCurso,-1,CONCAT('Se Ha Creado La Tarea ',_Nombre,' En El Curso ',courseroom.fn_NombreCurso(_IdCurso)),'Curso');
            
            CALL sp_AgregarTareaUsuario(_IdCurso,LAST_INSERT_ID());
            
            SELECT LAST_INSERT_ID() AS "Codigo", 'La Tarea Ha Sido Registrada Satisfactoriamente' AS "Mensaje";

		ELSE
			SELECT -1 AS "Codigo", 'El Curso No Se Encuentra Registrado' AS "Mensaje";
		END IF;
	 ELSE
        SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_AgregarTareaPendienteGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_AgregarTareaPendienteGrupo`(
    IN _IdGrupo INT,
    IN _Nombre VARCHAR(100),
    IN _Descripcion TEXT,
    IN _FechaFinalizacion VARCHAR(100),
    IN _IdUsuarioACargo INT
)
BEGIN

    IF courseroom.fn_CampoValido(_Nombre) = 1 AND courseroom.fn_CampoTextoValido(_Descripcion) = 1
		AND courseroom.fn_CampoValido(_FechaFinalizacion) = 1 THEN
        IF EXISTS(SELECT IdGrupo FROM tb_grupos WHERE IdGrupo = _IdGrupo AND Activo = 1) THEN

            IF courseroom.fn_ExisteUsuario(_IdUsuarioACargo) = 1 THEN
            
                INSERT INTO tb_tareaspendientesgrupos (Nombre, Descripcion, FechaCreacion, FechaFinalizacion, Estatus, IdUsuarioACargo, IdGrupo)
                VALUES (_Nombre, _Descripcion, courseroom.fn_ObtenerFecha(), _FechaFinalizacion, 'Pendiente', _IdUsuarioACargo, _IdGrupo);

				CALL sp_AgregarAviso(_IdUsuarioACargo,CONCAT('Se Le Ha Asignado Una Nueva Tarea Pendiente Del Grupo ',courseroom.fn_NombreGrupo(_IdGrupo)),'Grupo');

                SELECT LAST_INSERT_ID() AS "Codigo", 'Se ha Agregado La Tarea Pendiente Satisfactoriamente' AS "Mensaje";
            ELSE 
                SELECT -1 AS "Codigo", 'El Usuario A Cargo No Se Encuentra Registrado' AS "Mensaje";
            END IF;

        ELSE 
            SELECT -1 AS "Codigo", 'El Grupo No Se Encuentra Registrado' AS "Mensaje";
        END IF;
    ELSE
        SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_AgregarTareaUsuario` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_AgregarTareaUsuario`(
	IN _IdCurso INT,
    IN _IdTarea INT
)
BEGIN
	IF EXISTS(SELECT IdCurso FROM tb_cursos WHERE IdCurso = _IdCurso AND Activo = 1) THEN
		
        IF EXISTS(SELECT IdTarea FROM tb_tareas WHERE IdTarea = _IdTarea AND Activo = 1 AND IdCurso = _IdCurso) THEN
			
            CREATE TEMPORARY TABLE tabla_Cursos (SELECT IdUsuario FROM tb_cursosusuarios WHERE IdCurso = _IdCurso AND IdUsuario <> _IdUsuario AND Estatus = 'Actual');
            
            SET @IdUsuario := -1;
            SELECT IdUsuario  INTO @IdUsuario FROM tabla_Cursos LIMIT 1;
			WHILE @IdUsuario > 0 AND @IdUsuario IS NOT NULL DO
				INSERT INTO tb_tareascursousuarios(IdTarea,IdUsuario,Estatus) 
                VALUES(_IdTarea,@IdUsuario,'PENDIENTE');
				DELETE FROM tabla_Cursos LIMIT 1;
                SELECT IdUsuario INTO @IdUsuario FROM tabla_Cursos LIMIT 1;
			END WHILE;
            
            DROP TABLE tabla_Cursos;
            
            SELECT 1 AS "Codigo", 'La Tarea Ha Sido Asignada En Los Usuarios Del Curso Satisfactoriamente' AS "Mensaje";
        ELSE 
			SELECT -1 AS "Codigo", 'La Tarea No Se Encuentra Registrada' AS "Mensaje";
		END IF;
        
    ELSE 
		SELECT -1 AS "Codigo", 'El Curso No Se Encuentra Registrado' AS "Mensaje";
	END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_AgregarTematica` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_AgregarTematica`(
    IN _IdCurso INT,
    IN _IdTematica INT
)
BEGIN

    -- Validar que exista el curso:
    IF EXISTS (SELECT IdCurso FROM tb_cursos WHERE IdCurso = _IdCurso) THEN
        
        -- Validar que exista la tematica:
        IF EXISTS(SELECT IdTematica FROM tb_tematicas WHERE IdTematica = _IdTematica) THEN
            
            -- Validar que no exista la relacion:
            IF NOT EXISTS (SELECT IdTematica FROM tb_tematicascursos WHERE IdTematica = _IdTematica AND IdCurso = _IdCurso) THEN

                INSERT INTO tb_tematicascursos VALUES (_IdTematica, _IdCurso);
                
                SELECT 1 AS "Codigo", 'Se Ha Agregado La Tem√°tica Al Curso Satisfactoriamente' AS "Mensaje";

            ELSE 
                SELECT -1 AS "Codigo", 'La Tem√°tica Ya Se Encuentra Registrada En Ese Curso' AS "Mensaje";
            END IF;

        ELSE
            SELECT -1 AS "Codigo", 'La Tem√°tica No Se Encuentra Registrada' AS "Mensaje";
        END IF;
        
    ELSE
        SELECT -1 AS "Codigo", 'El Curso No Se Encuentra Registrado' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_AgregarUsuario` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_AgregarUsuario`(
    IN _CorreoElectronico VARCHAR(200),
    IN _Contrasenia VARCHAR(500),
    IN _Nombre VARCHAR(50),
    IN _Paterno VARCHAR(30),
    IN _Materno VARCHAR(30),
    IN _IdLocalidad INT,
    IN _Genero VARCHAR(25),
    IN _FechaNacimiento VARCHAR(100),
    IN _TipoUsuario VARCHAR(30),
    IN _Imagen MEDIUMBLOB,
    IN _PromedioGeneral DOUBLE,
    IN _Descripcion TEXT
)
BEGIN
	
    IF courseroom.fn_CampoValido(_CorreoElectronico) = 0 
		OR courseroom.fn_CampoValido(_Contrasenia) = 0  
        OR courseroom.fn_CampoValido(_Nombre) = 0 
		OR courseroom.fn_CampoValido(_Paterno) = 0
        OR courseroom.fn_CampoValido(_FechaNacimiento) = 0 
        OR (_TipoUsuario <> 'Estudiante' AND _TipoUsuario <> 'Profesor') THEN
            SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    ELSE
		-- Validar que exista la localidad:
		IF EXISTS(SELECT IdLocalidad FROM tb_localidades WHERE IdLocalidad = _IdLocalidad) THEN
			SET _CorreoElectronico = UPPER(_CorreoElectronico);
            -- Validar que no exista el correo:
			IF NOT EXISTS (SELECT CorreoElectronico FROM tb_usuarios WHERE CorreoElectronico = _CorreoElectronico AND Activo = 1) THEN
            
				IF _TipoUsuario = 'Estudiante' THEN
                    
					INSERT INTO tb_usuarios (CorreoElectronico, Contrasenia, Nombre, Paterno, Materno, Genero, FechaNacimiento, 
					PromedioGeneral, TipoUsuario,Descripcion, Imagen, IdLocalidad, FechaCreacion,ChatsConmigo,AvisosActivos,Activo)
					VALUES (UPPER(_CorreoElectronico), _Contrasenia, _Nombre, _Paterno, _Materno, _Genero, _FechaNacimiento,
					_PromedioGeneral, _TipoUsuario, _Descripcion, IF(OCTET_LENGTH(_Imagen) > 0, _Imagen,NULL), _IdLocalidad, courseroom.fn_ObtenerFecha(),1,1,1);
					
                    SELECT LAST_INSERT_ID() AS "Codigo", 'Se Ha Agregado El Usuario Satisfactoriamente' AS "Mensaje";
			
				ELSE
                
					INSERT INTO tb_usuarios (CorreoElectronico, Contrasenia, Nombre, Paterno, Materno, Genero, FechaNacimiento, 
					PromedioGeneral, TipoUsuario, Descripcion, Imagen, IdLocalidad, FechaCreacion, ChatsConmigo,AvisosActivos,Activo)
					VALUES (UPPER(_CorreoElectronico), _Contrasenia, _Nombre, _Paterno, _Materno, _Genero, _FechaNacimiento,
					-1, _TipoUsuario, _Descripcion, IF(OCTET_LENGTH(_Imagen) > 0, _Imagen,NULL), _IdLocalidad, courseroom.fn_ObtenerFecha(), 1,1,1);

					SELECT LAST_INSERT_ID() AS "Codigo", 'Se Ha Agregado El Usuario Satisfactoriamente' AS "Mensaje";
                    
				END IF;

			ELSE
				SELECT -1 AS "Codigo", 'El Correo Electronico Ya Se Encuentra Registrado' AS "Mensaje";
			END IF;  
        
		ELSE
			SELECT -1 AS "Codigo", 'La Localidad No Se Encuentra Registrada' AS "Mensaje";
		END IF;

    END IF;
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_AgregarUsuarioAGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_AgregarUsuarioAGrupo`(
	IN _IdUsuario INT,
    IN _IdGrupo INT
)
BEGIN

	IF courseroom.fn_ExisteUsuario(_IdUsuario) = 1 THEN

		If EXISTS(SELECT IdGrupo FROM tb_grupos WHERE IdGrupo = _IdGrupo AND Activo = 1) THEN
			-- Validar que no exista el registro:
			IF NOT EXISTS(SELECT IdGrupo FROM tb_usuariosgrupos WHERE IdUsuario = _IdUsuario AND IdGrupo = _IdGrupo) THEN
				INSERT INTO tb_usuariosgrupos(IdUsuario,IdGrupo,FechaIngreso,Intentos) 
				VALUES (_IdUsuario,_IdGrupo,courseroom.fn_ObtenerFecha(),0);
				
				CALL sp_AgregarAvisosGrupo(_IdGrupo,_IdUsuario,CONCAT('El Usuario ',
					courseroom.fn_NombreCompletoUsuario(_IdUsuario),' Ha Sido Agregado Al Grupo ',courseroom.fn_NombreGrupo(_IdGrupo)),'Grupo');

				SELECT 1 AS "Codigo", 'El Usuario Ha Sido Registrado En El Grupo Satisfactoriamente' AS "Mensaje";
				
			ELSE
				SELECT -1 AS "Codigo", 'El Usuario Ya Se Encuentra Registrado En Ese Grupo' AS "Mensaje";
			END IF;
		ELSE
			SELECT -1 AS "Codigo", 'El Grupo No Se Encuentra Registrado' AS "Mensaje";
		END IF;
	ELSE
		SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
	END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_BuscarChatsPersonales` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_BuscarChatsPersonales`(
	IN _Busqueda VARCHAR(250),
    IN _IdUsuario INT
)
BEGIN

		SELECT Chats.IdChat, courseroom.fn_NombreCompleto(Usuarios.Nombre, Usuarios.Paterno, Usuarios.Materno) AS NombreCompleto,
		Chats.FechaCreacion, IF(courseroom.fn_UltimoMensajeChat(Chats.IdChat) IS NULL, ' ',courseroom.fn_UltimoMensajeChat(Chats.IdChat)) AS UltimoMensaje
		FROM tb_chatspersonales Chats
		INNER JOIN tb_usuarios Usuarios ON Chats.IdUsuarioEmisor = Usuarios.IdUsuario
		WHERE (Chats.IdUsuarioEmisor = _IdUsuario OR Chats.IdUsuarioReceptor = _IdUsuario) AND Chats.Activo = 1
		AND CONCAT(Usuarios.Nombre,' ',Usuarios.Paterno, ' ',Usuarios.Materno) LIKE CONCAT('%',_Busqueda,'%')
		ORDER BY Chats.IdChat DESC LIMIT 250;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_BuscarCursos` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_BuscarCursos`(
    IN _Busqueda VARCHAR(100),
    IN _IdUsuario INT
)
BEGIN
	SELECT Cursos.IdCurso, Cursos.Nombre,  Usuarios.IdUsuario, 
    courseroom.fn_NombreCompleto(Usuarios.Nombre,Usuarios.Paterno,Usuarios.Materno) AS NombreCompleto,
    courseroom.fn_ObtenerListaTematicasCurso(Cursos.IdCurso) AS ListaTematicas, Cursos.FechaCreacion, 
	CAST(CursosUsuarios.Estatus AS CHAR) As Estatus FROM tb_cursos Cursos 
    INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = Cursos.IdProfesor
    INNER JOIN tb_cursosusuarios CursosUsuarios ON CursosUsuarios.IdCurso = Cursos.IdCurso
    WHERE CursosUsuarios.IdUsuario = _IdUsuario 
    AND Cursos.Nombre LIKE CONCAT('%',Cursos.Nombre,'%')
    ORDER BY Cursos.IdCurso DESC LIMIT 250;
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_BuscarGrupos` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_BuscarGrupos`(
    IN _Busqueda VARCHAR(250),
    IN	_IdUsuario INT
)
BEGIN

	SELECT Grupos.IdGrupo, Grupos.Nombre, Cursos.IdCurso, Cursos.Nombre AS NombreCurso, Grupos.FechaCreacion FROM tb_grupos Grupos
	INNER JOIN tb_cursos Cursos ON Cursos.IdCurso = Grupos.IdCurso
	INNER JOIN tb_usuariosgrupos UsuariosGrupos ON UsuariosGrupos.IdGrupo = Grupos.IdGrupo
	WHERE UsuariosGrupos.IdUsuario = _IdUsuario 
	AND Grupos.Nombre LIKE CONCAT('%',_Busqueda,'%')
	OR Cursos.Nombre LIKE CONCAT('%',_Busqueda,'%')
	AND Grupos.Activo = 1 LIMIT 250;


END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_BuscarPreguntas` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_BuscarPreguntas`(
    IN _Busqueda VARCHAR (250)
)
BEGIN 

	SELECT Preguntas.IdPregunta, courseroom.fn_NombreCompleto(Usuarios.Nombre,Usuarios.Paterno,Usuarios.Materno) AS NombreCompleto, 
    Preguntas.Pregunta, Preguntas.FechaCreacion, CAST(Preguntas.Estatus AS CHAR) AS Estatus
	FROM tb_preguntas Preguntas
	INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = Preguntas.IdUsuario
	WHERE Preguntas.Activo = 1
    AND (
    Preguntas.Pregunta LIKE CONCAT('%',_Busqueda,'%')
	OR CONCAT(Usuarios.Nombre,' ',Usuarios.Paterno,' ',Usuarios.Materno) LIKE CONCAT('%',_Busqueda,'%')
    ) LIMIT 250;
  
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_BuscarTareas` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_BuscarTareas`(
    IN _Busqueda VARCHAR(250),
    IN _IdUsuario INT
)
BEGIN

    SELECT Tareas.IdTarea, Tareas.Nombre, Cursos.IdCurso, Cursos.Nombre AS NombreCurso, Tareas.FechaCreacion, Tareas.FechaEntrega, 
    CAST(TareasCursoUsuarios.Estatus AS CHAR) AS Estatus
	FROM tb_tareas Tareas
	INNER JOIN tb_cursos Cursos ON Cursos.IdCurso = Tareas.IdCurso
	INNER JOIN tb_tareascursousuarios TareasCursoUsuarios ON TareasCursoUsuarios.IdTarea = Tareas.IdTarea 
	WHERE TareasCursoUsuarios.IdUsuario = _IdUsuario AND Tareas.Activo = 1 
    AND (
        Tareas.Nombre LIKE CONCAT('%',_Busqueda,'%')
	    OR Cursos.Nombre LIKE CONCAT('%',_Busqueda,'%')
    )
    ORDER BY Tareas.IdTarea DESC LIMIT 250;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_CalificarTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_CalificarTarea`(
	IN _IdTarea INT,
    IN _IdUsuario INT,
    IN _Calificacion DOUBLE
)
BEGIN
    
    IF EXISTS(SELECT IdTarea FROM tb_tareascursousuarios WHERE IdTarea = _IdTarea AND IdUsuario = _IdUsuario) THEN

			-- No se encuentra retrasada, actualizar a entregada:
			UPDATE tb_tareascursousuarios SET Estatus = 'CALIFICADA', 
			FechaCalificacion = courseroom.fn_ObtenerFecha(), 
			Calificacion = _Calificacion
			WHERE IdTarea = _IdTarea AND IdUsuario = _IdUsuario;	
            
            CALL sp_AgregarAviso(_IdUsuario,CONCAT('Tu Profesor Ha Calificado Tu Envi√≥ De La Tarea ',courseroom.fn_NombreTarea(_IdTarea)),'Tarea');
            
            SELECT 1 AS "Codigo", 'La Calificaci√≥n Ha Sido Agregada A La Tarea Satisfactoriamente' AS "Mensaje";
			
	ELSE
		SELECT -1 AS "Codigo", 'La Tarea No Se Encuentra Ligada Al Usuario' AS "Mensaje";
    
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_CambiarEstatusTareaPendienteGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_CambiarEstatusTareaPendienteGrupo`(
    IN _IdTareaPendiente INT,
    IN _NuevoEstatus VARCHAR(20),
    IN _IdUsuario INT
)
BEGIN
	
    IF courseroom.fn_CampoValido(_NuevoEstatus) = 1 AND _NuevoEstatus <> 'Pendiente' THEN
    
		SELECT @Estatus := Estatus FROM tb_tareaspendientesgrupos WHERE IdTareaPendiente = _IdTareaPendiente AND IdUsuarioACargo = _IdUsuario;
		IF @Estatus IS NOT NULL AND @Estatus <> 'Finalizada' THEN
			
            IF _NuevoEstatus = 'Realizado' THEN
				
                UPDATE tb_tareaspendientesgrupos SET Estatus = _NuevoEstatus WHERE 
                IdTareaPendiente = _IdTareaPendiente;
				
                SELECT 1 AS "Codigo", 'El Estatus De La Tarea Pendiente Se Ha Actualizado Satisfactoriamente' AS "Mensaje";
                
            ELSEIF _NuevoEstatus = 'Finalizada' THEN
				
                UPDATE tb_tareaspendientesgrupos SET Estatus = _NuevoEstatus, FechaFInalizacion = courseroom.fn_ObtenerFecha() 
                WHERE  IdTareaPendiente = _IdTareaPendiente;
				
                SELECT 1 AS "Codigo", 'Estatus De La Tarea Pendiente Modificado Satisfactoriamente' AS "Mensaje";
                
            ELSE
				SELECT -1 AS "Codigo", 'El Estatus No Es Permisible Al Cambio' AS "Mensaje";
            END IF;
            
		ELSE
			SELECT -1 AS "Codigo", 'La Tarea Pendiente No Se Encuentra Registrada<br>, 
            Ya Ha Sido Finalizada O<br>El Usaurio No Tiene Permiso Para Cambiar' AS "Mensaje";
		END IF;
    ELSE  
		SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_CerrarSesion` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_CerrarSesion`(
    IN _IdUsuario INT,
    IN _IdSesion INT
)
BEGIN

	IF courseroom.fn_ExisteUsuario(_IdUsuario) = 1 THEN 
		IF EXISTS(SELECT IdSesion FROM tb_sesiones WHERE IdSesion = _IdSesion AND Activo = 1) THEN
			UPDATE tb_sesiones SET Activo = 0, UltimaConexion = courseroom.fn_ObtenerFecha()
			WHERE IdSesion = _IdSesion AND IdUsuario = _IdUsuario;
			SELECT 1 AS "Codigo", 'OK' AS "Mensaje";
		ELSE
			SELECT -1 AS "Codigo", 'La Sesi√≥n No Se Encuentra Registrada' AS "Mensaje";
        END IF;
	ELSE
		SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
	END IF;
    

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_EnrolarUsuarioCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_EnrolarUsuarioCurso`(
	IN _IdCurso INT,
    IN _IdUsuario INT
)
BEGIN
	
	-- Validar que exista el curso:
    IF EXISTS (SELECT IdCurso FROM tb_cursos WHERE IdCurso = _IdCurso AND Activo = 1) THEN
        
        -- Validar que exista el usuario:
        IF courseroom.fn_ExisteUsuario(_IdUsuario) THEN
			
            -- Validar que no se encuentre enrolado en el curso:
            IF NOT EXISTS (SELECT IdCurso FROM tb_cursosusuarios WHERE IdUsuario = _IdUsuario AND IdCurso = _IdCurso) THEN
				
                INSERT INTO tb_cursosusuarios(IdCurso, IdUsuario, Estatus, FechaIngreso, Calificacion) 
                VALUES(_IdCurso, _IdUsuario, 'Actual', courseroom.fn_ObtenerFecha(), -1);
                
                SET @IdProfesor = -1;
                SELECT IdProfesor INTO @IdProfesor FROM tb_cursos WHERE IdCurso = _IdCurso LIMIT 1;
                CALL sp_AgregarAviso(@IdProfesor,CONCAT('El Usuario ',courseroom.fn_NombreCompletoUsuario(_IdUsuario),' Se Ha Enrolado Al Curso ',courseroom.fn_NombreCurso(_IdCurso)),'Curso');
                
                SELECT @IdProfesor AS "Codigo", 'El Usuario Ha Sido Enrolado Al Curso Satisfactoriamente' AS "Mensaje";
                
            ELSE
				SELECT -1 AS "Codigo", 'El Usuario Ya Ha Sido Enrolado Al Curso Anteriormente' AS "Mensaje";
            END IF;
            
        ELSE 
			SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
        END IF;
        
	ELSE 
		SELECT -1 AS "Codigo", 'El Curso No Se Encuentra Registrado' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_EntregarTareaUsuario` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_EntregarTareaUsuario`(
	IN _IdTarea INT,
    IN _IdUsuario INT
)
BEGIN

	IF EXISTS(SELECT IdTarea FROM tb_tareascursousuarios WHERE IdTarea = _IdTarea AND IdUsuario = _IdUsuario) THEN

		SET @FechaEntrega = '';
		SET @FechaCreacion = '';
		SET @Estatus = '';
		
		SELECT FechaEntrega, FechaCreacion, CAST(Estatus AS CHAR) INTO @FechaEntrega,@FechaCreacion,@Estatus 
		FROM tb_tareas WHERE IdTarea = _IdTarea AND Activo = 1;
		
		-- Validar que exista la tarea:
		IF courseroom.fn_CampoValido(@FechaEntrega) = 1 
			AND courseroom.fn_CampoValido(@FechaCreacion) = 1
			AND courseroom.fn_CampoValido(@Estatus) = 1 THEN
		
			IF @Estatus = 'PENDIENTE' OR  @Estatus = 'ENTREGADA' 
				OR @Estatus = 'ENTREGADA CON RETRASO' THEN 
			
				-- Validar que la entrega no este retrasada:
                
                SET @FechaDeCreacion = courseroom.fn_ObtenerFechaHora(@FechaCreacion);
                SET @FechaDeEntrega = courseroom.fn_ObtenerFechaHora(@FechaEntrega);
                SET @FechaDeEntregada = NOW();
				
				IF @FechaDeEntregada BETWEEN @FechaDeCreacion AND @FechaDeEntrega THEN
					
					-- No se encuentra retrasada, actualizar a entregada:
					UPDATE tb_tareascursousuarios SET Estatus = 'ENTREGADA', 
                    FechaSubida = courseroom.fn_ObtenerFecha(), 
                    Puntualidad = courseroom.fn_ObtenerPuntualidad(@FechaDeCreacion,@FechaDeEntregada,@FechaDeEntrega)
                    WHERE IdTarea = _IdTarea AND IdUsuario = _IdUsuario;
					
					SET @IdProfesor = -1;
					SELECT Cursos.IdProfesor INTO @IdProfesor FROM tb_cursos Cursos  INNER JOIN tb_tareas Tareas ON Tareas.IdCurso = Cursos.IdCurso WHERE Tareas.IdTarea = _IdTarea LIMIT 1;
					CALL sp_AgregarAviso(@IdProfesor,CONCAT('El Usuario ',courseroom.fn_NombreCompletoUsuario(_IdUsuario),' Ha Entregado La Tarea ',courseroom.fn_NombreTarea(_IdTarea)),'Tarea');
                    
                    SELECT @IdProfesor AS "Codigo", 'La Tarea Ha Sido Entregada Satisfactoriamente' AS "Mensaje";
                    
				ELSE
					-- Se encuentra retrasada:
                    
					UPDATE tb_tareascursousuarios SET Estatus = 'ENTREGADA CON RETRASO', 
                    FechaSubida = courseroom.fn_ObtenerFecha(), 
                    Puntualidad = courseroom.fn_ObtenerPuntualidad(@FechaDeCreacion,@FechaDeEntregada,@FechaDeEntrega)
                    WHERE IdTarea = _IdTarea AND IdUsuario = _IdUsuario;
					
                    SELECT 1 AS "Codigo", 'La Tarea Ya Sido Entregada Con Retraso Satisfactoriamente' AS "Mensaje";
                    
				END IF;
			ELSEIF @Estatus = 'CALIFICADA' THEN
				SELECT -1 AS "Codigo", 'La Tarea Ya Ha Sido Calificada' AS "Mensaje";
			ELSE
				SELECT -1 AS "Codigo", 'El Estatus De La Tarea No Es Pemisible A Entrega' AS "Mensaje";
			END IF;
		
		ELSE 
		
			SELECT -1 AS "Codigo", 'La Tarea No Se Encuentra Registrada' AS "Mensaje";
		END IF;
	ELSE
		SELECT -1 AS "Codigo", 'La Tarea No Se Encuentra Ligada Al Usuario' AS "Mensaje";
    
    END IF;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_EnviarArchivoAdjuntoTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_EnviarArchivoAdjuntoTarea`(
    IN _IdTarea INT,
    IN _NombreArchivo VARCHAR(100),
    IN _Archivo LONGBLOB,
    IN _Extension VARCHAR(32)
)
BEGIN
    IF courseroom.fn_CampoValido(_NombreArchivo) = 1 AND corseroom.fn_CampoValido(_Extension) = 1 THEN

        IF EXISTS(SELECT IdTarea FROM tb_tareas WHERE IdTarea = _IdTarea AND Activo = 1) THEN

			INSERT INTO tb_archivoscompartidosgrupos (NombreArchivo, Archivo, Extension, FechaSubido, IdUsuario, IdTarea, Activo)
			VALUES (_NombreArchivo, IF(OCTET_LENGTH(_Archivo) > 0, _Archivo, NULL), _Extension, courseroom.fn_ObtenerFecha(),_IdUsuario, _IdTarea, 1);

			SELECT LAST_INSERT_ID() AS "Codigo", 'Archivo Adjuntado A La Tarea Satisfactoriamente' AS "Mensaje";
	   

        ELSE 
            SELECT -1 AS "Codigo", 'La Tarea No Se Encuentra Registrada' AS "Mensaje";
        END IF;

    ELSE 
        SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_EnviarArchivoCompartidoGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_EnviarArchivoCompartidoGrupo`(
    IN _IdGrupo INT,
    IN _IdUsuario INT,
    IN _NombreArchivo VARCHAR(100),
    IN _Archivo LONGBLOB,
    IN _Extension VARCHAR(32)
)
BEGIN
    IF courseroom.fn_CampoValido(_NombreArchivo) = 1 AND corseroom.fn_CampoValido(_Extension) = 1 THEN

        IF EXISTS(SELECT IdGrupo FROM tb_grupos WHERE IdGrupo = _IdGrupo AND Activo = 1) THEN

            IF courseroom.fn_ExisteUsuario(_IdUsuario) = 1 THEN

                INSERT INTO tb_archivoscompartidosgrupos (NombreArchivo, Archivo, Extension, FechaSubido, IdUsuario, IdGrupo, Activo)
                VALUES (_NombreArchivo, IF(OCTET_LENGTH(_Archivo) > 0, _Archivo, NULL), _Extension, courseroom.fn_ObtenerFecha(),_IdUsuario, _IdGrupo, 1);

				CALL sp_AgregarAvisosGrupo(_IdGrupo,_IdUsuario,CONCAT('El Usuario ',
				courseroom.fn_NombreCompletoUsuario(_IdUsuario),' Ha Compartido Un Nuevo Archivo El Grupo ',courseroom.fn_NombreGrupo(_IdGrupo)),'Grupo');

                SELECT LAST_INSERT_ID() AS "Codigo", 'Archivo Compartido Agregado Satisfactoriamente' AS "Mensaje";
            ELSE 
                SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
            END IF;

        ELSE 
            SELECT -1 AS "Codigo", 'El Grupo No Se Encuentra Registrado' AS "Mensaje";
        END IF;

    ELSE 
        SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_EnviarArchivoSubidoTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_EnviarArchivoSubidoTarea`(
	IN _IdTarea INT,
    IN _IdUsuario INT,
    IN _NombreArchivo VARCHAR(100),
    IN _Archivo LONGBLOB,
    IN _Extension VARCHAR(32)
)
BEGIN
    IF courseroom.fn_CampoValido(_NombreArchivo) = 1 AND corseroom.fn_CampoValido(_Extension) = 1 THEN

        IF EXISTS(SELECT IdTarea FROM tb_tareas WHERE IdTarea = _IdTarea AND Activo = 1) THEN

			INSERT INTO tb_archivossubidostareas (NombreArchivo, Archivo, Extension, FechaEnviado, IdUsuario, IdTarea, Activo)
			VALUES (_NombreArchivo, IF(OCTET_LENGTH(_Archivo) > 0, _Archivo, NULL), _Extension, courseroom.fn_ObtenerFecha(),_IdUsuario, _IdTarea, 1);

			SELECT LAST_INSERT_ID() AS "Codigo", 'Adchivo Subido A La Tarea Satisfactoriamente' AS "Mensaje";
	   
        ELSE 
            SELECT -1 AS "Codigo", 'La Tarea No Se Encuentra Registrada' AS "Mensaje";
        END IF;

    ELSE 
        SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_EnviarMaterialCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_EnviarMaterialCurso`(
    IN _IdCurso INT,
    IN _IdUsuario INT,
    IN _NombreArchivo VARCHAR(100),
    IN _Archivo LONGBLOB,
    IN _Extension VARCHAR(32)
)
BEGIN
    IF courseroom.fn_CampoValido(_NombreArchivo) = 1 AND corseroom.fn_CampoValido(_Extension) = 1 THEN

        IF EXISTS(SELECT IdCurso FROM tb_cursos WHERE IdCurso = _IdCurso AND Activo = 1) THEN

            IF courseroom.fn_ExisteUsuario(_IdUsuario) = 1 THEN

                INSERT INTO tb_materialessubidoscurso (NombreArchivo, Archivo, Extension, FechaEnviado, IdUsuario, IdCurso, Activo)
                VALUES (_NombreArchivo, IF(OCTET_LENGTH(_Archivo) > 0, _Archivo, NULL), _Extension, courseroom.fn_ObtenerFecha(),_IdUsuario, _IdCurso, 1);
				
                CALL sp_AgregarAvisosCurso(_IdCurso,_IdUsuario,CONCAT('El Usuario ',
				courseroom.fn_NombreCompletoUsuario(_IdUsuario),' Ha Compartido Un Nuevo Archivo El Curso ',courseroom.fn_NombreCurso(_IdCurso)),'Curso');

                SELECT LAST_INSERT_ID() AS "Codigo", 'Material Agregado Satisfactoriamente' AS "Mensaje";
                
            ELSE 
                SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
            END IF;

        ELSE 
            SELECT -1 AS "Codigo", 'El Curso No Se Encuentra Registrado' AS "Mensaje";
        END IF;

    ELSE 
        SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_EnviarMensajeChat` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_EnviarMensajeChat`(
    IN _Mensaje TEXT,
    IN _Archivo LONGBLOB,
    IN _Extension VARCHAR(32),
    IN _IdUsuarioEmisor INT,
    IN _IdChat INT
)
BEGIN

    IF courseroom.fn_CampoTextoValido(_Mensaje) = 1 THEN
        
        IF EXISTS(SELECT IdChat FROM tb_chatspersonales WHERE IdChat = _IdChat AND Activo = 1) THEN

            IF courseroom.fn_ExisteUsuario(_IdUsuarioEmisor) = 1 THEN
                
                INSERT INTO tb_mensajeschat (Mensaje, FechaEnvio, Archivo, Extension, IdChat, IdUsuarioEmisor)
                VALUES (_Mensaje, courseroom.fn_ObtenerFecha(), IF(OCTET_LENGTH(_Archivo) > 0, _Archivo, NULL), _Extension, _IdChat, _IdUsuarioEmisor);
	
				SET @IdUsuario = -1;
				SELECT courseroom.fn_AgregarAvisoChat(_IdChat, _IdUsuarioEmisor, CONCAT('Tiene Un Nuevo Mensaje De Chat Del Usuario ',courseroom.fn_NombreCompletoUsuario(_IdUsuarioEmisor)), 'Chat') INTO @IdUsuario;

                SELECT @IdUsuario AS "Codigo", 'Mensaje Agregado Satisfactoriamente' AS "Mensaje";

            ELSE
                SELECT -1 AS "Codigo", 'El Usuario Emisor No Se Encuentra Registrado' AS "Mensaje";
            END IF;

        ELSE
            SELECT -1 AS "Codigo", 'El Chat No Se Encuentra Registrado' AS "Mensaje";
        END IF;

    ELSE
        SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_EnviarMensajeCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_EnviarMensajeCurso`(
    IN _Mensaje TEXT,
    IN _Archivo LONGBLOB,
    IN _Extension VARCHAR(32),
    IN _IdUsuarioEmisor INT,
    IN _IdCurso INT
)
BEGIN

    IF courseroom.fn_CampoTextoValido(_Mensaje) = 1 THEN
        
        IF EXISTS(SELECT IdCurso FROM tb_cursos WHERE IdCurso = _IdCurso AND Activo = 1) THEN

            IF courseroom.fn_ExisteUsuario(_IdUsuarioEmisor) = 1 THEN

                INSERT INTO tb_mensajescurso (Mensaje, FechaEnvio, Archivo, Extension, IdCurso, IdUsuarioEmisor)
                VALUES (_Mensaje, courseroom.fn_ObtenerFecha(), IF(OCTET_LENGTH(_Archivo) > 0, _Archivo, NULL), _Extension, _IdCurso, _IdUsuarioEmisor);

				CALL sp_AgregarAvisosCurso(_IdCurso,_IdUsuarioEmisor,CONCAT('El Usuario ',
				courseroom.fn_NombreCompletoUsuario(_IdUsuarioEmisor),' Ha Enviado Un Nuevo Mensaje El Curso ',courseroom.fn_NombreCurso(_IdCurso)),'Curso');
				
                SELECT LAST_INSERT_ID() AS "Codigo", 'Mensaje Agregado Satisfactoriamente' AS "Mensaje";

            ELSE
                SELECT -1 AS "Codigo", 'El Curso Emisor No Se Encuentra Registrado' AS "Mensaje";
            END IF;

        ELSE
            SELECT -1 AS "Codigo", 'La Pregunta No Se Encuentra Registrada' AS "Mensaje";
        END IF;

    ELSE
        SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_EnviarMensajeGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_EnviarMensajeGrupo`(
    IN _Mensaje TEXT,
    IN _Archivo LONGBLOB,
    IN _Extension VARCHAR(32),
    IN _IdUsuarioEmisor INT,
    IN _IdGrupo INT
)
BEGIN

    IF courseroom.fn_CampoTextoValido(_Mensaje) = 1 THEN
        
        IF EXISTS(SELECT IdGrupo FROM tb_grupos WHERE IdGrupo = _IdGrupo AND Activo = 1) THEN

            IF courseroom.fn_ExisteUsuario(_IdUsuarioEmisor) = 1 THEN

                INSERT INTO tb_mensajesgrupos (Mensaje, FechaEnvio, Archivo, Extension, IdGrupo, IdUsuarioEmisor)
                VALUES (_Mensaje, courseroom.fn_ObtenerFecha(), IF(OCTET_LENGTH(_Archivo) > 0, _Archivo, NULL), _Extension, _IdGrupo, _IdUsuarioEmisor);

				CALL sp_AgregarAvisosGrupo(_IdGrupo,_IdUsuarioEmisor,CONCAT('El Usuario ',
				courseroom.fn_NombreCompletoUsuario(_IdUsuarioEmisor),' Ha Enviado Un Nuevo Mensaje El Grupo ',courseroom.fn_NombreGrupo(_IdGrupo)),'Grupo');

                SELECT LAST_INSERT_ID() AS "Codigo", 'Mensaje Agregado Satisfactoriamente' AS "Mensaje";

            ELSE
                SELECT -1 AS "Codigo", 'El Usuario Emisor No Se Encuentra Registrado' AS "Mensaje";
            END IF;

        ELSE
            SELECT -1 AS "Codigo", 'El Grupo No Se Encuentra Registrado' AS "Mensaje";
        END IF;

    ELSE
        SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_EnviarMensajePregunta` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_EnviarMensajePregunta`(
    IN _Mensaje TEXT,
    IN _Archivo LONGBLOB,
    IN _Extension VARCHAR(32),
    IN _IdUsuarioEmisor INT,
    IN _IdPregunta INT
)
BEGIN

    IF courseroom.fn_CampoTextoValido(_Mensaje) = 1 THEN
        
        IF EXISTS(SELECT IdPregunta FROM tb_preguntas WHERE IdPregunta = _IdPregunta AND Activo = 1 AND Estatus = 'Abierta') THEN

            IF courseroom.fn_ExisteUsuario(_IdUsuarioEmisor) = 1 THEN

                INSERT INTO tb_mensajespregunta (Mensaje, FechaEnvio, Archivo, Extension, IdPregunta, IdUsuarioEmisor)
                VALUES (_Mensaje, courseroom.fn_ObtenerFecha(), IF(OCTET_LENGTH(_Archivo) > 0, _Archivo, NULL), _Extension, _IdPregunta, _IdUsuarioEmisor);

                SET @IdUsuario = -1;
				SELECT courseroom.fn_AgregarAvisoPregunta(_IdPregunta, _IdUsuarioEmisor, CONCAT('Tiene Un Nuevo Mensaje En La Pregunta ',fn_NombrePregunta(_IdPregunta)), 'Pregunta') INTO @IdUsuario;

                SELECT @IdUsuario AS "Codigo", 'Mensaje Agregado Satisfactoriamente' AS "Mensaje";

            ELSE
                SELECT -1 AS "Codigo", 'El Usuario Emisor No Se Encuentra Registrado' AS "Mensaje";
            END IF;

        ELSE
            SELECT -1 AS "Codigo", 'La Pregunta No Se Encuentra Registrada' AS "Mensaje";
        END IF;

    ELSE
        SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_EnviarMensajeTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_EnviarMensajeTarea`(
    IN _Mensaje TEXT,
    IN _Archivo LONGBLOB,
    IN _Extension VARCHAR(32),
    IN _IdUsuarioEmisor INT,
    IN _IdTarea INT
)
BEGIN

    IF courseroom.fn_CampoTextoValido(_Mensaje) = 1 THEN
        
        IF EXISTS(SELECT IdTarea FROM tb_tareas WHERE IdTarea = _IdTarea AND Activo = 1) THEN

            IF courseroom.fn_ExisteUsuario(_IdUsuarioEmisor) = 1 THEN

                INSERT INTO tb_mensajestareas (Mensaje, FechaEnvio, Archivo, Extension, IdTarea, IdUsuarioEmisor)
                VALUES (_Mensaje, courseroom.fn_ObtenerFecha(), IF(OCTET_LENGTH(_Archivo) > 0, _Archivo, NULL), _Extension, _IdTarea, _IdUsuarioEmisor);

				CALL sp_AgregarAvisosTarea(_IdTarea,_IdUsuarioEmisor,CONCAT('El Usuario ',
				courseroom.fn_NombreCompletoUsuario(_IdUsuarioEmisor),' Ha Enviado Un Nuevo Mensaje En La Tarea ',courseroom.fn_NombreTarea(_IdTarea)),'Tarea');

                SELECT LAST_INSERT_ID() AS "Codigo", 'Mensaje Agregado Satisfactoriamente' AS "Mensaje";

            ELSE
                SELECT -1 AS "Codigo", 'El Usuario Emisor No Se Encuentra Registrado' AS "Mensaje";
            END IF;

        ELSE
            SELECT -1 AS "Codigo", 'La Tarea No Se Encuentra Registrada' AS "Mensaje";
        END IF;

    ELSE
        SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_EnviarRetroalimentacionTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_EnviarRetroalimentacionTarea`(
	IN _IdTarea INT,
    IN _IdUsuario INT,
    IN _Retroalimentacion TEXT,
    IN _NombreArchivo VARCHAR(256),
    IN _Archivo LONGBLOB,
    IN _Extension VARCHAR(32)
)
BEGIN
	
    IF courseroom.fn_CampoTextoValido(_Retroalimentacion) = 1 THEN
    
		IF EXISTS(SELECT IdTarea FROM tb_tareas WHERE IdTarea = _IdTarea AND Activo = 1) AND 
			courseroom.fn_ExisteUsuario(_IdUsuario) = 1 THEN

			INSERT INTO tb_retroalimentaciones (IdTarea, IdUsuario, Retroalimentacion, NombreArchivo, Archivo, Extension, FechaEnvio)
			VALUES (_IdTarea,_IdUsuario,_Retroalimentacion,_NombreArchivo, IF(OCTET_LENGTH(_Archivo) > 0, _Archivo, NULL), _Extension, courseroom.fn_ObtenerFecha());

			CALL sp_AgregarAviso(_IdUsuario,CONCAT('Tu Profesor Ha Agregado Una Retroalimentaci√≥n De Tu Envi√≥ De La Tarea ',courseroom.fn_NombreTarea(_IdTarea)),'Tarea');

			SELECT LAST_INSERT_ID() AS "Codigo", 'Retroalimentaci√≥n Agregada A La Tarea Del Usuario Satisfactoriamente' AS "Mensaje";

		ELSE 
			SELECT -1 AS "Codigo", 'La Tarea O El Usuario No Se Encuentran Registrados' AS "Mensaje";
		END IF;
	ELSE
		SELECT -1 AS "Codigo", 'Alg√∫n Par√°metro De Entrada No Cuenta Con El Formato Adecuado' AS "Mensaje";
    END IF;
   
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_FinalizarCursoProfesor` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_FinalizarCursoProfesor`(
	IN _IdCurso INT,
	IN _IdProfesor INT
)
BEGIN
	
    -- Validar que exista el curso:
    IF EXISTS (SELECT IdCurso FROM tb_cursos WHERE IdCurso = _IdCurso AND Activo = 1 AND Finalizado = 0 AND IdProfesor = _IdProfesor) THEN
       
		UPDATE tb_cursos SET Finalizado = 1 WHERE IdCurso = _IdCurso;

		CALL sp_AgregarAvisosCurso(_IdCurso,_IdProfesor,CONCAT('El Curso ',courseroom.fn_NombreCurso(_IdCurso),' Se Ha Establecido Como Finalizado'),'Curso');
		
		SELECT 1 AS "Codigo", 'El Curso Se Ha Establecido Como Finalizado Satisfactoriamente' AS "Mensaje";
		
        
	ELSE 
		SELECT -1 AS "Codigo", 'El Curso No Se Encuentra Registrado O Ya Se Encuentra Finalizado' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_FinalizarCursoUsuario` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_FinalizarCursoUsuario`(
	IN _IdCurso INT,
	IN _IdUsuario INT
)
BEGIN
	
    -- Validar que exista el curso:
    IF EXISTS (SELECT IdCurso FROM tb_cursos WHERE IdCurso = _IdCurso AND Activo = 1 AND Finalizado = 1) THEN
        
        -- Validar que exista el usuario:
        IF courseroom.fn_ExisteUsuario(_IdUsuario) THEN
			
            -- Validar que se encuentre enrolado en el curso:
            IF EXISTS (SELECT IdCurso FROM tb_cursosusuarios WHERE IdUsuario = _IdUsuario AND IdCurso = _IdCurso AND Estatus = 'Actual') THEN
				
                -- Validar que hayan registrado las respuestas en el cuestionario:
                IF (SELECT COUNT(IdUsuario) FROM tb_cuestionarios WHERE IdUsuario = _IdUsuario AND IdCurso = _IdCurso) = 20 THEN
                
					UPDATE tb_cursosusuarios SET Estatus = 'Finalizado' WHERE IdUsuario = _IdUsuario AND IdCurso = _IdCurso AND Estatus = 'Actual';
					
					SET @IdProfesor := -1;
					SELECT IdProfesor INTO @IdProfesor FROM tb_cursos WHERE IdCurso = _IdCurso LIMIT 1;
					
					CALL sp_AgregarAviso(@IdProfesor,CONCAT('El Usuario ',courseroom.fn_NombreCompletoUsuario(_IdUsuario),' Ha Finalizado El Curso ',courseroom.fn_NombreCurso(_IdCurso)),'Curso');
					
					SELECT @IdProfesor AS "Codigo", 'El Usuario Ha Finalizado El Curso Satisfactoriamente' AS "Mensaje";
                ELSE
					SELECT -1 AS "Codigo", 'El Usuario No ha Respondido El Cuestionario Del Curso' AS "Mensaje";
                END IF;
                
            ELSE
				SELECT -1 AS "Codigo", 'El Usuario No Est√° Tomando El Curso Actualmente' AS "Mensaje";
            END IF;
            
        ELSE 
			SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
        END IF;
        
	ELSE 
		SELECT -1 AS "Codigo", 'El Curso No Se Encuentra Finalizado O Registrado' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_MarcarPreguntaSolucionada` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_MarcarPreguntaSolucionada`(
    IN _IdUsuario INT,
    IN _IdPregunta INT
)
BEGIN

	IF EXISTS(SELECT IdPregunta FROM tb_preguntas WHERE IdPregunta = _IdPregunta AND Activo = 1 AND IdUsuario = _IdUsuario) THEN
		UPDATE tb_preguntas SET Estatus = 'Solucionada' WHERE IdPregunta = _IdPregunta;
		SELECT 1 AS "Codigo", 'La Pregunta Se Ha Marcado Solucionada Satisfactoriamente' AS "Mensaje";
	ELSE
		SELECT -1 AS "Codigo", 'La Pregunta No Se Encuentra Registrada' AS "Mensaje";
	END IF;
     
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerArchivoAdjuntoTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerArchivoAdjuntoTarea`(
    IN _IdArchivoAdjunto INT
)
BEGIN
	SELECT NombreArchivo, Archivo, Extension FROM tb_archivosadjuntostareas WHERE 
    IdArchivoAdjunto = _IdArchivoAdjunto AND Activo = 1 LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerArchivoCompartidoGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerArchivoCompartidoGrupo`(
    IN _IdArchivoCompartido INT
)
BEGIN
	SELECT NombreArchivo, Archivo, Extension FROM tb_archivoscompartidosgrupos WHERE 
	IdArchivoCompartido = _IdArchivoCompartido AND Activo = 1 LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerArchivoMensajeChat` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerArchivoMensajeChat`(
    IN _IdMensaje INT
)
BEGIN
    SELECT Mensaje, Archivo, Extension 
    FROM tb_mensajeschat 
    WHERE IdMensaje = _IdMensaje LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerArchivoMensajeCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerArchivoMensajeCurso`(
    IN _IdMensaje INT
)
BEGIN
    SELECT Mensaje, Archivo, Extension 
    FROM tb_mensajescurso 
    WHERE IdMensaje = _IdMensaje LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerArchivoMensajeGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerArchivoMensajeGrupo`(
    IN _IdMensaje INT
)
BEGIN
    SELECT Mensaje, Archivo, Extension 
    FROM tb_mensajesgrupo
    WHERE IdMensaje = IdMensaje LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerArchivoMensajePregunta` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerArchivoMensajePregunta`(
    IN _IdMensaje INT
)
BEGIN
    SELECT Mensaje, Archivo, Extension 
    FROM tb_mensajespregunta
    WHERE IdMensaje = _IdMensaje LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerArchivoMensajeTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerArchivoMensajeTarea`(
    IN _IdMensaje INT
)
BEGIN
    SELECT Mensaje, Archivo, Extension 
    FROM tb_mensajestarea WHERE IdMensaje = _IdMensaje LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerArchivoRetroalimentacionTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerArchivoRetroalimentacionTarea`(
    IN _IdRetroalimentacion INT
)
BEGIN
	SELECT  NombreArchivo, Archivo, Extension FROM tb_retroalimentaciones 
    WHERE IdRetroalimentacion = _IdRetroalimentacion LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerArchivosAdjuntosTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerArchivosAdjuntosTarea`(
    IN _IdTarea INT
)
BEGIN
    SELECT AdjuntosTareas.IdArchivoAdjunto, AdjuntosTareas.NombreArchivo,
    AdjuntosTareas.Extension, AdjuntosTareas.FechaEnviado
    FROM tb_archivosadjuntostareas AdjuntosTareas
    INNER JOIN tb_tareas Tareas ON Tareas.IdTarea = AdjuntosTareas.IdTarea
    WHERE AdjuntosTareas.IdTarea = _IdTarea AND AdjuntosTareas.Activo = 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerArchivosCompartidosGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerArchivosCompartidosGrupo`(
    IN _IdGrupo INT
)
BEGIN
    SELECT CompartidosGrupos.IdArchivoCompartido, CompartidosGrupos.NombreArchivo, 
    CompartidosGrupos.Extension, CompartidosGrupos.FechaEnviado,
    courseroom.fn_NombreCompleto(Usuarios.Nombre, Usuarios.Paterno, Usuarios.Materno) AS NombreCompleto
    FROM tb_archivoscompartidosgrupos CompartidosGrupos
    INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = CompartidosGrupos.IdUsuario
    INNER JOIN tb_grupos Grupos ON Grupos.IdGrupo = CompartidosGrupos.IdGrupo
    WHERE CompartidosGrupos.IdGrupo = _IdGrupo AND CompartidosGrupos.Activo = 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerArchivosSubidosTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerArchivosSubidosTarea`(
    IN _IdTarea INT,
    IN _IdUsuario INT
)
BEGIN
    SELECT SubidosTareas.IdArchivoSubido, SubidosTareas.NombreArchivo, 
    SubidosTareas.Extension, SubidosTareas.FechaEnviado FROM tb_archivossubidostareas SubidosTareas
    WHERE SubidosTareas.IdTarea = _IdTarea AND SubidosTareas.IdUsuario = _IdUsuario 
    AND SubidosTareas.Activo = 1 ORDER BY SubidosTareas.IdArchivoSubido DESC LIMIT 250;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerArchivoSubidoTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerArchivoSubidoTarea`(
    IN _IdArchivoSubido INT,
    IN _IdUsuario INT
)
BEGIN
	SELECT NombreArchivo, Archivo, Extension FROM tb_archivosadjuntostareas WHERE  IdUsuario = _IdUsuario 
    AND IdArchivoSubido = _IdArchivoSubido AND Activo = 1 LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerAvisos` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerAvisos`(
    IN _IdUsuario INT
)
BEGIN 
	SELECT Avisos.IdAviso, CAST(Avisos.TipoAviso AS CHAR) AS TipoAviso, Avisos.Aviso, Avisos.FechaEnvio FROM tb_avisos Avisos
    INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = Avisos.IdUsuario
    WHERE Avisos.IdUsuario = _IdUsuario AND Usuarios.AvisosActivos = 1 ORDER BY Avisos.IdAviso DESC LIMIT 250;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerCalificacionTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerCalificacionTarea`(
	IN _IdTarea INT,
    IN _IdUsuario INT)
BEGIN
	SELECT Calificacion, FechaCalificacion FROM tb_tareascursousuarios WHERE 
    IdTarea = _IdTarea  AND IdUsuario = _IdUsuario LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerChatsPersonales` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerChatsPersonales`(
	IN _IdUsuario INT
)
BEGIN
	SELECT Chats.IdChat, courseroom.fn_NombreCompleto(Usuarios.Nombre, Usuarios.Paterno, Usuarios.Materno) AS NombreCompleto,
    Chats.FechaCreacion, IF(courseroom.fn_UltimoMensajeChat(Chats.IdChat) IS NULL, ' ',courseroom.fn_UltimoMensajeChat(Chats.IdChat)) AS UltimoMensaje
    FROM tb_chatspersonales Chats
    INNER JOIN tb_usuarios Usuarios ON Chats.IdUsuarioEmisor = Usuarios.IdUsuario
    WHERE (Chats.IdUsuarioEmisor = _IdUsuario OR Chats.IdUsuarioReceptor = _IdUsuario) AND Chats.Activo = 1
    ORDER BY Chats.IdChat DESC LIMIT 250;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerConfiguraciones` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerConfiguraciones`(
    IN _IdUsuario INT
)
BEGIN
    SELECT ChatsConmigo, AvisosActivos FROM tb_usuarios WHERE IdUsuario = _IdUsuario AND Activo = 1 LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerCredenciales` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerCredenciales`(
    IN _CorreoElectronico VARCHAR(200)
)
BEGIN
    SELECT Contrasenia FROM tb_usuarios WHERE CorreoElectronico = _CorreoElectronico AND Activo = 1 LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerCursosActuales` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerCursosActuales`(
	IN _IdUsuario INT
)
BEGIN
	SELECT Cursos.IdCurso, Cursos.Nombre,  Usuarios.IdUsuario, 
    courseroom.fn_NombreCompleto(Usuarios.Nombre,Usuarios.Paterno,Usuarios.Materno) AS NombreCompleto,
    courseroom.fn_ObtenerListaTematicasCurso(Cursos.IdCurso) AS ListaTematicas, Cursos.FechaCreacion, 
    Cursos.Puntuacion FROM tb_cursos Cursos 
    INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = Cursos.IdProfesor
    INNER JOIN tb_cursosusuarios CursosUsuarios ON CursosUsuarios.IdCurso = Cursos.IdCurso
    WHERE CursosUsuarios.IdUsuario = _IdUsuario AND CursosUsuarios.Estatus = 'Actual' 
    ORDER BY Cursos.IdCurso DESC LIMIT 250;
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerCursosCreadosProfesor` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerCursosCreadosProfesor`(
	IN _IdProfesor INT
)
BEGIN
	SELECT IdCurso, Nombre, courseroom.fn_ObtenerListaTematicasCurso(IdCurso) AS Tematicas, 
    IF(Finalizado = 1,'Finalizado', 'En Curso') AS Estatus, FechaCreacion
    FROM tb_cursos WHERE IdProfesor = _IdProfesor AND Activo = 1 ORDER BY IdCurso DESC;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerCursosFinalizados` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerCursosFinalizados`(
	IN _IdUsuario INT
)
BEGIN
	SELECT Cursos.IdCurso, Cursos.Nombre,  Usuarios.IdUsuario, 
    courseroom.fn_NombreCompleto(Usuarios.Nombre,Usuarios.Paterno,Usuarios.Materno) AS NombreCompleto,
    courseroom.fn_ObtenerListaTematicasCurso(Cursos.IdCurso) AS ListaTematicas, Cursos.FechaCreacion, 
    Cursos.Puntuacion FROM tb_cursos Cursos 
    INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = Cursos.IdProfesor
    INNER JOIN tb_cursosusuarios CursosUsuarios ON CursosUsuarios.IdCurso = Cursos.IdCurso
    WHERE CursosUsuarios.IdUsuario = _IdUsuario AND CursosUsuarios.Estatus = 'Finalizado' 
    ORDER BY Cursos.IdCurso DESC LIMIT 250;
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerCursosNuevos` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerCursosNuevos`(IN _IdUsuario INT)
BEGIN
	SELECT Cursos.IdCurso, Cursos.Nombre,  Usuarios.IdUsuario, 
    courseroom.fn_NombreCompleto(Usuarios.Nombre,Usuarios.Paterno,Usuarios.Materno) AS NombreCompleto,
    courseroom.fn_ObtenerListaTematicasCurso(Cursos.IdCurso) AS ListaTematicas, Cursos.FechaCreacion, 
    Cursos.Puntuacion FROM tb_cursos Cursos 
    INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = Cursos.IdProfesor
    INNER JOIN tb_cursosusuarios CursosUsuarios ON CursosUsuarios.IdCurso = Cursos.IdCurso
    WHERE CursosUsuarios.IdUsuario <> _IdUsuario
    ORDER BY Cursos.IdCurso DESC LIMIT 250;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerDatosEntregaTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerDatosEntregaTarea`(
	IN _IdTarea INT,
    IN _IdUsuario INT
)
BEGIN
	SELECT FechaSubida, Calificacion, FechaCalificacion, CAST(Estatus AS CHAR) AS Estatus
    FROM tb_tareascursousuarios WHERE IdTarea = _IdTarea AND IdUsuario = _IdUsuario
    LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerDatosGeneralesChatPersonal` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerDatosGeneralesChatPersonal`(
    IN _IdChat INT,
    IN _IdUsuario INT
)
BEGIN

    IF EXISTS(SELECT IdChat FROM tb_chatspersonales WHERE IdChat = _IdChat And Activo = 1 AND IdUsuarioEmisor = _IdUsuario) THEN
        SELECT Chats.IdUsuarioEmisor AS IdUsuario, courseroom.fn_NombreCompleto(Usuarios.Nombre, Usuarios.Paterno, Usuarios.Materno) AS NombreCompleto
        FROM tb_chatspersonales Chats
        INNER JOIN tb_usuarios Usuarios ON Chats.IdUsuarioEmisor = Usuarios.IdUsuario
        WHERE Chats.IdChat = _IdChat AND Chats.Activo = 1 LIMIT 1;
    ELSE
        SELECT Chats.IdUsuarioReceptor AS IdUsuario, courseroom.fn_NombreCompleto(Usuarios.Nombre, Usuarios.Paterno, Usuarios.Materno) AS NombreCompleto
        FROM tb_chatspersonales Chats
        INNER JOIN tb_usuarios Usuarios ON Chats.IdUsuarioReceptor = Usuarios.IdUsuario
        WHERE Chats.IdChat = _IdChat AND Chats.Activo = 1 LIMIT 1;
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerDatosGeneralesCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerDatosGeneralesCurso`(
    IN _IdCurso INT
)
BEGIN
    SELECT Cursos.IdProfesor, Cursos.Nombre, Cursos.Descripcion, 
    courseroom.fn_NombreCompleto(Usuarios.Nombre, Usuarios.Paterno, Usuarios.Materno) AS NombreCompleto,
    Usuarios.Descripcion AS DescripcionProfesor, Cursos.FechaCreacion FROM tb_cursos Cursos
    INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = Cursos.IdProfesor
    WHERE Cursos.IdCurso = _IdCurso AND Cursos.Activo = 1 LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerDatosGeneralesGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerDatosGeneralesGrupo`(
	IN _IdGrupo INT
)
BEGIN
    SELECT Grupos.Nombre, Grupos.Descripcion, Grupos.FechaCreacion, Cursos.IdCurso, Cursos.Nombre AS NombreCurso
    FROM tb_grupos Grupos 
    INNER JOIN tb_cursos Cursos ON Grupos.IdCurso = Cursos.IdCurso
    WHERE Grupos.IdGrupo = _IdGrupo And Grupos.Activo = 1 LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerDatosGeneralesPregunta` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerDatosGeneralesPregunta`(
    IN _IdPregunta INT
)
BEGIN
    SELECT Usuarios.IdUsuario, courseroom.fn_NombreCompleto(Usuarios.Nombre, Usuarios.Paterno, Usuarios.Materno) AS NombreCompleto,
    Preguntas.Pregunta, Preguntas.Descripcion, Preguntas.FechaCreacion, CAST(Preguntas.Estatus AS CHAR) AS Estatus
    FROM tb_preguntas Preguntas
    INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = Preguntas.IdUsuario
    WHERE Preguntas.IdPregunta = _IdPregunta AND Preguntas.Activo = 1 LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerDatosGeneralesTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerDatosGeneralesTarea`(
    IN _IdTarea INT,
    IN _IdUsuario INT
)
BEGIN
    SELECT Cursos.IdCurso, Cursos.Nombre AS NombreCurso, Tareas.Nombre, Tareas.Descripcion, 
    Tareas.FechaCreacion, Tareas.FechaEntrega, CAST(TareasCursoUsuario.Estatus AS CHAR) AS Estatus
    FROM tb_tareas Tareas
    INNER JOIN tb_cursos Cursos ON Cursos.IdCurso = Tareas.IdCurso
    INNER JOIN tb_tareascursousuarios TareasCursoUsuario ON TareasCursoUsuario.IdTarea = Tareas.IdTarea 
    WHERE TareasCursoUsuario.IdTarea = _IdTarea AND TareasCursoUsuario.IdUsuario = _IdUsuario 
    AND Tareas.Activo = 1;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerDatosGeneralesTareaPendiente` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerDatosGeneralesTareaPendiente`(
    IN _IdTareaPendiente INT
)
BEGIN

    SELECT TareaPendiente.Nombre, TareaPendiente.Descripcion, TareaPendiente.FechaCreacion, TareaPendiente.FechaFinalizacion, 
    CAST(TareaPendiente.Estatus AS CHAR) AS Estatus, Usuarios.IdUsuario, courseroom.fn_NombreCompleto(Usuarios.Nombre, Usuarios.Paterno, Usuarios.Materno) AS NombreCompleto
    FROM tb_tareaspendientesgrupos TareaPendiente
    INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = TareaPendiente.IdUsuarioACargo
    WHERE TareaPendiente.IdTareaPendiente = _IdTareaPendiente LIMIT 1;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerDatosGeneralesTareaProfesor` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerDatosGeneralesTareaProfesor`(
    IN _IdTarea INT,
    IN _IdProfesor INT
)
BEGIN
    SELECT Cursos.IdCurso, Cursos.Nombre AS NombreCurso, Tareas.Nombre, Tareas.Descripcion, Tareas.FechaCreacion, Tareas.FechaEntrega,
    courseroom.fn_EstatusTareaProfesor(Tareas.FechaCreacion, Tareas.FechaEntrega) AS Estatus
    FROM tb_tareas Tareas INNER JOIN tb_cursos Cursos ON Cursos.IdCurso = Tareas.IdCurso
    WHERE Cursos.IdProfesor = _IdProfesor AND Tareas.IdTarea = _IdTarea AND 
    Tareas.Activo = 1 AND Cursos.Activo = 1 LIMIT 1;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerDatosPerfil` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerDatosPerfil`(
    IN _IdUsuario INT
)
BEGIN

   SELECT Usuarios.Nombre, Usuarios.Paterno, Usuarios.Materno, Usuarios.CorreoElectronico, 
   Usuarios.Genero, CAST(Usuarios.TipoUsuario AS CHAR) AS TipoUsuario, Usuarios.FechaNacimiento, Usuarios.Descripcion, 
   Localidades.Localidad,Localidades.Estado,Usuarios.PromedioGeneral, Usuarios.FechaCreacion, Usuarios.Contrasenia
   FROM tb_usuarios Usuarios 
   INNER JOIN tb_localidades Localidades ON Usuarios.IdLocalidad = Localidades.IdLocalidad
   WHERE Usuarios.IdUsuario = _IdUsuario AND Usuarios.Activo = 1 LIMIT 1;
   
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerDatosPerfilChatPersonal` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerDatosPerfilChatPersonal`(
    IN _IdUsuario INT
)
BEGIN

   SELECT Nombre, Paterno, Materno, CorreoElectronico, 
   Genero, CAST(TipoUsuario AS CHAR) AS TipoUsuario FROM tb_usuarios 
   WHERE IdUsuario = _IdUsuario AND Activo = 1 LIMIT 1;
   
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerDesempenoCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerDesempenoCurso`(
	IN _IdCurso INT
)
BEGIN
	SELECT IdDesempenoCurso, TareaCalificada, Calificacion, PromedioCurso,PrediccionPromedio, 
    CAST(RumboEstatusPromedio AS CHAR) AS RumboEstatusPromedio, Puntualidad, PromedioPuntualidad, PrediccionPuntualidad,
    CAST(RumboEstatusPuntualidad AS CHAR) AS RumboEstatusPuntualidad, Rezago, FechaRegistro
    FROM tb_desempenousuariocurso WHERE IdCurso = _IdCurso ORDER BY IdDesempenoCurso DESC;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerDesempenoUsuario` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerDesempenoUsuario`(
    IN _IdUsuario INT
)
BEGIN
	SELECT DesempenoUsuarioCurso.IdDesempenoCurso, Cursos.IdCurso, Cursos.Nombre AS NombreCurso, 
    DesempenoUsuarioCurso.PromedioCurso, DesempenoUsuarioCurso.PromedioGeneral, 
    DesempenoUsuarioCurso.PrediccionPromedio, 
    CAST(DesempenoUsuarioCurso.RumboEstatusPromedio AS CHAR) AS RumboEstatusPromedio, 
    DesempenoUsuarioCurso.Puntualidad, DesempenoUsuarioCurso.PromedioPuntualidad, DesempenoUsuarioCurso.PrediccionPuntualidad,
    CAST(DesempenoUsuarioCurso.RumboEstatusPuntualidad AS CHAR) AS RumboEstatusPuntualidad, 
    DesempenoUsuarioCurso.Rezago, DesempenoUsuarioCurso.FechaRegistro
    FROM tb_desempenousuariocurso DesempenoUsuarioCurso 
    INNER JOIN tb_cursos Cursos ON Cursos.IdCurso = DesempenoUsuarioCurso.IdCurso
    WHERE DesempenoUsuarioCurso.IdUsuario = _IdUsuario ORDER BY DesempenoUsuarioCurso.IdDesempenoCurso DESC;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerDesempenoUsuarioCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerDesempenoUsuarioCurso`(
	IN _IdCurso INT,
    IN _IdUsuario INT
)
BEGIN
	SELECT IdDesempenoCurso, TareaCalificada, Calificacion, PromedioCurso,PrediccionPromedio, 
    CAST(RumboEstatusPromedio AS CHAR) AS RumboEstatusPromedio, Puntualidad, PromedioPuntualidad, PrediccionPuntualidad,
    CAST(RumboEstatusPuntualidad AS CHAR) AS RumboEstatusPuntualidad, Rezago, FechaRegistro
    FROM tb_desempenousuariocurso WHERE IdUsuario = _IdUsuario AND IdCurso = _IdCurso ORDER BY IdDesempenoCurso DESC;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerDireccionIP` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerDireccionIP`(
	IN _IdUsuario INT
)
BEGIN
	SELECT DireccionIP FROM tb_sesiones WHERE IdUsuario = _IdUsuario AND Activo = 1
    ORDER BY IdSesion DESC LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerEntregasTareaPorCalificar` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerEntregasTareaPorCalificar`(
	IN _IdTarea INT,
    IN _IdProfesor INT
    
)
BEGIN
	SELECT Tareas.IdTarea, Tareas.Nombre, Cursos.IdCurso, Cursos.Nombre AS NombreCurso, 
    Usuarios.IdUsuario, courseroom.fn_NombreCompletoUsuario(Usuarios.IdUsuario) AS NombreCompleto, 
    TareasCursoUsuario.FechaSubida, Tareas.FechaEntrega
    FROM tb_tareas Tareas INNER JOIN tb_cursos Cursos ON Cursos.IdCurso = Tareas.IdCurso
    INNER JOIN tb_tareascursousuarios  TareasCursoUsuario ON TareasCursoUsuario.IdTarea = Tareas.IdTarea
    INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = TareasCursoUsuario.IdUsuario
    WHERE Cursos.IdProfesor = _IdProfesor AND Tareas.IdTarea = _IdTarea AND Tareas.Activo = 1 
    AND Cursos.Activo = 1 AND TareasCursoUsuario.Estatus  = 'ENTREGADA';
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerEstados` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerEstados`()
BEGIN
	SELECT DISTINCT Estado FROM tb_localidades;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerFechaActualizacionTareaSubida` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerFechaActualizacionTareaSubida`(
	IN _IdTarea INT,
    IN _IdUsuario INT
)
BEGIN
	SELECT FechaSubida FROM tb_tareascursousuarios WHERE IdTarea = _IdTarea AND IdUsuario = _IdUsuario
    LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerGrupos` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerGrupos`(
    IN _IdUsuario INT
)
BEGIN

	SELECT Grupos.IdGrupo, Grupos.Nombre, Cursos.IdCurso, Cursos.Nombre AS NombreCurso, Grupos.FechaCreacion 
	FROM tb_grupos Grupos
	INNER JOIN tb_cursos Cursos ON Cursos.IdCurso = Grupos.IdCurso
	INNER JOIN tb_usuariosgrupos UsuariosGrupos ON UsuariosGrupos.IdGrupo = Grupos.IdGrupo
    WHERE UsuariosGrupos.IdUsuario = _IdUsuario AND Grupos.Activo = 1 AND courseroom.fn_IntentosAceptablesGrupo(Grupos.IdGrupo, _IdUsuario) = 1
	ORDER BY Grupos.IdGrupo DESC LIMIT 250;
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerGruposCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerGruposCurso`(
	IN _IdCurso INT
)
BEGIN
	SELECT IdGrupo, Nombre, courseroom.fn_ObtenerNumeroMiembrosGrupo(IdGrupo) AS NumeroIntegrantes,
    FechaCreacion FROM tb_grupos WHERE IdCurso = _IdCurso ORDER BY IdGrupo DESC;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerIDsUsuariosCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerIDsUsuariosCurso`(
	IN _IdCurso INT,
    IN _IdUsuario INT
)
BEGIN
	SELECT IdUsuario FROM tb_cursosusuarios WHERE IdCurso = _IdCurso AND IdUsuario <> _IdUsuario AND Estatus = 'Actual';
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerIDsUsuariosGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerIDsUsuariosGrupo`(
	IN _IdGrupo INT,
    IN _IdUsuario INT
)
BEGIN
	SELECT IdUsuario FROM tb_usuariosgrupos 
    WHERE IdGrupo = _IdGrupo AND fn_IntentosAceptablesGrupo(IdGrupo,IdUsuario) = 1 AND IdUsuario <> _IdUsuario;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerIDsUsuariosTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerIDsUsuariosTarea`(
	IN _IdTarea INT,
    IN _IdUsuario INT
)
BEGIN
	SELECT IdUsuario FROM tb_tareascursousuarios WHERE IdTarea = _IdTarea AND IdUsuario <> _IdUsuario;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerImagenChatPersonal` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerImagenChatPersonal`(
    IN _IdChat INT,
    IN _IdUsuario INT
)
BEGIN

    IF EXISTS(SELECT IdChat FROM tb_chatspersonales WHERE IdChat = _IdChat And Activo = 1 AND IdUsuarioEmisor = _IdUsuario) THEN
        SELECT Usuarios.Imagen FROM tb_usuarios Usuarios 
        INNER JOIN  tb_chatspersonales Chats ON Chats.IdUsuarioEmisor = Usuarios.IdUsuario
        WHERE Chats.IdChat = _IdChat AND Chats.Activo = 1 LIMIT 1;
    ELSE
        SELECT Usuarios.Imagen FROM tb_usuarios Usuarios
        INNER JOIN tb_chatspersonales Chats ON Chats.IdUsuarioReceptor = Usuarios.IdUsuario
        WHERE Chats.IdChat = _IdChat AND Chats.Activo = 1 LIMIT 1;
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerImagenCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerImagenCurso`(IN _IdCurso INT)
BEGIN
    SELECT Imagen FROM tb_cursos WHERE IdCurso = _IdCurso AND Activo = 1 LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerImagenesEnviadasTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerImagenesEnviadasTarea`(
	IN _IdTarea INT,
    IN _IdUsuario INT
)
BEGIN
	SELECT SubidosTareas.Archivo, SubidosTareas.Extension FROM tb_archivossubidostareas SubidosTareas
    INNER JOIN tb_tareascursousuarios TareasCurso 
    ON TareasCurso.IdTarea = SubidosTareas.IdTarea AND TareasCurso.IdUsuario = SubidosTareas.IdUsuario
    WHERE SubidosTareas.IdTarea = _IdTarea AND SubidosTareas.IdUsuario <> _IdUsuario 
    AND (TareasCurso.Estatus = 'ENTREGADA' OR TareasCurso.Estatus = 'ENTREGADA CON RETRASO' OR TareasCurso.Estatus = 'CALIFICADA')
    AND SubidosTareas.Activo = 1 AND (UPPER(SubidosTareas.Extension) = 'JPEG' OR UPPER(SubidosTareas.Extension) = 'JPG');
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerImagenGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerImagenGrupo`(IN _IdGrupo INT)
BEGIN
    SELECT Imagen FROM tb_grupos WHERE IdGrupo = _IdGrupo AND Activo = 1 LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerImagenPerfil` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerImagenPerfil`(IN _IdUsuario INT)
BEGIN
	SELECT Imagen FROM tb_usuarios WHERE IdUsuario = _IdUsuario AND Activo = 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerImagenPregunta` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerImagenPregunta`(IN _IdPregunta INT)
BEGIN
    SELECT Usuarios.Imagen FROM tb_usuarios Usuarios
    INNER JOIN tb_preguntas Preguntas ON Preguntas.IdUsuario = Usuarios.IdUsuario
    WHERE Preguntas.IdPregunta = _IdPregunta AND Preguntas.Activo = 1 LIMIT 1;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerInfoGruposCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerInfoGruposCurso`(
	IN _IdCurso INT
)
BEGIN
	SELECT IdGrupo, Nombre FROM tb_grupos WHERE IdCurso = _IdCurso ORDER BY IdGrupo DESC;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerInteresesUsuario` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerInteresesUsuario`(
    IN _IdUsuario INT
)
BEGIN
   SELECT Tematicas.IdTematica, Tematicas.Tematica FROM tb_tematicas Tematicas 
   INNER JOIN  tb_tematicasusuarios TematicasUsuarios 
   ON Tematicas.IdTematica = TematicasUsuarios.IdTematica
   INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = TematicasUsuarios.IdUsuario
   WHERE Usuarios.IdUsuario = _IdUsuario AND Usuarios.Activo = 1 AND Usuarios.TipoUsuario = 'Estudiante';
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerLocalidadesPorEstado` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerLocalidadesPorEstado`(
	IN _Estado VARCHAR(100)
)
BEGIN
	SELECT IdLocalidad, Localidad FROM tb_localidades WHERE Estado = _Estado;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerMaterialesSubidosCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerMaterialesSubidosCurso`(
    IN _IdCurso INT
)
BEGIN
    SELECT MaterialesSubidos.IdMaterialSubido ,MaterialesSubidos.NombreArchivo,
    MaterialesSubidos.Extension, MaterialesSubidos.FechaEnviado, 
    courseroom.fn_NombreCompleto(Usuarios.Nombre, Usuarios.Paterno,Usuarios.Materno) AS NombreCompleto
    FROM tb_materialessubidoscurso MaterialesSubidos
    INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = MaterialesSubidos.IdUsuario
    WHERE MaterialesSubidos.IdCurso = _IdCurso ORDER BY MaterialesSubidos.IdMaterialSubido DESC LIMIT 250;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerMaterialSubidoCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerMaterialSubidoCurso`(
	IN _IdMaterialSubido INT
)
BEGIN
	SELECT NombreArchivo, Archivo, Extension FROM tb_materialessubidoscurso WHERE 
    IdMaterialSubido = _IdMaterialSubido AND Activo = 1 LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerMensajesChat` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerMensajesChat`(
    IN _IdChat INT
)
BEGIN
    SELECT MensajesChat.IdMensaje, MensajesChat.Mensaje, MensajesChat.FechaEnvio,
    courseroom.fn_NombreCompleto(Usuarios.Nombre, Usuarios.Paterno, Usuarios.Materno) AS NombreCompleto, 
    MensajesChat.Extension
    FROM tb_mensajeschat MensajesChat 
    INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = MensajesChat.IdUsuarioEmisor
    WHERE MensajesChat.IdChat = _IdChat ORDER BY MensajesChat.IdChat DESC LIMIT 250;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerMensajesCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerMensajesCurso`(
    IN _IdCurso INT
)
BEGIN
    SELECT MensajesCurso.IdMensaje, MensajesCurso.Mensaje, MensajesCurso.FechaEnvio,
    courseroom.fn_NombreCompleto(Usuarios.Nombre, Usuarios.Paterno, Usuarios.Materno) AS NombreCompleto,
	MensajesCurso.Extension
    FROM tb_mensajescurso MensajesCurso 
    INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = MensajesCurso.IdUsuarioEmisor
    WHERE MensajesCurso.IdCurso= _IdCurso ORDER BY MensajesCurso.IdMensaje DESC LIMIT 250;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerMensajesGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerMensajesGrupo`(
    IN _IdGrupo INT
)
BEGIN
    SELECT MensajesGrupos.IdMensaje, MensajesGrupos.Mensaje, MensajesGrupos.FechaEnvio,
    courseroom.fn_NombreCompleto(Usuarios.Nombre, Usuarios.Paterno, Usuarios.Materno) AS NombreCompleto,
     MensajesGrupos.Extension
    FROM tb_mensajesgrupo MensajesGrupos 
    INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = MensajesGrupos.IdUsuarioEmisor
    WHERE MensajesGrupos.IdGrupo = _IdGrupo ORDER BY MensajesGrupos.IdMensaje DESC LIMIT 250;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerMensajesPregunta` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerMensajesPregunta`(
    IN _IdPregunta INT
)
BEGIN
    SELECT MensajesPreguntas.IdMensaje, MensajesPreguntas.Mensaje, MensajesPreguntas.FechaEnvio,
    courseroom.fn_NombreCompleto(Usuarios.Nombre, Usuarios.Paterno, Usuarios.Materno) AS NombreCompleto,
    MensajesPreguntas.Extension 
    FROM tb_mensajespregunta MensajesPreguntas 
    INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = MensajesPreguntas.IdUsuarioEmisor
    WHERE MensajesPreguntas.IdPregunta = _IdPregunta ORDER BY MensajesPreguntas.IdMensaje DESC LIMIT 250;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerMensajesTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerMensajesTarea`(
    IN _IdTarea INT
)
BEGIN
    SELECT MensajesTareas.IdMensaje, MensajesTareas.Mensaje, MensajesTareas.FechaEnvio,
    courseroom.fn_NombreCompleto(Usuarios.Nombre, Usuarios.Paterno, Usuarios.Materno) AS NombreCompleto,
    MensajesTareas.Extension
    FROM tb_mensajestarea MensajesTareas
    INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = MensajesTareas.IdUsuarioEmisor
    WHERE MensajesTareas.IdTarea = _IdTarea ORDER BY MensajesTareas.IdMensaje DESC LIMIT 250;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerMiembrosCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerMiembrosCurso`(
	IN _IdCurso INT
)
BEGIN
	SELECT Usuarios.IdUsuario, 
    courseroom.fn_NombreCompleto(Usuarios.Nombre, Usuarios.Paterno, Usuarios.Materno) AS NombreCompleto,
    CursosUsuarios.FechaIngreso 
    FROM tb_usuarios Usuarios
    INNER JOIN tb_cursosusuarios CursosUsuarios ON CursosUsuarios.IdUsuario = Usuarios.IdUsuario
    WHERE CursosUsuarios.IdCurso = _IdCurso AND CursosUsuarios.Estatus <> 'Suspendido';
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerMiembrosGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerMiembrosGrupo`(IN _IdGrupo INT)
BEGIN
    SELECT Usuarios.IdUsuario, courseroom.fn_NombreCompleto(Usuarios.Nombre, Usuarios.Paterno, Usuarios.Materno) AS NombreCompleto,
    UsuariosGrupos.FechaIngreso FROM tb_usuariosgrupos UsuariosGrupos
    INNER JOIN tb_usuarios Usuarios ON UsuariosGrupos.IdUsuario = Usuarios.IdUsuario
    WHERE UsuariosGrupos.IdGrupo = _IdGrupo AND courseroom.fn_IntentosAceptablesGrupo(_IdGrupo, Usuarios.IdUsuario) = 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerNuevoPromedioGeneral` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerNuevoPromedioGeneral`(
	IN _IdUsuario INT,
    IN _IdCurso INT,
    IN _NuevoPromedio DOUBLE)
BEGIN

	SET @Cuenta := -1;
    SELECT COUNT(IdDesempenoCurso) INTO  @Cuenta FROM tb_desempenousuariocurso 
    WHERE IdUsuario = _IdUsuario AND IdCurso = _IdCurso;
    SET @PromedioGeneral = -1.0;
    SELECT PromedioGeneral  INTO @PromedioGeneral FROM tb_desempenousuariocurso
    WHERE IdUsuario = _IdUsuario AND IdCurso = _IdCurso AND PromedioGeneral IS NOT NULL ORDER BY IdDesempenoCurso LIMIT 1;
	
    IF @PromedioGeneral IS NULL OR @PromedioGeneral < 0 THEN
		SELECT _NuevoPromedio AS NuevoPromedio;
	ELSE
		SELECT (@PromedioGeneral + _NuevoPromedio) / (@Cuenta + 1) AS NuevoPromedio;
    END IF;
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerNumeroMiembrosCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerNumeroMiembrosCurso`(IN _IdCurso INT)
BEGIN
	SELECT courseroom.fn_ObtenerNumeroMiembrosCurso(_IdCurso) AS NumeroMiembros;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerPDFsEnviadosTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerPDFsEnviadosTarea`(
	IN _IdTarea INT,
    IN _IdUsuario INT
)
BEGIN
	SELECT SubidosTareas.Archivo, SubidosTareas.Extension FROM tb_archivossubidostareas SubidosTareas
    INNER JOIN tb_tareascursousuarios TareasCurso 
    ON TareasCurso.IdTarea = SubidosTareas.IdTarea AND TareasCurso.IdUsuario = SubidosTareas.IdUsuario
    WHERE SubidosTareas.IdTarea = _IdTarea AND SubidosTareas.IdUsuario <> _IdUsuario 
    AND (TareasCurso.Estatus = 'ENTREGADA' OR TareasCurso.Estatus = 'ENTREGADA CON RETRASO' OR TareasCurso.Estatus = 'CALIFICADA')
    AND SubidosTareas.Activo = 1 AND UPPER(SubidosTareas.Extension) = 'PDF';
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerPreguntas` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerPreguntas`(
    IN _IdUsuario INT
)
BEGIN 

	SELECT Preguntas.IdPregunta, courseroom.fn_NombreCompleto(Usuarios.Nombre,Usuarios.Paterno,Usuarios.Materno) AS NombreCompleto, 
    Preguntas.Pregunta, Preguntas.FechaCreacion, CAST(Preguntas.Estatus AS CHAR) AS Estatus
	FROM tb_preguntas Preguntas
	INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = Preguntas.IdUsuario
    WHERE Preguntas.IdUsuario = _IdUsuario AND Preguntas.Activo = 1
	ORDER BY Preguntas.IdPregunta DESC LIMIT 250;
   
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerPromedioCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerPromedioCurso`(
    IN _IdCurso INT,
    IN _IdUsuario INT
)
BEGIN
	SELECT IF(courseroom.fn_PromedioCurso(_IdCurso,_IdUsuario) IS NULL,-1, courseroom.fn_PromedioCurso(_IdCurso,_IdUsuario)) AS PromedioCurso;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerPromedioPuntualidad` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerPromedioPuntualidad`(IN _IdUsuario INT)
BEGIN
	SELECT IF(courseroom.fn_ObtenerPromedioPuntualidad(_IdUsuario) IS NULL,-1, courseroom.fn_ObtenerPromedioPuntualidad(_IdUsuario)) AS PromedioPuntualidad;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerPuntualidad` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerPuntualidad`(
	IN _IdTarea INT,
	IN _IdUsuario INT)
BEGIN

	IF EXISTS( SELECT IF(Puntualidad IS NOT NULL, Puntualidad, -1) AS Puntualidad
    FROM tb_tareascursousuarios 
    WHERE IdTarea = _IdTarea  AND IdUsuario = _IdUsuario) THEN
		SELECT IF(Puntualidad IS NOT NULL, Puntualidad, -1) AS Puntualidad
		FROM tb_tareascursousuarios WHERE IdTarea = _IdTarea  AND IdUsuario = _IdUsuario;
    ELSE
		SELECT -1 AS Puntualidad;
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerRetroalimentacionesTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerRetroalimentacionesTarea`(
    IN _IdTarea INT,
    IN _IdUsuario INT
)
BEGIN
	
    SELECT Retroalimentaciones.IdRetroalimentacion, 
    Retroalimentaciones.Retroalimentacion, Retroalimentaciones.FechaEnvio,
    Retroalimentaciones.NombreArchivo, Retroalimentaciones.Extension 
    FROM tb_retroalimentaciones Retroalimentaciones
    WHERE Retroalimentaciones.IdTarea = _IdTarea AND 
    IdUsuario = _IdUsuario ORDER BY Retroalimentaciones.IdRetroalimentacion DESC;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerSesiones` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerSesiones`(
    IN _IdUsuario INT
)
BEGIN

	SELECT IdSesion, Dispositivo, Fabricante, Uuid, UltimaConexion, DireccionIP, IF(Activo = 1,'Activo','Inactivo') AS Estatus FROM tb_sesiones 
	WHERE IdUsuario = _IdUsuario ORDER BY IdSesion DESC LIMIT 100;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerTareasCreadas` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerTareasCreadas`(
	IN _IdProfesor INT
)
BEGIN
	SELECT Tareas.IdTarea, Tareas.Nombre, Cursos.IdCurso, Cursos.Nombre AS NombreCurso, 
    Tareas.FechaCreacion, Tareas.FechaEntrega, courseroom.fn_EstatusTareaProfesor(Tareas.FechaCreacion, Tareas.FechaEntrega) AS Estatus
    FROM tb_tareas Tareas INNER JOIN tb_cursos Cursos ON Cursos.IdCurso = Tareas.IdCurso
    WHERE Cursos.IdProfesor = _IdProfesor AND Tareas.Activo = 1 AND Cursos.Activo = 1 
    ORDER BY Tareas.IdTarea DESC LIMIT 250;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerTareasCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerTareasCurso`(
	IN _IdCurso INT,
    IN _IdUsuario INT
)
BEGIN

	SELECT Tareas.IdTarea, Tareas.Nombre, Tareas.FechaCreacion, Tareas.FechaEntrega, 
    CAST(TareasCursoUsuarios.Estatus AS CHAR) AS Estatus
    FROM tb_tareas Tareas 
    INNER JOIN tb_tareascursousuarios TareasCursoUsuarios
    ON TareasCursoUsuarios.IdTarea = Tareas.IdTarea
    WHERE Tareas.IdCurso = _IdCurso AND TareasCursoUsuarios.IdUsuario = _IdUsuario AND Tareas.Activo = 1
    ORDER BY Tareas.IdTarea DESC;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerTareasCursoProfesor` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerTareasCursoProfesor`(
	IN _IdCurso INT,
    IN _IdProfesor INT
)
BEGIN

	SELECT Tareas.IdTarea, Tareas.Nombre, Tareas.FechaCreacion, Tareas.FechaEntrega, 
    courseroom.fn_EstatusTareaProfesor(Tareas.FechaCreacion, Tareas.FechaEntrega) AS Estatus
    FROM tb_tareas Tareas 
    INNER JOIN tb_cursos Cursos ON Tareas.IdCurso = Cursos.IdCurso
    WHERE Cursos.IdProfesor = _IdProfesor AND Tareas.IdCurso = _IdCurso AND Tareas.Activo = 1
    ORDER BY Tareas.IdTarea DESC;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerTareasEstudiante` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerTareasEstudiante`(
    IN _IdUsuario INT
)
BEGIN
	SELECT Tareas.IdTarea, Tareas.Nombre, Cursos.IdCurso,
    Cursos.Nombre AS NombreCurso, Tareas.FechaCreacion, Tareas.FechaEntrega, 
    CAST(TareasCursoUsuarios.Estatus AS CHAR) AS Estatus FROM tb_tareas Tareas
	INNER JOIN tb_cursos Cursos ON Cursos.IdCurso = Tareas.IdCurso
	INNER JOIN tb_tareascursousuarios TareasCursoUsuarios ON TareasCursoUsuarios.IdTarea = Tareas.IdTarea 
	WHERE TareasCursoUsuarios.IdUsuario = _IdUsuario AND Tareas.Activo = 1 ORDER BY Tareas.IdTarea DESC LIMIT 250;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerTareasMes` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerTareasMes`(
    IN _Mes INT,
    IN _IdUsuario INT
)
BEGIN
    
    SELECT Tareas.IdTarea, courseroom.fn_ObtenerDia(Tareas.FechaEntrega) AS Dia, 
    courseroom.fn_ObtenerHorario(Tareas.FechaEntrega) AS Horario, Tareas.Descripcion
    FROM tb_tareas Tareas
    INNER JOIN tb_tareascursousuarios TareasUsuarios ON Tareas.IdTarea = TareasUsuarios.IdTarea
    WHERE TareasUsuarios.IdUsuario = _IdUsuario AND Tareas.Activo = 1 
    AND courseroom.fn_ObtenerMes(Tareas.FechaEntrega) = _Mes;
    
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerTareasPendientesGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerTareasPendientesGrupo`(
    IN _IdGrupo INT
)
BEGIN
    SELECT TareaPendiente.IdTareaPendiente, TareaPendiente.Nombre,
    courseroom.fn_NombreCompleto(Usuarios.Nombre, Usuarios.Paterno, Usuarios.Materno) AS NombreCompleto,
    CAST(TareaPendiente.Estatus AS CHAR) AS Estatus FROM tb_tareaspendientesgrupos TareaPendiente
    INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = TareaPendiente.IdUsuarioACargo
    WHERE TareaPendiente.IdGrupo = _IdGrupo ORDER BY TareaPendiente.IdTareaPendiente DESC LIMIT 250;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerTareasPorCalificar` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerTareasPorCalificar`(
	IN _IdProfesor INT
)
BEGIN
	SELECT Tareas.IdTarea, Tareas.Nombre, Cursos.IdCurso, Cursos.Nombre AS NombreCurso, 
    Usuarios.IdUsuario, courseroom.fn_NombreCompletoUsuario(Usuarios.IdUsuario) AS NombreCompleto, 
    TareasCursoUsuario.FechaSubida, Tareas.FechaEntrega
    FROM tb_tareas Tareas INNER JOIN tb_cursos Cursos ON Cursos.IdCurso = Tareas.IdCurso
    INNER JOIN tb_tareascursousuarios  TareasCursoUsuario ON TareasCursoUsuario.IdTarea = Tareas.IdTarea
    INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = TareasCursoUsuario.IdUsuario
    WHERE Cursos.IdProfesor = _IdProfesor AND Tareas.Activo = 1 AND Cursos.Activo = 1 
    AND TareasCursoUsuario.Estatus  = 'ENTREGADA' ORDER BY Tareas.IdTarea DESC LIMIT 250;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerTematicas` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerTematicas`()
BEGIN
	SELECT IdTematica, Tematica FROM tb_tematicas ORDER BY Tematica;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerTematicasCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerTematicasCurso`(
    IN _IdCurso INT
)
BEGIN
   SELECT Tematicas.IdTematica, Tematicas.Tematica FROM tb_tematicas Tematicas 
   INNER JOIN  tb_tematicascursos TematicasCursos 
   ON Tematicas.IdTematica = TematicasCursos.IdTematica
   WHERE TematicasCursos.IdCurso = _IdCurso;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerTodosIDsUsuariosCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerTodosIDsUsuariosCurso`(
	IN _IdCurso INT
)
BEGIN
	SELECT IdUsuario FROM tb_cursosusuarios WHERE IdCurso = _IdCurso AND Estatus = 'Actual';
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerUltimoAviso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerUltimoAviso`(
	IN _IdUsuario INT
)
BEGIN
	SELECT Avisos.IdAviso, CAST(Avisos.TipoAviso AS CHAR) AS TipoAviso, Avisos.Aviso, Avisos.FechaEnvio FROM tb_avisos Avisos
    INNER JOIN tb_usuarios Usuarios ON Usuarios.IdUsuario = Avisos.IdUsuario
    WHERE Avisos.IdUsuario = _IdUsuario AND Usuarios.AvisosActivos = 1 ORDER BY Avisos.IdAviso DESC LIMIT 1;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerUsuario` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerUsuario`(
    IN _CorreoElectronico VARCHAR(200),
    IN _Contrasenia VARCHAR(500)
)
BEGIN

	SET @IdUsuario := -1;
    SET @TipoUsuario := 'No Disponible';

    IF courseroom.fn_CampoValido(_CorreoElectronico) = 0 
		OR courseroom.fn_CampoValido(_Contrasenia) = 0 THEN
        SELECT -1 AS "Codigo", 'Alg√∫n Campo No Tiene El Formato Adecuado' AS "Mensaje";
    ELSE
    
        SELECT  IdUsuario, CAST(TipoUsuario AS CHAR) INTO @IdUsuario, @TipoUsuario FROM tb_usuarios WHERE CorreoElectronico = UPPER(_CorreoElectronico) AND Contrasenia = _Contrasenia AND Activo = 1;

        IF @IdUsuario IS NOT NULL AND @IdUsuario > -1 THEN
            SELECT @IdUsuario AS "Codigo",  @TipoUsuario AS "Mensaje";
        ELSE
            SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
        END IF;
        
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerUsuariosParaChatear` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerUsuariosParaChatear`(
    IN _Busqueda VARCHAR(100)
)
BEGIN
    SELECT IdUsuario, courseroom.fn_NombreCompleto(Nombre, Paterno, Materno) AS NombreCompleto
    FROM tb_usuarios WHERE Activo = 1 AND ChatsConmigo = 1
    AND CONCAT(Nombre, ' ', Paterno, ' ',Materno) LIKE CONCAT('%',_Busqueda,'%') LIMIT 25;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ObtenerUsuariosSinGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ObtenerUsuariosSinGrupo`(
	IN _IdCurso INT
)
BEGIN
	
	SELECT Usuarios.IdUsuario, 
    courseroom.fn_NombreCompleto(Usuarios.Nombre,Usuarios.Paterno,Usuarios.Materno) AS NombreCompleto
    FROM tb_usuarios Usuarios 
    INNER JOIN tb_cursosusuarios CursosUsuarios ON CursosUsuarios.IdUsuario = Usuarios.IdUsuario
    INNER JOIN tb_cursos Cursos ON Cursos.IdCurso = CursosUsuarios.IdCurso
    WHERE Cursos.IdCurso = _IdCurso AND Cursos.Activo = 1 AND Usuarios.Activo = 1 
    AND CursosUsuarios.Estatus = 'Actual' AND courseroom.fn_ExisteUsuarioEnGrupo(Cursos.IdCurso,Usuarios.IdUsuario) = 0;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_RemoverArchivoAdjuntoTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_RemoverArchivoAdjuntoTarea`(
    IN _IdArchivoAdjunto INT,
    IN _IdTarea INT
)
BEGIN
    
    IF EXISTS(SELECT IdArchivoAdjunto FROM tb_archivosadjuntostareas WHERE IdArchivoAdjunto = _IdArchivoAdjunto 
        AND Activo = 1 AND IdTarea = _IdTarea) THEN 

        UPDATE tb_archivosadjuntostareas SET Activo = 0 WHERE IdArchivoAdjunto = _IdArchivoAdjunto;

        SELECT 1 AS "Codigo", 'Se Ha Removido El Archivo Adjunto Satisfactoriamente' AS "Mensaje";

    ELSE
        SELECT -1 AS "Codigo", 'El Archivo Adjunto No Se Encuentra Registrado' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_RemoverArchivoCompartidoGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_RemoverArchivoCompartidoGrupo`(
    IN _IdArchivoCompartido INT,
    IN _IdUsuario INT
)
BEGIN
    
    IF EXISTS(SELECT IdArchivoCompartido FROM tb_archivoscompartidosgrupos WHERE IdArchivoCompartido = _IdArchivoCompartido 
        AND Activo = 1 AND IdUsuario = _IdUsuario) THEN 

        UPDATE tb_archivoscompartidosgrupos SET Activo = 0 WHERE IdArchivoCompartido = _IdArchivoCompartido;

        SELECT 1 AS "Codigo", 'Se Ha Removido El Archivo Compartido Satisfactoriamente' AS "Mensaje";

    ELSE
        SELECT -1 AS "Codigo", 'El Archivo Compartido No Se Encuentra Registrado' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_RemoverArchivoSubidoTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_RemoverArchivoSubidoTarea`(
    IN _IdArchivoSubido INT,
    IN _IdUsuario INT
)
BEGIN

    IF EXISTS (SELECT IdArchivoSubido FROM tb_archivossubidostareas WHERE IdArchivoSubido = _IdArchivoSubido
		AND IdUsuario = _IdUsuario AND Activo = 1) THEN
    
        UPDATE tb_archivossubidostareas SET Activo = 0 WHERE IdArchivoSubido = _IdArchivoSubido;

        SELECT 1 AS "Codigo", 'El Archivo Subido Ha Sido Removido Satisfactoriamente' AS "Mensaje";

    ELSE
        SELECT -1 AS "Codigo", 'El Archivo Subido No Se Encuentra Registrado' AS "Mensaje";
    
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_RemoverChatPersonal` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_RemoverChatPersonal`(
    IN _IdChat INT,
    IN _IdUsuario INT
)
BEGIN

    IF courseroom.fn_ExisteUsuario(_IdUsuario) = 1 THEN
        IF EXISTS(SELECT IdChat FROM tb_chatspersonales WHERE IdChat = _IdChat AND Activo = 1
        AND (IdUsuarioEmisor = _IdUsuario OR IdUsuarioReceptor = _IdUsuario)) THEN
            UPDATE tb_chatspersonales SET Activo = 0 WHERE IdChat = _IdChat;
            SELECT 1 AS "Codigo", 'El Chat Personal Ha Sido Removido Satisfactoriamente' AS "Mensaje";
        ELSE
            SELECT -1 AS "Codigo", 'El Chat Personal No Se Encuentra Registrado' AS "Mensaje";
        END IF;
            
    ELSE
        SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_RemoverCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_RemoverCurso`(
	IN _IdCurso INT,
    IN _IdProfesor INT
)
BEGIN
	IF EXISTS(SELECT IdCurso FROM tb_cursos WHERE IdCurso = _IdCurso AND IdProfesor = _IdProfesor AND Activo = 1) THEN
		UPDATE tb_cursos SET Activo = 0 WHERE IdCurso = _IdCurso;
        
         CALL sp_AgregarAvisosCurso(_IdCurso,_IdProfesor,CONCAT('Se Ha Removido El Curso ',courseroom.fn_NombreCurso(_IdCurso)),'Curso');
        
        SELECT 1 AS "Codigo", 'El Curso Ha Sido Removido Satisfactoriamente' AS "Mensaje";
    ELSE 
		SELECT -1 AS "Codigo", 'El Curso No Se Encuentra Registrado' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_RemoverGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_RemoverGrupo`(
	IN _IdGrupo INT,
    IN _IdCurso INT
)
BEGIN
	IF EXISTS(SELECT IdGrupo FROM tb_grupos WHERE IdGrupo = _IdGrupo AND IdCurso = _IdCurso AND Activo = 1) THEN
		UPDATE tb_grupos SET Activo = 0 WHERE IdGrupo = _IdGrupo AND IdCurso = _IdCurso;
        
         CALL sp_AgregarAvisosGrupo(_IdGrupo,-1,CONCAT('Se Ha Removido El Grupo ',courseroom.fn_NombreGrupo(_IdGrupo), 
         'Del Curso',courseroom.fn_NombreCurso(_IdCurso)),'Grupo');
        
			SELECT 1 AS "Codigo", 'Se Ha Removido El Grupo Satisfactoriamente' AS "Mensaje";
    ELSE 
		SELECT -1 AS "Codigo", 'El Grupo No Se Encuentra Registrado' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_RemoverInteresUsuario` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_RemoverInteresUsuario`(
    IN _IdTematica INT,
    IN _IdUsuario INT
)
BEGIN

    -- Validar que exista el usuario:
    IF EXISTS (SELECT IdUsuario FROM tb_usuarios WHERE IdUsuario = _IdUsuario AND Activo = 1 AND TipoUsuario = 'Estudiante') THEN
        
        -- Validar que exista la tematica:
        IF EXISTS(SELECT IdTematica FROM tb_tematicas WHERE IdTematica = _IdTematica) THEN
            
            -- Validar que exista la relacion:
            IF EXISTS (SELECT IdTematica FROM tb_tematicasusuarios WHERE IdTematica = _IdTematica and IdUsuario = _IdUsuario) THEN

                DELETE FROM  tb_tematicasusuarios WHERE IdTematica =  _IdTematica AND IdUsuario = _IdUsuario;
                SELECT 1 AS "Codigo", 'La Tem√°tica Ha Sido Desligada Del Usuario Satisfactoriamente' AS "Mensaje";

            ELSE 
                SELECT -1 AS "Codigo", 'La Tematica No Se Encuentra Registrada En Ese Usuario' AS "Mensaje";
            END IF;

        ELSE
            SELECT -1 AS "Codigo", 'La Tematica No Se Encuentra Registrada' AS "Mensaje";
        END IF;
        
    ELSE
        SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
    END IF;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_RemoverMaterialCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_RemoverMaterialCurso`(
    IN _IdMaterialSubido INT,
    IN _IdUsuario INT
)
BEGIN
    
    IF EXISTS(SELECT IdMaterialSubido FROM tb_materialessubidoscurso WHERE IdMaterialSubido = _IdMaterialSubido 
        AND Activo = 1 AND IdUsuario = _IdUsuario) THEN 

        UPDATE tb_materialessubidoscurso SET Activo = 0 WHERE IdMaterialSubido = _IdMaterialSubido;

        SELECT 1 AS "Codigo", 'Se Ha Removido El Material Satisfactoriamente' AS "Mensaje";

    ELSE
        SELECT -1 AS "Codigo", 'El Material No Se Encuentra Registrado' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_RemoverMiembroCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_RemoverMiembroCurso`(
	IN _IdCurso INT,
    IN _IdUsuario INT
)
BEGIN
	IF EXISTS( SELECT IdCurso FROM tb_cursosusuarios WHERE IdUsuario = _IdUsuario AND IdCurso = _IdCurso
    AND (Estatus <> 'Finalizado'  OR Estatus <> 'Suspendido')) THEN
    
		UPDATE tb_cursosusuarios SET Estatus = 'Suspendido' WHERE IdUsuario = _IdUsuario AND IdCurso = _IdCurso;
        
        CALL sp_AgregarAviso(_IdUsuario,CONCAT('Has Sido Suspendido Del Curso ',courseroom.fn_NombreCurso(_IdCurso)),'Curso');
        
        SELECT 1 AS "Codigo", 'El Usuario Ha Sido Suspendido Del Curso Satisfactoriamente' AS "Mensaje";
        
    ELSE 
		SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Ligado Al Curso<br>O Su Estatus No Es Permisible Al Cambio' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_RemoverPorVotoMiembroGrupo` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_RemoverPorVotoMiembroGrupo`(
    IN _IdGrupo INT,
    IN _IdUsuario INT
)
BEGIN

    IF EXISTS(SELECT IdGrupo FROM tb_grupos WHERE IdGrupo = _IdGrupo AND Activo = 1) THEN

        IF courseroom.fn_ExisteUsuario(_IdUsuario) = 1 THEN

            IF courseroom.fn_IntentosAceptablesGrupo(_IdGrupo, _IdUsuario) = 1 THEN
                
                SELECT @Intentos := courseroom.fn_ObtenerIntentosUsuarioGrupo(_IdGrupo, _IdUsuario);

                SET @Intentos := @Intentos + 1;

                UPDATE tb_usuariosgrupos SET Intentos = @Intentos WHERE IdGrupo = _IdGrupo AND IdUsuario = _IdUsuario;
                
                SELECT 1 AS "Codigo", 'Agregado Voto Para Remover El Usuario Satisfactoriamente' AS "Mensaje";
                
            ELSE
                SELECT -1 AS "Codigo", 'El Usuario Ya Ha Sobrepasado Los Intentos Aceptables' AS "Mensaje";
            END IF;

        ELSE
            SELECT -1 AS "Codigo", 'El Usuario No Se Encuentra Registrado' AS "Mensaje";
        END IF;

    ELSE
        SELECT -1 AS "Codigo", 'El Grupo No Se Encuentra Registrado' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_RemoverPregunta` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_RemoverPregunta`(
    IN _IdPregunta INT,
    IN _IdUsuario INT
)
BEGIN

    IF courseroom.fn_ExisteUsuario(_IdUsuario) = 1 THEN
        IF EXISTS(SELECT IdPregunta FROM tb_preguntas WHERE IdPregunta = _IdPregunta AND Activo = 1 AND IdUsuario = _IdUsuario) THEN
            UPDATE tb_preguntas SET Activo = 0 WHERE IdPregunta = _IdPregunta;
            SELECT 1 AS "Codigo", 'La Pregunta Ha Sido Removida Satisfactoriamente' AS "Mensaje";
        ELSE
            SELECT -1 AS "Codigo", 'La Pregunta No Se Encuentra Registrada' AS "Mensaje";
        END IF;
            
    ELSE
        SELECT -1 AS "Codigo", 'El Usuario No Tiene Permiso Para Remover La Pregunta' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_RemoverTarea` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_RemoverTarea`(
	IN _IdTarea INT,
    IN _IdProfesor INT
)
BEGIN
	IF EXISTS(SELECT Tareas.IdTarea
    FROM tb_tareas Tareas INNER JOIN tb_cursos Cursos ON Cursos.IdCurso = Tareas.IdCurso
    WHERE Cursos.IdProfesor = _IdProfesor AND Tareas.IdTarea = _IdTarea AND Tareas.Activo = 1  AND Cursos.Activo = 1) THEN
		UPDATE tb_tareas SET Activo = 0 WHERE IdTarea = _IdTarea;
        
        	CALL sp_AgregarAvisosTarea(_IdTarea,_IdProfesor,CONCAT('El Profesor ',
				courseroom.fn_NombreCompletoUsuario(_IdProfesor),' Ha Removido La Tarea ',courseroom.fn_NombreTarea(_IdTarea)),'Tarea');
        
		SELECT 1 AS "Codigo", 'La Tarea Ha Sido Removida Satisfactoriamente' AS "Mensaje";
    ELSE
		SELECT -1 AS "Codigo", 'La Tarea No Se Encuentra Registrada<br>O No Tiene Permiso Para Eliminarla' AS "Mensaje";
    END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_RemoverTematicaCurso` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_RemoverTematicaCurso`(
    IN _IdTematica INT,
    IN _IdCurso INT
)
BEGIN

    -- Validar que exista el curso:
    IF EXISTS (SELECT IdCurso FROM tb_cursos WHERE IdCurso = _IdCurso AND Activo = 1) THEN
        
        -- Validar que exista la tematica:
        IF EXISTS(SELECT IdTematica FROM tb_tematicas WHERE IdTematica = _IdTematica) THEN
            
            -- Validar que exista la relacion:
            IF EXISTS (SELECT IdTematica FROM tb_tematicascursos WHERE IdTematica = _IdTematica AND IdCurso = _IdCurso) THEN

                DELETE FROM  tb_tematicascursos WHERE IdTematica = _IdTematica AND IdCurso = _IdCurso;
                SELECT 1 AS "Codigo", 'La Tem√°tica Ha Sido Desligada Del Curso Satisfactoriamente' AS "Mensaje";

            ELSE 
                SELECT -1 AS "Codigo", 'La Tematica No Se Encuentra Registrada En Ese Curso' AS "Mensaje";
            END IF;

        ELSE
            SELECT -1 AS "Codigo", 'La Tematica No Se Encuentra Registrada' AS "Mensaje";
        END IF;
        
    ELSE
        SELECT -1 AS "Codigo", 'El Curso No Se Encuentra Registrado' AS "Mensaje";
    END IF;

END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ValidacionContestarCuestionario` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ValidacionContestarCuestionario`(
	IN _IdCurso INT,
    IN _IdUsuario INT
)
BEGIN
	IF EXISTS(SELECT CursosUsuarios.IdCurso FROM 
			tb_cursosusuarios CursosUsuarios
			INNER JOIN tb_cursos Cursos ON Cursos.IdCurso = CursosUsuarios.IdCurso 
			WHERE CursosUsuarios.IdCurso = _IdCurso AND Cursos.Finalizado = 1 AND Cursos.Activo = 1
			AND CursosUsuarios.IdUsuario = _IdUsuario AND CursosUsuarios.Estatus = 'Actual')  THEN
            SELECT 1 AS "Codigo", 'El Usuario Puede Contestar El Cuestionario' As "Mensaje";
		ELSE
            SELECT -1 AS "Codigo", 'El Usuario No Puede Contestar El Cuestionario' As "Mensaje";
		END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!50003 DROP PROCEDURE IF EXISTS `sp_ValidarGeneracionGrupos` */;
/*!50003 SET @saved_cs_client      = @@character_set_client */ ;
/*!50003 SET @saved_cs_results     = @@character_set_results */ ;
/*!50003 SET @saved_col_connection = @@collation_connection */ ;
/*!50003 SET character_set_client  = utf8mb4 */ ;
/*!50003 SET character_set_results = utf8mb4 */ ;
/*!50003 SET collation_connection  = utf8mb4_0900_ai_ci */ ;
/*!50003 SET @saved_sql_mode       = @@sql_mode */ ;
/*!50003 SET sql_mode              = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION' */ ;
DELIMITER ;;
CREATE DEFINER=`courseroom_server`@`localhost` PROCEDURE `sp_ValidarGeneracionGrupos`(
	IN _IdCurso INT
)
BEGIN
	IF NOT EXISTS(SELECT Grupos.IdCurso FROM tb_grupos Grupos 
		INNER JOIN tb_usuariosgrupos UsuariosGrupos ON UsuariosGrupos.IdGrupo = Grupos.IdGrupo WHERE Grupos.IdCurso = _IdCurso) THEN
        SELECT 1 AS "Codigo", 'El Curso No Tiene Grupos Generados' AS "Mensaje";
	ELSE
        SELECT -1 AS "Codigo", 'El Curso Ya Tiene Grupos Generados' AS "Mensaje";
	END IF;
END ;;
DELIMITER ;
/*!50003 SET sql_mode              = @saved_sql_mode */ ;
/*!50003 SET character_set_client  = @saved_cs_client */ ;
/*!50003 SET character_set_results = @saved_cs_results */ ;
/*!50003 SET collation_connection  = @saved_col_connection */ ;
/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;

/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;
/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;

-- Dump completed on 2022-04-27 20:21:19
